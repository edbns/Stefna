async function f(o){if(typeof o=="string"&&!o.startsWith("blob:")){const d=/\.(mp4|mov|webm)$/i.test(o)?"video":"image";return{url:o,resource_type:d}}const a=await fetch("/.netlify/functions/cloudinary-sign",{method:"POST"}),{timestamp:p,signature:r,api_key:u,cloud_name:i,folder:t}=await a.json(),e=new FormData;e.append("file",o),e.append("timestamp",p),e.append("signature",r),e.append("api_key",u),t&&e.append("folder",t);const n=await fetch(`https://api.cloudinary.com/v1_1/${i}/auto/upload`,{method:"POST",body:e});if(!n.ok)throw new Error("Cloudinary upload failed");const s=await n.json(),c=s.resource_type;return{url:s.secure_url,resource_type:c}}export{f as prepareSourceAsset};
