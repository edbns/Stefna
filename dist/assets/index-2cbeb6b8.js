var lb=Object.defineProperty;var cb=(t,e,n)=>e in t?lb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ve=(t,e,n)=>(cb(t,typeof e!="symbol"?e+"":e,n),n);function ub(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function db(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ky={exports:{}},Jl={},Sy={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),fb=Symbol.for("react.portal"),pb=Symbol.for("react.fragment"),mb=Symbol.for("react.strict_mode"),gb=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),vb=Symbol.for("react.context"),wb=Symbol.for("react.forward_ref"),xb=Symbol.for("react.suspense"),bb=Symbol.for("react.memo"),kb=Symbol.for("react.lazy"),lp=Symbol.iterator;function Sb(t){return t===null||typeof t!="object"?null:(t=lp&&t[lp]||t["@@iterator"],typeof t=="function"?t:null)}var _y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jy=Object.assign,Cy={};function wi(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||_y}wi.prototype.isReactComponent={};wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ty(){}Ty.prototype=wi.prototype;function fh(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||_y}var ph=fh.prototype=new Ty;ph.constructor=fh;jy(ph,wi.prototype);ph.isPureReactComponent=!0;var cp=Array.isArray,Py=Object.prototype.hasOwnProperty,mh={current:null},Ny={key:!0,ref:!0,__self:!0,__source:!0};function Ey(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Py.call(e,r)&&!Ny.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xo,type:t,key:i,ref:o,props:s,_owner:mh.current}}function _b(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function jb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var up=/\/+/g;function Dc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jb(""+t.key):e.toString(36)}function Za(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case fb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dc(o,0):r,cp(s)?(n="",t!=null&&(n=t.replace(up,"$&/")+"/"),Za(s,e,n,"",function(u){return u})):s!=null&&(gh(s)&&(s=_b(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(up,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",cp(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Dc(i,l);o+=Za(i,e,n,c,s)}else if(c=Sb(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Dc(i,l++),o+=Za(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ka(t,e,n){if(t==null)return t;var r=[],s=0;return Za(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Cb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},el={transition:null},Tb={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:el,ReactCurrentOwner:mh};function Ay(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=wi;re.Fragment=pb;re.Profiler=gb;re.PureComponent=fh;re.StrictMode=mb;re.Suspense=xb;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;re.act=Ay;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Py.call(e,c)&&!Ny.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Xo,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:vb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yb,_context:t},t.Consumer=t};re.createElement=Ey;re.createFactory=function(t){var e=Ey.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:wb,render:t}};re.isValidElement=gh;re.lazy=function(t){return{$$typeof:kb,_payload:{_status:-1,_result:t},_init:Cb}};re.memo=function(t,e){return{$$typeof:bb,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};re.unstable_act=Ay;re.useCallback=function(t,e){return ct.current.useCallback(t,e)};re.useContext=function(t){return ct.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};re.useEffect=function(t,e){return ct.current.useEffect(t,e)};re.useId=function(){return ct.current.useId()};re.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return ct.current.useMemo(t,e)};re.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};re.useRef=function(t){return ct.current.useRef(t)};re.useState=function(t){return ct.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return ct.current.useTransition()};re.version="18.3.1";Sy.exports=re;var w=Sy.exports;const Os=db(w),Pb=ub({__proto__:null,default:Os},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb=w,Eb=Symbol.for("react.element"),Ab=Symbol.for("react.fragment"),Rb=Object.prototype.hasOwnProperty,Ib=Nb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ob={key:!0,ref:!0,__self:!0,__source:!0};function Ry(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Rb.call(e,r)&&!Ob.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Eb,type:t,key:i,ref:o,props:s,_owner:Ib.current}}Jl.Fragment=Ab;Jl.jsx=Ry;Jl.jsxs=Ry;ky.exports=Jl;var a=ky.exports,Ou={},Iy={exports:{}},Et={},Oy={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,$){var z=R.length;R.push($);e:for(;0<z;){var ae=z-1>>>1,he=R[ae];if(0<s(he,$))R[ae]=$,R[z]=he,z=ae;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var $=R[0],z=R.pop();if(z!==$){R[0]=z;e:for(var ae=0,he=R.length,St=he>>>1;ae<St;){var Ze=2*(ae+1)-1,Gt=R[Ze],it=Ze+1,on=R[it];if(0>s(Gt,z))it<he&&0>s(on,Gt)?(R[ae]=on,R[it]=z,ae=it):(R[ae]=Gt,R[Ze]=z,ae=Ze);else if(it<he&&0>s(on,z))R[ae]=on,R[it]=z,ae=it;else break e}}return $}function s(R,$){var z=R.sortIndex-$.sortIndex;return z!==0?z:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,v=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=R)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function S(R){if(x=!1,y(R),!v)if(n(c)!==null)v=!0,dt(T);else{var $=n(u);$!==null&&J(S,$.startTime-R)}}function T(R,$){v=!1,x&&(x=!1,g(j),j=-1),p=!0;var z=f;try{for(y($),h=n(c);h!==null&&(!(h.expirationTime>$)||R&&!G());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,f=h.priorityLevel;var he=ae(h.expirationTime<=$);$=t.unstable_now(),typeof he=="function"?h.callback=he:h===n(c)&&r(c),y($)}else r(c);h=n(c)}if(h!==null)var St=!0;else{var Ze=n(u);Ze!==null&&J(S,Ze.startTime-$),St=!1}return St}finally{h=null,f=z,p=!1}}var C=!1,P=null,j=-1,D=5,I=-1;function G(){return!(t.unstable_now()-I<D)}function M(){if(P!==null){var R=t.unstable_now();I=R;var $=!0;try{$=P(!0,R)}finally{$?Oe():(C=!1,P=null)}}else C=!1}var Oe;if(typeof m=="function")Oe=function(){m(M)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,kt=Z.port2;Z.port1.onmessage=M,Oe=function(){kt.postMessage(null)}}else Oe=function(){k(M,0)};function dt(R){P=R,C||(C=!0,Oe())}function J(R,$){j=k(function(){R(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,dt(T))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var z=f;f=$;try{return R()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=f;f=R;try{return $()}finally{f=z}},t.unstable_scheduleCallback=function(R,$,z){var ae=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ae+z:ae):z=ae,R){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=z+he,R={id:d++,callback:$,priorityLevel:R,startTime:z,expirationTime:he,sortIndex:-1},z>ae?(R.sortIndex=z,e(u,R),n(c)===null&&R===n(u)&&(x?(g(j),j=-1):x=!0,J(S,z-ae))):(R.sortIndex=he,e(c,R),v||p||(v=!0,dt(T))),R},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(R){var $=f;return function(){var z=f;f=$;try{return R.apply(this,arguments)}finally{f=z}}}})(Ly);Oy.exports=Ly;var Lb=Oy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db=w,Nt=Lb;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dy=new Set,Co={};function hs(t,e){li(t,e),li(t+"Capture",e)}function li(t,e){for(Co[t]=e,t=0;t<e.length;t++)Dy.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,Mb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dp={},hp={};function Ub(t){return Lu.call(hp,t)?!0:Lu.call(dp,t)?!1:Mb.test(t)?hp[t]=!0:(dp[t]=!0,!1)}function $b(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fb(t,e,n,r){if(e===null||typeof e>"u"||$b(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yh,vh);Xe[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yh,vh);Xe[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yh,vh);Xe[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function wh(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fb(e,n,s,r)&&(n=null),r||s===null?Ub(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=Db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sa=Symbol.for("react.element"),Ls=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),xh=Symbol.for("react.strict_mode"),Du=Symbol.for("react.profiler"),My=Symbol.for("react.provider"),Uy=Symbol.for("react.context"),bh=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Uu=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),$y=Symbol.for("react.offscreen"),fp=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=fp&&t[fp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Mc;function Zi(t){if(Mc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mc=e&&e[1]||""}return`
`+Mc+t}var Uc=!1;function $c(t,e){if(!t||Uc)return"";Uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Uc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zi(t):""}function zb(t){switch(t.tag){case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return t=$c(t.type,!1),t;case 11:return t=$c(t.type.render,!1),t;case 1:return t=$c(t.type,!0),t;default:return""}}function $u(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case Ls:return"Portal";case Du:return"Profiler";case xh:return"StrictMode";case Mu:return"Suspense";case Uu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uy:return(t.displayName||"Context")+".Consumer";case My:return(t._context.displayName||"Context")+".Provider";case bh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:$u(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return $u(t(e))}catch{}}return null}function Vb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $u(e);case 8:return e===xh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bb(t){var e=Fy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _a(t){t._valueTracker||(t._valueTracker=Bb(t))}function zy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fu(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vy(t,e){e=e.checked,e!=null&&wh(t,"checked",e,!1)}function zu(t,e){Vy(t,e);var n=hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vu(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vu(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Xs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(eo(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function By(t,e){var n=hr(e.value),r=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ja,Hy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ja=ja||document.createElement("div"),ja.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ja.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wb=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){Wb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function Gy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function Yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Hb=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hu(t,e){if(e){if(Hb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Gu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qu=null,Zs=null,ei=null;function vp(t){if(t=ta(t)){if(typeof qu!="function")throw Error(E(280));var e=t.stateNode;e&&(e=tc(e),qu(t.stateNode,t.type,e))}}function qy(t){Zs?ei?ei.push(t):ei=[t]:Zs=t}function Ky(){if(Zs){var t=Zs,e=ei;if(ei=Zs=null,vp(t),e)for(t=0;t<e.length;t++)vp(e[t])}}function Jy(t,e){return t(e)}function Qy(){}var Fc=!1;function Xy(t,e,n){if(Fc)return t(e,n);Fc=!0;try{return Jy(t,e,n)}finally{Fc=!1,(Zs!==null||ei!==null)&&(Qy(),Ky())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=tc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Ku=!1;if(En)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Ku=!1}function Gb(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ao=!1,vl=null,wl=!1,Ju=null,Yb={onError:function(t){ao=!0,vl=t}};function qb(t,e,n,r,s,i,o,l,c){ao=!1,vl=null,Gb.apply(Yb,arguments)}function Kb(t,e,n,r,s,i,o,l,c){if(qb.apply(this,arguments),ao){if(ao){var u=vl;ao=!1,vl=null}else throw Error(E(198));wl||(wl=!0,Ju=u)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wp(t){if(fs(t)!==t)throw Error(E(188))}function Jb(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wp(s),t;if(i===r)return wp(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function ev(t){return t=Jb(t),t!==null?tv(t):null}function tv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tv(t);if(e!==null)return e;t=t.sibling}return null}var nv=Nt.unstable_scheduleCallback,xp=Nt.unstable_cancelCallback,Qb=Nt.unstable_shouldYield,Xb=Nt.unstable_requestPaint,Ie=Nt.unstable_now,Zb=Nt.unstable_getCurrentPriorityLevel,_h=Nt.unstable_ImmediatePriority,rv=Nt.unstable_UserBlockingPriority,xl=Nt.unstable_NormalPriority,e1=Nt.unstable_LowPriority,sv=Nt.unstable_IdlePriority,Ql=null,pn=null;function t1(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ql,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:s1,n1=Math.log,r1=Math.LN2;function s1(t){return t>>>=0,t===0?32:31-(n1(t)/r1|0)|0}var Ca=64,Ta=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=to(l):(i&=o,i!==0&&(r=to(i)))}else o=n&~s,o!==0?r=to(o):i!==0&&(r=to(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function i1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=i1(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Qu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iv(){var t=Ca;return Ca<<=1,!(Ca&4194240)&&(Ca=64),t}function zc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function a1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function ov(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var av,Ch,lv,cv,uv,Xu=!1,Pa=[],sr=null,ir=null,or=null,No=new Map,Eo=new Map,Xn=[],l1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bp(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Bi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ta(e),e!==null&&Ch(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function c1(t,e,n,r,s){switch(e){case"focusin":return sr=Bi(sr,t,e,n,r,s),!0;case"dragenter":return ir=Bi(ir,t,e,n,r,s),!0;case"mouseover":return or=Bi(or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return No.set(i,Bi(No.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Eo.set(i,Bi(Eo.get(i)||null,t,e,n,r,s)),!0}return!1}function dv(t){var e=Jr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=Zy(n),e!==null){t.blockedOn=e,uv(t.priority,function(){lv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yu=r,n.target.dispatchEvent(r),Yu=null}else return e=ta(n),e!==null&&Ch(e),t.blockedOn=n,!1;e.shift()}return!0}function kp(t,e,n){tl(t)&&n.delete(e)}function u1(){Xu=!1,sr!==null&&tl(sr)&&(sr=null),ir!==null&&tl(ir)&&(ir=null),or!==null&&tl(or)&&(or=null),No.forEach(kp),Eo.forEach(kp)}function Wi(t,e){t.blockedOn===e&&(t.blockedOn=null,Xu||(Xu=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,u1)))}function Ao(t){function e(s){return Wi(s,t)}if(0<Pa.length){Wi(Pa[0],t);for(var n=1;n<Pa.length;n++){var r=Pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sr!==null&&Wi(sr,t),ir!==null&&Wi(ir,t),or!==null&&Wi(or,t),No.forEach(e),Eo.forEach(e),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)dv(n),n.blockedOn===null&&Xn.shift()}var ti=Mn.ReactCurrentBatchConfig,kl=!0;function d1(t,e,n,r){var s=de,i=ti.transition;ti.transition=null;try{de=1,Th(t,e,n,r)}finally{de=s,ti.transition=i}}function h1(t,e,n,r){var s=de,i=ti.transition;ti.transition=null;try{de=4,Th(t,e,n,r)}finally{de=s,ti.transition=i}}function Th(t,e,n,r){if(kl){var s=Zu(t,e,n,r);if(s===null)Qc(t,e,r,Sl,n),bp(t,r);else if(c1(s,t,e,n,r))r.stopPropagation();else if(bp(t,r),e&4&&-1<l1.indexOf(t)){for(;s!==null;){var i=ta(s);if(i!==null&&av(i),i=Zu(t,e,n,r),i===null&&Qc(t,e,r,Sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qc(t,e,r,null,n)}}var Sl=null;function Zu(t,e,n,r){if(Sl=null,t=Sh(r),t=Jr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sl=t,null}function hv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zb()){case _h:return 1;case rv:return 4;case xl:case e1:return 16;case sv:return 536870912;default:return 16}default:return 16}}var tr=null,Ph=null,nl=null;function fv(){if(nl)return nl;var t,e=Ph,n=e.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nl=s.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Na(){return!0}function Sp(){return!1}function At(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Na:Sp,this.isPropagationStopped=Sp,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),e}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nh=At(xi),ea=Pe({},xi,{view:0,detail:0}),f1=At(ea),Vc,Bc,Hi,Xl=Pe({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(Vc=t.screenX-Hi.screenX,Bc=t.screenY-Hi.screenY):Bc=Vc=0,Hi=t),Vc)},movementY:function(t){return"movementY"in t?t.movementY:Bc}}),_p=At(Xl),p1=Pe({},Xl,{dataTransfer:0}),m1=At(p1),g1=Pe({},ea,{relatedTarget:0}),Wc=At(g1),y1=Pe({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),v1=At(y1),w1=Pe({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x1=At(w1),b1=Pe({},xi,{data:0}),jp=At(b1),k1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_1[t])?!!e[t]:!1}function Eh(){return j1}var C1=Pe({},ea,{key:function(t){if(t.key){var e=k1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T1=At(C1),P1=Pe({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cp=At(P1),N1=Pe({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),E1=At(N1),A1=Pe({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R1=At(A1),I1=Pe({},Xl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=At(I1),L1=[9,13,27,32],Ah=En&&"CompositionEvent"in window,lo=null;En&&"documentMode"in document&&(lo=document.documentMode);var D1=En&&"TextEvent"in window&&!lo,pv=En&&(!Ah||lo&&8<lo&&11>=lo),Tp=String.fromCharCode(32),Pp=!1;function mv(t,e){switch(t){case"keyup":return L1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ms=!1;function M1(t,e){switch(t){case"compositionend":return gv(e);case"keypress":return e.which!==32?null:(Pp=!0,Tp);case"textInput":return t=e.data,t===Tp&&Pp?null:t;default:return null}}function U1(t,e){if(Ms)return t==="compositionend"||!Ah&&mv(t,e)?(t=fv(),nl=Ph=tr=null,Ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pv&&e.locale!=="ko"?null:e.data;default:return null}}var $1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$1[t.type]:e==="textarea"}function yv(t,e,n,r){qy(r),e=_l(e,"onChange"),0<e.length&&(n=new Nh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var co=null,Ro=null;function F1(t){Pv(t,0)}function Zl(t){var e=Fs(t);if(zy(e))return t}function z1(t,e){if(t==="change")return e}var vv=!1;if(En){var Hc;if(En){var Gc="oninput"in document;if(!Gc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Gc=typeof Ep.oninput=="function"}Hc=Gc}else Hc=!1;vv=Hc&&(!document.documentMode||9<document.documentMode)}function Ap(){co&&(co.detachEvent("onpropertychange",wv),Ro=co=null)}function wv(t){if(t.propertyName==="value"&&Zl(Ro)){var e=[];yv(e,Ro,t,Sh(t)),Xy(F1,e)}}function V1(t,e,n){t==="focusin"?(Ap(),co=e,Ro=n,co.attachEvent("onpropertychange",wv)):t==="focusout"&&Ap()}function B1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zl(Ro)}function W1(t,e){if(t==="click")return Zl(e)}function H1(t,e){if(t==="input"||t==="change")return Zl(e)}function G1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:G1;function Io(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lu.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function Rp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ip(t,e){var n=Rp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rp(n)}}function xv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bv(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function Rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y1(t){var e=bv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xv(n.ownerDocument.documentElement,n)){if(r!==null&&Rh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ip(n,i);var o=Ip(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var q1=En&&"documentMode"in document&&11>=document.documentMode,Us=null,ed=null,uo=null,td=!1;function Op(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;td||Us==null||Us!==yl(r)||(r=Us,"selectionStart"in r&&Rh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uo&&Io(uo,r)||(uo=r,r=_l(ed,"onSelect"),0<r.length&&(e=new Nh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function Ea(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},Yc={},kv={};En&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function ec(t){if(Yc[t])return Yc[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kv)return Yc[t]=e[n];return t}var Sv=ec("animationend"),_v=ec("animationiteration"),jv=ec("animationstart"),Cv=ec("transitionend"),Tv=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){Tv.set(t,e),hs(e,[t])}for(var qc=0;qc<Lp.length;qc++){var Kc=Lp[qc],K1=Kc.toLowerCase(),J1=Kc[0].toUpperCase()+Kc.slice(1);gr(K1,"on"+J1)}gr(Sv,"onAnimationEnd");gr(_v,"onAnimationIteration");gr(jv,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Cv,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q1=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Kb(r,e,void 0,t),t.currentTarget=null}function Pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Dp(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Dp(s,l,u),i=c}}}if(wl)throw t=Ju,wl=!1,Ju=null,t}function we(t,e){var n=e[od];n===void 0&&(n=e[od]=new Set);var r=t+"__bubble";n.has(r)||(Nv(e,t,2,!1),n.add(r))}function Jc(t,e,n){var r=0;e&&(r|=4),Nv(n,t,r,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function Oo(t){if(!t[Aa]){t[Aa]=!0,Dy.forEach(function(n){n!=="selectionchange"&&(Q1.has(n)||Jc(n,!1,t),Jc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,Jc("selectionchange",!1,e))}}function Nv(t,e,n,r){switch(hv(e)){case 1:var s=d1;break;case 4:s=h1;break;default:s=Th}n=s.bind(null,e,n,t),s=void 0,!Ku||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Xy(function(){var u=i,d=Sh(n),h=[];e:{var f=Tv.get(t);if(f!==void 0){var p=Nh,v=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":p=T1;break;case"focusin":v="focus",p=Wc;break;case"focusout":v="blur",p=Wc;break;case"beforeblur":case"afterblur":p=Wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=m1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=E1;break;case Sv:case _v:case jv:p=v1;break;case Cv:p=R1;break;case"scroll":p=f1;break;case"wheel":p=O1;break;case"copy":case"cut":case"paste":p=x1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cp}var x=(e&4)!==0,k=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,y;m!==null;){y=m;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,g!==null&&(S=Po(m,g),S!=null&&x.push(Lo(m,S,y)))),k)break;m=m.return}0<x.length&&(f=new p(f,v,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Yu&&(v=n.relatedTarget||n.fromElement)&&(Jr(v)||v[An]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?Jr(v):null,v!==null&&(k=fs(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(x=_p,S="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=Cp,S="onPointerLeave",g="onPointerEnter",m="pointer"),k=p==null?f:Fs(p),y=v==null?f:Fs(v),f=new x(S,m+"leave",p,n,d),f.target=k,f.relatedTarget=y,S=null,Jr(d)===u&&(x=new x(g,m+"enter",v,n,d),x.target=y,x.relatedTarget=k,S=x),k=S,p&&v)t:{for(x=p,g=v,m=0,y=x;y;y=_s(y))m++;for(y=0,S=g;S;S=_s(S))y++;for(;0<m-y;)x=_s(x),m--;for(;0<y-m;)g=_s(g),y--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=_s(x),g=_s(g)}x=null}else x=null;p!==null&&Mp(h,f,p,x,!1),v!==null&&k!==null&&Mp(h,k,v,x,!0)}}e:{if(f=u?Fs(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=z1;else if(Np(f))if(vv)T=H1;else{T=B1;var C=V1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=W1);if(T&&(T=T(t,u))){yv(h,T,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Vu(f,"number",f.value)}switch(C=u?Fs(u):window,t){case"focusin":(Np(C)||C.contentEditable==="true")&&(Us=C,ed=u,uo=null);break;case"focusout":uo=ed=Us=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,Op(h,n,d);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":Op(h,n,d)}var P;if(Ah)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ms?mv(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(pv&&n.locale!=="ko"&&(Ms||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ms&&(P=fv()):(tr=d,Ph="value"in tr?tr.value:tr.textContent,Ms=!0)),C=_l(u,j),0<C.length&&(j=new jp(j,t,null,n,d),h.push({event:j,listeners:C}),P?j.data=P:(P=gv(n),P!==null&&(j.data=P)))),(P=D1?M1(t,n):U1(t,n))&&(u=_l(u,"onBeforeInput"),0<u.length&&(d=new jp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}Pv(h,e)})}function Lo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _l(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Po(t,n),i!=null&&r.unshift(Lo(t,i,s)),i=Po(t,e),i!=null&&r.push(Lo(t,i,s))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Po(n,i),c!=null&&o.unshift(Lo(n,c,l))):s||(c=Po(n,i),c!=null&&o.push(Lo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var X1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function Up(t){return(typeof t=="string"?t:""+t).replace(X1,`
`).replace(Z1,"")}function Ra(t,e,n){if(e=Up(e),Up(t)!==e&&n)throw Error(E(425))}function jl(){}var nd=null,rd=null;function sd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,ek=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,tk=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(t){return $p.resolve(null).then(t).catch(nk)}:id;function nk(t){setTimeout(function(){throw t})}function Xc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ao(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),hn="__reactFiber$"+bi,Do="__reactProps$"+bi,An="__reactContainer$"+bi,od="__reactEvents$"+bi,rk="__reactListeners$"+bi,sk="__reactHandles$"+bi;function Jr(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fp(t);t!==null;){if(n=t[hn])return n;t=Fp(t)}return e}t=n,n=t.parentNode}return null}function ta(t){return t=t[hn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function tc(t){return t[Do]||null}var ad=[],zs=-1;function yr(t){return{current:t}}function xe(t){0>zs||(t.current=ad[zs],ad[zs]=null,zs--)}function me(t,e){zs++,ad[zs]=t.current,t.current=e}var fr={},st=yr(fr),wt=yr(!1),as=fr;function ci(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function Cl(){xe(wt),xe(st)}function zp(t,e,n){if(st.current!==fr)throw Error(E(168));me(st,e),me(wt,n)}function Ev(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,Vb(t)||"Unknown",s));return Pe({},n,r)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,as=st.current,me(st,t),me(wt,wt.current),!0}function Vp(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Ev(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,xe(wt),xe(st),me(st,t)):xe(wt),me(wt,n)}var Cn=null,nc=!1,Zc=!1;function Av(t){Cn===null?Cn=[t]:Cn.push(t)}function ik(t){nc=!0,Av(t)}function vr(){if(!Zc&&Cn!==null){Zc=!0;var t=0,e=de;try{var n=Cn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,nc=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),nv(_h,vr),s}finally{de=e,Zc=!1}}return null}var Vs=[],Bs=0,Pl=null,Nl=0,Ut=[],$t=0,ls=null,Tn=1,Pn="";function zr(t,e){Vs[Bs++]=Nl,Vs[Bs++]=Pl,Pl=t,Nl=e}function Rv(t,e,n){Ut[$t++]=Tn,Ut[$t++]=Pn,Ut[$t++]=ls,ls=t;var r=Tn;t=Pn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Tn=1<<32-nn(e)+s|n<<s|r,Pn=i+t}else Tn=1<<i|n<<s|r,Pn=t}function Ih(t){t.return!==null&&(zr(t,1),Rv(t,1,0))}function Oh(t){for(;t===Pl;)Pl=Vs[--Bs],Vs[Bs]=null,Nl=Vs[--Bs],Vs[Bs]=null;for(;t===ls;)ls=Ut[--$t],Ut[$t]=null,Pn=Ut[--$t],Ut[$t]=null,Tn=Ut[--$t],Ut[$t]=null}var Pt=null,Tt=null,be=!1,en=null;function Iv(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Tt=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:Tn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Tt=null,!0):!1;default:return!1}}function ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cd(t){if(be){var e=Tt;if(e){var n=e;if(!Bp(t,e)){if(ld(t))throw Error(E(418));e=ar(n.nextSibling);var r=Pt;e&&Bp(t,e)?Iv(r,n):(t.flags=t.flags&-4097|2,be=!1,Pt=t)}}else{if(ld(t))throw Error(E(418));t.flags=t.flags&-4097|2,be=!1,Pt=t}}}function Wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function Ia(t){if(t!==Pt)return!1;if(!be)return Wp(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sd(t.type,t.memoizedProps)),e&&(e=Tt)){if(ld(t))throw Ov(),Error(E(418));for(;e;)Iv(t,e),e=ar(e.nextSibling)}if(Wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=Pt?ar(t.stateNode.nextSibling):null;return!0}function Ov(){for(var t=Tt;t;)t=ar(t.nextSibling)}function ui(){Tt=Pt=null,be=!1}function Lh(t){en===null?en=[t]:en.push(t)}var ok=Mn.ReactCurrentBatchConfig;function Gi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Oa(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hp(t){var e=t._init;return e(t._payload)}function Lv(t){function e(g,m){if(t){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=dr(g,m),g.index=0,g.sibling=null,g}function i(g,m,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,y,S){return m===null||m.tag!==6?(m=ou(y,g.mode,S),m.return=g,m):(m=s(m,y),m.return=g,m)}function c(g,m,y,S){var T=y.type;return T===Ds?d(g,m,y.props.children,S,y.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jn&&Hp(T)===m.type)?(S=s(m,y.props),S.ref=Gi(g,m,y),S.return=g,S):(S=ul(y.type,y.key,y.props,null,g.mode,S),S.ref=Gi(g,m,y),S.return=g,S)}function u(g,m,y,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=au(y,g.mode,S),m.return=g,m):(m=s(m,y.children||[]),m.return=g,m)}function d(g,m,y,S,T){return m===null||m.tag!==7?(m=rs(y,g.mode,S,T),m.return=g,m):(m=s(m,y),m.return=g,m)}function h(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ou(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Sa:return y=ul(m.type,m.key,m.props,null,g.mode,y),y.ref=Gi(g,null,m),y.return=g,y;case Ls:return m=au(m,g.mode,y),m.return=g,m;case Jn:var S=m._init;return h(g,S(m._payload),y)}if(eo(m)||zi(m))return m=rs(m,g.mode,y,null),m.return=g,m;Oa(g,m)}return null}function f(g,m,y,S){var T=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:l(g,m,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sa:return y.key===T?c(g,m,y,S):null;case Ls:return y.key===T?u(g,m,y,S):null;case Jn:return T=y._init,f(g,m,T(y._payload),S)}if(eo(y)||zi(y))return T!==null?null:d(g,m,y,S,null);Oa(g,y)}return null}function p(g,m,y,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(y)||null,l(m,g,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sa:return g=g.get(S.key===null?y:S.key)||null,c(m,g,S,T);case Ls:return g=g.get(S.key===null?y:S.key)||null,u(m,g,S,T);case Jn:var C=S._init;return p(g,m,y,C(S._payload),T)}if(eo(S)||zi(S))return g=g.get(y)||null,d(m,g,S,T,null);Oa(m,S)}return null}function v(g,m,y,S){for(var T=null,C=null,P=m,j=m=0,D=null;P!==null&&j<y.length;j++){P.index>j?(D=P,P=null):D=P.sibling;var I=f(g,P,y[j],S);if(I===null){P===null&&(P=D);break}t&&P&&I.alternate===null&&e(g,P),m=i(I,m,j),C===null?T=I:C.sibling=I,C=I,P=D}if(j===y.length)return n(g,P),be&&zr(g,j),T;if(P===null){for(;j<y.length;j++)P=h(g,y[j],S),P!==null&&(m=i(P,m,j),C===null?T=P:C.sibling=P,C=P);return be&&zr(g,j),T}for(P=r(g,P);j<y.length;j++)D=p(P,g,j,y[j],S),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?j:D.key),m=i(D,m,j),C===null?T=D:C.sibling=D,C=D);return t&&P.forEach(function(G){return e(g,G)}),be&&zr(g,j),T}function x(g,m,y,S){var T=zi(y);if(typeof T!="function")throw Error(E(150));if(y=T.call(y),y==null)throw Error(E(151));for(var C=T=null,P=m,j=m=0,D=null,I=y.next();P!==null&&!I.done;j++,I=y.next()){P.index>j?(D=P,P=null):D=P.sibling;var G=f(g,P,I.value,S);if(G===null){P===null&&(P=D);break}t&&P&&G.alternate===null&&e(g,P),m=i(G,m,j),C===null?T=G:C.sibling=G,C=G,P=D}if(I.done)return n(g,P),be&&zr(g,j),T;if(P===null){for(;!I.done;j++,I=y.next())I=h(g,I.value,S),I!==null&&(m=i(I,m,j),C===null?T=I:C.sibling=I,C=I);return be&&zr(g,j),T}for(P=r(g,P);!I.done;j++,I=y.next())I=p(P,g,j,I.value,S),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?j:I.key),m=i(I,m,j),C===null?T=I:C.sibling=I,C=I);return t&&P.forEach(function(M){return e(g,M)}),be&&zr(g,j),T}function k(g,m,y,S){if(typeof y=="object"&&y!==null&&y.type===Ds&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Sa:e:{for(var T=y.key,C=m;C!==null;){if(C.key===T){if(T=y.type,T===Ds){if(C.tag===7){n(g,C.sibling),m=s(C,y.props.children),m.return=g,g=m;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jn&&Hp(T)===C.type){n(g,C.sibling),m=s(C,y.props),m.ref=Gi(g,C,y),m.return=g,g=m;break e}n(g,C);break}else e(g,C);C=C.sibling}y.type===Ds?(m=rs(y.props.children,g.mode,S,y.key),m.return=g,g=m):(S=ul(y.type,y.key,y.props,null,g.mode,S),S.ref=Gi(g,m,y),S.return=g,g=S)}return o(g);case Ls:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(g,m.sibling),m=s(m,y.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=au(y,g.mode,S),m.return=g,g=m}return o(g);case Jn:return C=y._init,k(g,m,C(y._payload),S)}if(eo(y))return v(g,m,y,S);if(zi(y))return x(g,m,y,S);Oa(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,y),m.return=g,g=m):(n(g,m),m=ou(y,g.mode,S),m.return=g,g=m),o(g)):n(g,m)}return k}var di=Lv(!0),Dv=Lv(!1),El=yr(null),Al=null,Ws=null,Dh=null;function Mh(){Dh=Ws=Al=null}function Uh(t){var e=El.current;xe(El),t._currentValue=e}function ud(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ni(t,e){Al=t,Dh=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Dh!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(Al===null)throw Error(E(308));Ws=t,Al.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var Qr=null;function $h(t){Qr===null?Qr=[t]:Qr.push(t)}function Mv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,$h(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rn(t,n)}return s=r.interleaved,s===null?(e.next=e,$h(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jh(t,n)}}function Gp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rl(t,e,n,r){var s=t.updateQueue;Qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,x=l;switch(f=e,p=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=Pe({},h,f);break e;case 2:Qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=h}}function Yp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var na={},mn=yr(na),Mo=yr(na),Uo=yr(na);function Xr(t){if(t===na)throw Error(E(174));return t}function zh(t,e){switch(me(Uo,e),me(Mo,t),me(mn,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wu(e,t)}xe(mn),me(mn,e)}function hi(){xe(mn),xe(Mo),xe(Uo)}function $v(t){Xr(Uo.current);var e=Xr(mn.current),n=Wu(e,t.type);e!==n&&(me(Mo,t),me(mn,n))}function Vh(t){Mo.current===t&&(xe(mn),xe(Mo))}var je=yr(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eu=[];function Bh(){for(var t=0;t<eu.length;t++)eu[t]._workInProgressVersionPrimary=null;eu.length=0}var il=Mn.ReactCurrentDispatcher,tu=Mn.ReactCurrentBatchConfig,cs=0,Te=null,Ve=null,Ge=null,Ol=!1,ho=!1,$o=0,ak=0;function et(){throw Error(E(321))}function Wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Hh(t,e,n,r,s,i){if(cs=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=t===null||t.memoizedState===null?dk:hk,t=n(r,s),ho){i=0;do{if(ho=!1,$o=0,25<=i)throw Error(E(301));i+=1,Ge=Ve=null,e.updateQueue=null,il.current=fk,t=n(r,s)}while(ho)}if(il.current=Ll,e=Ve!==null&&Ve.next!==null,cs=0,Ge=Ve=Te=null,Ol=!1,e)throw Error(E(300));return t}function Gh(){var t=$o!==0;return $o=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ht(){if(Ve===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Ge===null?Te.memoizedState:Ge.next;if(e!==null)Ge=e,Ve=t;else{if(t===null)throw Error(E(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ge===null?Te.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Fo(t,e){return typeof e=="function"?e(t):e}function nu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=Ve,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((cs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Te.lanes|=d,us|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,sn(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ru(t){var e=Ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sn(i,e.memoizedState)||(yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Fv(){}function zv(t,e){var n=Te,r=Ht(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,yt=!0),r=r.queue,Yh(Wv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,zo(9,Bv.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(E(349));cs&30||Vv(n,e,s)}return s}function Vv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bv(t,e,n,r){e.value=n,e.getSnapshot=r,Hv(e)&&Gv(t)}function Wv(t,e,n){return n(function(){Hv(e)&&Gv(t)})}function Hv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function Gv(t){var e=Rn(t,1);e!==null&&rn(e,t,1,-1)}function qp(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:t},e.queue=t,t=t.dispatch=uk.bind(null,Te,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yv(){return Ht().memoizedState}function ol(t,e,n,r){var s=dn();Te.flags|=t,s.memoizedState=zo(1|e,n,void 0,r===void 0?null:r)}function rc(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if(Ve!==null){var o=Ve.memoizedState;if(i=o.destroy,r!==null&&Wh(r,o.deps)){s.memoizedState=zo(e,n,i,r);return}}Te.flags|=t,s.memoizedState=zo(1|e,n,i,r)}function Kp(t,e){return ol(8390656,8,t,e)}function Yh(t,e){return rc(2048,8,t,e)}function qv(t,e){return rc(4,2,t,e)}function Kv(t,e){return rc(4,4,t,e)}function Jv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qv(t,e,n){return n=n!=null?n.concat([t]):null,rc(4,4,Jv.bind(null,e,t),n)}function qh(){}function Xv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zv(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function e0(t,e,n){return cs&21?(sn(n,e)||(n=iv(),Te.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function lk(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=tu.transition;tu.transition={};try{t(!1),e()}finally{de=n,tu.transition=r}}function t0(){return Ht().memoizedState}function ck(t,e,n){var r=ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},n0(t))r0(e,n);else if(n=Mv(t,e,n,r),n!==null){var s=lt();rn(n,t,r,s),s0(n,e,r)}}function uk(t,e,n){var r=ur(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(n0(t))r0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,sn(l,o)){var c=e.interleaved;c===null?(s.next=s,$h(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Mv(t,e,s,r),n!==null&&(s=lt(),rn(n,t,r,s),s0(n,e,r))}}function n0(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function r0(t,e){ho=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jh(t,n)}}var Ll={readContext:Wt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},dk={readContext:Wt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:Kp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,Jv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ck.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:qp,useDebugValue:qh,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=qp(!1),e=t[0];return t=lk.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=dn();if(be){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Ye===null)throw Error(E(349));cs&30||Vv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Kp(Wv.bind(null,r,i,t),[t]),r.flags|=2048,zo(9,Bv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=Ye.identifierPrefix;if(be){var n=Pn,r=Tn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ak++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hk={readContext:Wt,useCallback:Xv,useContext:Wt,useEffect:Yh,useImperativeHandle:Qv,useInsertionEffect:qv,useLayoutEffect:Kv,useMemo:Zv,useReducer:nu,useRef:Yv,useState:function(){return nu(Fo)},useDebugValue:qh,useDeferredValue:function(t){var e=Ht();return e0(e,Ve.memoizedState,t)},useTransition:function(){var t=nu(Fo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Fv,useSyncExternalStore:zv,useId:t0,unstable_isNewReconciler:!1},fk={readContext:Wt,useCallback:Xv,useContext:Wt,useEffect:Yh,useImperativeHandle:Qv,useInsertionEffect:qv,useLayoutEffect:Kv,useMemo:Zv,useReducer:ru,useRef:Yv,useState:function(){return ru(Fo)},useDebugValue:qh,useDeferredValue:function(t){var e=Ht();return Ve===null?e.memoizedState=t:e0(e,Ve.memoizedState,t)},useTransition:function(){var t=ru(Fo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Fv,useSyncExternalStore:zv,useId:t0,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),s=ur(t),i=Nn(r,s);i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(rn(e,t,s,r),sl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),s=ur(t),i=Nn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(rn(e,t,s,r),sl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=ur(t),s=Nn(n,r);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,r),e!==null&&(rn(e,t,r,n),sl(e,t,r))}};function Jp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,r)||!Io(s,i):!0}function i0(t,e,n){var r=!1,s=fr,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=xt(e)?as:st.current,r=e.contextTypes,i=(r=r!=null)?ci(t,s):fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sc.enqueueReplaceState(e,e.state,null)}function hd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Fh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=xt(e)?as:st.current,s.context=ci(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sc.enqueueReplaceState(s,s.state,null),Rl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var n="",r=e;do n+=zb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pk=typeof WeakMap=="function"?WeakMap:Map;function o0(t,e,n){n=Nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Sd=r),fd(t,e)},n}function a0(t,e,n){n=Nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fd(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Pk.bind(null,t,e,n),e.then(t,t))}function Zp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function em(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nn(-1,1),e.tag=2,lr(n,e,1))),n.lanes|=1),t)}var mk=Mn.ReactCurrentOwner,yt=!1;function ot(t,e,n,r){e.child=t===null?Dv(e,null,n,r):di(e,t.child,n,r)}function tm(t,e,n,r,s){n=n.render;var i=e.ref;return ni(e,s),r=Hh(t,e,n,r,i,s),n=Gh(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(be&&n&&Ih(e),e.flags|=1,ot(t,e,r,s),e.child)}function nm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!nf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,l0(t,e,i,r,s)):(t=ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,r)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function l0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Io(i,r)&&t.ref===e.ref)if(yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,In(t,e,s)}return pd(t,e,n,r,s)}function c0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Gs,Ct),Ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Gs,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(Gs,Ct),Ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(Gs,Ct),Ct|=r;return ot(t,e,s,n),e.child}function u0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pd(t,e,n,r,s){var i=xt(n)?as:st.current;return i=ci(e,i),ni(e,s),n=Hh(t,e,n,r,i,s),r=Gh(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(be&&r&&Ih(e),e.flags|=1,ot(t,e,n,s),e.child)}function rm(t,e,n,r,s){if(xt(n)){var i=!0;Tl(e)}else i=!1;if(ni(e,s),e.stateNode===null)al(t,e),i0(e,n,r),hd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=xt(n)?as:st.current,u=ci(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Qp(e,o,r,u),Qn=!1;var f=e.memoizedState;o.state=f,Rl(e,r,o,s),c=e.memoizedState,l!==r||f!==c||wt.current||Qn?(typeof d=="function"&&(dd(e,n,d,r),c=e.memoizedState),(l=Qn||Jp(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Uv(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Qt(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=xt(n)?as:st.current,c=ci(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Qp(e,o,r,c),Qn=!1,f=e.memoizedState,o.state=f,Rl(e,r,o,s);var v=e.memoizedState;l!==h||f!==v||wt.current||Qn?(typeof p=="function"&&(dd(e,n,p,r),v=e.memoizedState),(u=Qn||Jp(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return md(t,e,n,r,i,s)}function md(t,e,n,r,s,i){u0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vp(e,n,!1),In(t,e,i);r=e.stateNode,mk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=di(e,t.child,null,i),e.child=di(e,null,l,i)):ot(t,e,l,i),e.memoizedState=r.state,s&&Vp(e,n,!0),e.child}function d0(t){var e=t.stateNode;e.pendingContext?zp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zp(t,e.context,!1),zh(t,e.containerInfo)}function sm(t,e,n,r,s){return ui(),Lh(s),e.flags|=256,ot(t,e,n,r),e.child}var gd={dehydrated:null,treeContext:null,retryLane:0};function yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function h0(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(je,s&1),t===null)return cd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ac(o,r,0,null),t=rs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=yd(n),e.memoizedState=gd,t):Kh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gk(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=dr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=dr(l,i):(i=rs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?yd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=gd,r}return i=t.child,t=i.sibling,r=dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kh(t,e){return e=ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&Lh(r),di(e,t.child,null,n),t=Kh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=su(Error(E(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ac({mode:"visible",children:r.children},s,0,null),i=rs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&di(e,t.child,null,o),e.child.memoizedState=yd(o),e.memoizedState=gd,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(E(419)),r=su(i,r,void 0),La(t,e,o,r)}if(l=(o&t.childLanes)!==0,yt||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rn(t,s),rn(r,t,s,-1))}return tf(),r=su(Error(E(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Nk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=ar(s.nextSibling),Pt=e,be=!0,en=null,t!==null&&(Ut[$t++]=Tn,Ut[$t++]=Pn,Ut[$t++]=ls,Tn=t.id,Pn=t.overflow,ls=e),e=Kh(e,r.children),e.flags|=4096,e)}function im(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ud(t.return,e,n)}function iu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function f0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ot(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&im(t,n,e);else if(t.tag===19)im(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),iu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}iu(e,!0,n,null,i);break;case"together":iu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yk(t,e,n){switch(e.tag){case 3:d0(e),ui();break;case 5:$v(e);break;case 1:xt(e.type)&&Tl(e);break;case 4:zh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(El,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?h0(t,e,n):(me(je,je.current&1),t=In(t,e,n),t!==null?t.sibling:null);me(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return f0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,c0(t,e,n)}return In(t,e,n)}var p0,vd,m0,g0;p0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vd=function(){};m0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xr(mn.current);var i=null;switch(n){case"input":s=Fu(t,s),r=Fu(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=Bu(t,s),r=Bu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}Hu(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Co.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Co.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&we("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};g0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yi(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vk(t,e,n){var r=e.pendingProps;switch(Oh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return xt(e.type)&&Cl(),tt(e),null;case 3:return r=e.stateNode,hi(),xe(wt),xe(st),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(Cd(en),en=null))),vd(t,e),tt(e),null;case 5:Vh(e);var s=Xr(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)m0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return tt(e),null}if(t=Xr(mn.current),Ia(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hn]=e,r[Do]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<no.length;s++)we(no[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":pp(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":gp(r,i),we("invalid",r)}Hu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",""+l]):Co.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":_a(r),mp(r,i,!0);break;case"textarea":_a(r),yp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hn]=e,t[Do]=r,p0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gu(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<no.length;s++)we(no[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":pp(t,r),s=Fu(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),we("invalid",t);break;case"textarea":gp(t,r),s=Bu(t,r),we("invalid",t);break;default:s=r}Hu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Yy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Hy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&To(t,c):typeof c=="number"&&To(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",t):c!=null&&wh(t,i,c,o))}switch(n){case"input":_a(t),mp(t,r,!1);break;case"textarea":_a(t),yp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)g0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Xr(Uo.current),Xr(mn.current),Ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(i=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ra(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return tt(e),null;case 13:if(xe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Tt!==null&&e.mode&1&&!(e.flags&128))Ov(),ui(),e.flags|=98560,i=!1;else if(i=Ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[hn]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),i=!1}else en!==null&&(Cd(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Be===0&&(Be=3):tf())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return hi(),vd(t,e),t===null&&Oo(e.stateNode.containerInfo),tt(e),null;case 10:return Uh(e.type._context),tt(e),null;case 17:return xt(e.type)&&Cl(),tt(e),null;case 19:if(xe(je),i=e.memoizedState,i===null)return tt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yi(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,Yi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ie()>pi&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return tt(e),null}else 2*Ie()-i.renderingStartTime>pi&&n!==1073741824&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ie(),e.sibling=null,n=je.current,me(je,r?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return ef(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function wk(t,e){switch(Oh(e),e.tag){case 1:return xt(e.type)&&Cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),xe(wt),xe(st),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vh(e),null;case 13:if(xe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(je),null;case 4:return hi(),null;case 10:return Uh(e.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Da=!1,nt=!1,xk=typeof WeakSet=="function"?WeakSet:Set,U=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function wd(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var om=!1;function bk(t,e){if(nd=kl,t=bv(),Rh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:t,selectionRange:n},kl=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,k=v.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Qt(e.type,x),k);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(S){Ae(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return v=om,om=!1,v}function fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&wd(e,n,i)}s=s.next}while(s!==r)}}function ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y0(t){var e=t.alternate;e!==null&&(t.alternate=null,y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[Do],delete e[od],delete e[rk],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v0(t){return t.tag===5||t.tag===3||t.tag===4}function am(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(bd(t,e,n),t=t.sibling;t!==null;)bd(t,e,n),t=t.sibling}function kd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kd(t,e,n),t=t.sibling;t!==null;)kd(t,e,n),t=t.sibling}var Ke=null,Xt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)w0(t,e,n),n=n.sibling}function w0(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ql,n)}catch{}switch(n.tag){case 5:nt||Hs(n,e);case 6:var r=Ke,s=Xt;Ke=null,Gn(t,e,n),Ke=r,Xt=s,Ke!==null&&(Xt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Xt?(t=Ke,n=n.stateNode,t.nodeType===8?Xc(t.parentNode,n):t.nodeType===1&&Xc(t,n),Ao(t)):Xc(Ke,n.stateNode));break;case 4:r=Ke,s=Xt,Ke=n.stateNode.containerInfo,Xt=!0,Gn(t,e,n),Ke=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wd(n,e,o),s=s.next}while(s!==r)}Gn(t,e,n);break;case 1:if(!nt&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,Gn(t,e,n),nt=r):Gn(t,e,n);break;default:Gn(t,e,n)}}function lm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xk),e.forEach(function(r){var s=Ek.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,Xt=!1;break e;case 3:Ke=l.stateNode.containerInfo,Xt=!0;break e;case 4:Ke=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Ke===null)throw Error(E(160));w0(i,o,s),Ke=null,Xt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ae(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x0(e,t),e=e.sibling}function x0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),cn(t),r&4){try{fo(3,t,t.return),ic(3,t)}catch(x){Ae(t,t.return,x)}try{fo(5,t,t.return)}catch(x){Ae(t,t.return,x)}}break;case 1:qt(e,t),cn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(qt(e,t),cn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var s=t.stateNode;try{To(s,"")}catch(x){Ae(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vy(s,i),Gu(l,o);var u=Gu(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Yy(s,h):d==="dangerouslySetInnerHTML"?Hy(s,h):d==="children"?To(s,h):wh(s,d,h,u)}switch(l){case"input":zu(s,i);break;case"textarea":By(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Xs(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Xs(s,!!i.multiple,i.defaultValue,!0):Xs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Do]=i}catch(x){Ae(t,t.return,x)}}break;case 6:if(qt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Ae(t,t.return,x)}}break;case 3:if(qt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(x){Ae(t,t.return,x)}break;case 4:qt(e,t),cn(t);break;case 13:qt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xh=Ie())),r&4&&lm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(u=nt)||d,qt(e,t),nt=u):qt(e,t),cn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(f=U,p=f.child,f.tag){case 0:case 11:case 14:case 15:fo(4,f,f.return);break;case 1:Hs(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Ae(r,n,x)}}break;case 5:Hs(f,f.return);break;case 22:if(f.memoizedState!==null){um(h);continue}}p!==null?(p.return=f,U=p):um(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Gy("display",o))}catch(x){Ae(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Ae(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qt(e,t),cn(t),r&4&&lm(t);break;case 21:break;default:qt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v0(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(To(s,""),r.flags&=-33);var i=am(t);kd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=am(t);bd(t,l,o);break;default:throw Error(E(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kk(t,e,n){U=t,b0(t)}function b0(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var s=U,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Da;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nt;l=Da;var u=nt;if(Da=o,(nt=c)&&!u)for(U=s;U!==null;)o=U,c=o.child,o.tag===22&&o.memoizedState!==null?dm(s):c!==null?(c.return=o,U=c):dm(s);for(;i!==null;)U=i,b0(i),i=i.sibling;U=s,Da=l,nt=u}cm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,U=i):cm(t)}}function cm(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ao(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}nt||e.flags&512&&xd(e)}catch(f){Ae(e,e.return,f)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function um(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function dm(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ic(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{xd(e)}catch(c){Ae(e,i,c)}break;case 5:var o=e.return;try{xd(e)}catch(c){Ae(e,o,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){U=null;break}var l=e.sibling;if(l!==null){l.return=e.return,U=l;break}U=e.return}}var Sk=Math.ceil,Dl=Mn.ReactCurrentDispatcher,Jh=Mn.ReactCurrentOwner,zt=Mn.ReactCurrentBatchConfig,oe=0,Ye=null,Me=null,Qe=0,Ct=0,Gs=yr(0),Be=0,Vo=null,us=0,oc=0,Qh=0,po=null,mt=null,Xh=0,pi=1/0,Sn=null,Ml=!1,Sd=null,cr=null,Ma=!1,nr=null,Ul=0,mo=0,_d=null,ll=-1,cl=0;function lt(){return oe&6?Ie():ll!==-1?ll:ll=Ie()}function ur(t){return t.mode&1?oe&2&&Qe!==0?Qe&-Qe:ok.transition!==null?(cl===0&&(cl=iv()),cl):(t=de,t!==0||(t=window.event,t=t===void 0?16:hv(t.type)),t):1}function rn(t,e,n,r){if(50<mo)throw mo=0,_d=null,Error(E(185));Zo(t,n,r),(!(oe&2)||t!==Ye)&&(t===Ye&&(!(oe&2)&&(oc|=n),Be===4&&Zn(t,Qe)),bt(t,r),n===1&&oe===0&&!(e.mode&1)&&(pi=Ie()+500,nc&&vr()))}function bt(t,e){var n=t.callbackNode;o1(t,e);var r=bl(t,t===Ye?Qe:0);if(r===0)n!==null&&xp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xp(n),e===1)t.tag===0?ik(hm.bind(null,t)):Av(hm.bind(null,t)),tk(function(){!(oe&6)&&vr()}),n=null;else{switch(ov(r)){case 1:n=_h;break;case 4:n=rv;break;case 16:n=xl;break;case 536870912:n=sv;break;default:n=xl}n=N0(n,k0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k0(t,e){if(ll=-1,cl=0,oe&6)throw Error(E(327));var n=t.callbackNode;if(ri()&&t.callbackNode!==n)return null;var r=bl(t,t===Ye?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$l(t,r);else{e=r;var s=oe;oe|=2;var i=_0();(Ye!==t||Qe!==e)&&(Sn=null,pi=Ie()+500,ns(t,e));do try{Ck();break}catch(l){S0(t,l)}while(1);Mh(),Dl.current=i,oe=s,Me!==null?e=0:(Ye=null,Qe=0,e=Be)}if(e!==0){if(e===2&&(s=Qu(t),s!==0&&(r=s,e=jd(t,s))),e===1)throw n=Vo,ns(t,0),Zn(t,r),bt(t,Ie()),n;if(e===6)Zn(t,r);else{if(s=t.current.alternate,!(r&30)&&!_k(s)&&(e=$l(t,r),e===2&&(i=Qu(t),i!==0&&(r=i,e=jd(t,i))),e===1))throw n=Vo,ns(t,0),Zn(t,r),bt(t,Ie()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Vr(t,mt,Sn);break;case 3:if(Zn(t,r),(r&130023424)===r&&(e=Xh+500-Ie(),10<e)){if(bl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=id(Vr.bind(null,t,mt,Sn),e);break}Vr(t,mt,Sn);break;case 4:if(Zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sk(r/1960))-r,10<r){t.timeoutHandle=id(Vr.bind(null,t,mt,Sn),r);break}Vr(t,mt,Sn);break;case 5:Vr(t,mt,Sn);break;default:throw Error(E(329))}}}return bt(t,Ie()),t.callbackNode===n?k0.bind(null,t):null}function jd(t,e){var n=po;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=$l(t,e),t!==2&&(e=mt,mt=n,e!==null&&Cd(e)),t}function Cd(t){mt===null?mt=t:mt.push.apply(mt,t)}function _k(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zn(t,e){for(e&=~Qh,e&=~oc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function hm(t){if(oe&6)throw Error(E(327));ri();var e=bl(t,0);if(!(e&1))return bt(t,Ie()),null;var n=$l(t,e);if(t.tag!==0&&n===2){var r=Qu(t);r!==0&&(e=r,n=jd(t,r))}if(n===1)throw n=Vo,ns(t,0),Zn(t,e),bt(t,Ie()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,mt,Sn),bt(t,Ie()),null}function Zh(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(pi=Ie()+500,nc&&vr())}}function ds(t){nr!==null&&nr.tag===0&&!(oe&6)&&ri();var e=oe;oe|=1;var n=zt.transition,r=de;try{if(zt.transition=null,de=1,t)return t()}finally{de=r,zt.transition=n,oe=e,!(oe&6)&&vr()}}function ef(){Ct=Gs.current,xe(Gs)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ek(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Oh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cl();break;case 3:hi(),xe(wt),xe(st),Bh();break;case 5:Vh(r);break;case 4:hi();break;case 13:xe(je);break;case 19:xe(je);break;case 10:Uh(r.type._context);break;case 22:case 23:ef()}n=n.return}if(Ye=t,Me=t=dr(t.current,null),Qe=Ct=e,Be=0,Vo=null,Qh=oc=us=0,mt=po=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return t}function S0(t,e){do{var n=Me;try{if(Mh(),il.current=Ll,Ol){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ol=!1}if(cs=0,Ge=Ve=Te=null,ho=!1,$o=0,Jh.current=null,n===null||n.return===null){Be=1,Vo=e,Me=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Qe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Zp(o);if(p!==null){p.flags&=-257,em(p,o,l,i,e),p.mode&1&&Xp(i,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){Xp(i,u,e),tf();break e}c=Error(E(426))}}else if(be&&l.mode&1){var k=Zp(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),em(k,o,l,i,e),Lh(fi(c,l));break e}}i=c=fi(c,l),Be!==4&&(Be=2),po===null?po=[i]:po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=o0(i,c,e);Gp(i,g);break e;case 1:l=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cr===null||!cr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=a0(i,l,e);Gp(i,S);break e}}i=i.return}while(i!==null)}C0(n)}catch(T){e=T,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function _0(){var t=Dl.current;return Dl.current=Ll,t===null?Ll:t}function tf(){(Be===0||Be===3||Be===2)&&(Be=4),Ye===null||!(us&268435455)&&!(oc&268435455)||Zn(Ye,Qe)}function $l(t,e){var n=oe;oe|=2;var r=_0();(Ye!==t||Qe!==e)&&(Sn=null,ns(t,e));do try{jk();break}catch(s){S0(t,s)}while(1);if(Mh(),oe=n,Dl.current=r,Me!==null)throw Error(E(261));return Ye=null,Qe=0,Be}function jk(){for(;Me!==null;)j0(Me)}function Ck(){for(;Me!==null&&!Qb();)j0(Me)}function j0(t){var e=P0(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?C0(t):Me=e,Jh.current=null}function C0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wk(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Me=null;return}}else if(n=vk(n,e,Ct),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Be===0&&(Be=5)}function Vr(t,e,n){var r=de,s=zt.transition;try{zt.transition=null,de=1,Tk(t,e,n,r)}finally{zt.transition=s,de=r}return null}function Tk(t,e,n,r){do ri();while(nr!==null);if(oe&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(a1(t,i),t===Ye&&(Me=Ye=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ma||(Ma=!0,N0(xl,function(){return ri(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var o=de;de=1;var l=oe;oe|=4,Jh.current=null,bk(t,n),x0(n,t),Y1(rd),kl=!!nd,rd=nd=null,t.current=n,kk(n),Xb(),oe=l,de=o,zt.transition=i}else t.current=n;if(Ma&&(Ma=!1,nr=t,Ul=s),i=t.pendingLanes,i===0&&(cr=null),t1(n.stateNode),bt(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,t=Sd,Sd=null,t;return Ul&1&&t.tag!==0&&ri(),i=t.pendingLanes,i&1?t===_d?mo++:(mo=0,_d=t):mo=0,vr(),null}function ri(){if(nr!==null){var t=ov(Ul),e=zt.transition,n=de;try{if(zt.transition=null,de=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,Ul=0,oe&6)throw Error(E(331));var s=oe;for(oe|=4,U=t.current;U!==null;){var i=U,o=i.child;if(U.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(U=u;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:fo(8,d,i)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var f=d.sibling,p=d.return;if(y0(d),d===u){U=null;break}if(f!==null){f.return=p,U=f;break}U=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}U=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,U=o;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,U=g;break e}U=i.return}}var m=t.current;for(U=m;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=m;U!==null;){if(l=U,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ic(9,l)}}catch(T){Ae(l,l.return,T)}if(l===o){U=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,U=S;break e}U=l.return}}if(oe=s,vr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ql,t)}catch{}r=!0}return r}finally{de=n,zt.transition=e}}return!1}function fm(t,e,n){e=fi(n,e),e=o0(t,e,1),t=lr(t,e,1),e=lt(),t!==null&&(Zo(t,1,e),bt(t,e))}function Ae(t,e,n){if(t.tag===3)fm(t,t,n);else for(;e!==null;){if(e.tag===3){fm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=fi(n,t),t=a0(e,t,1),e=lr(e,t,1),t=lt(),e!==null&&(Zo(e,1,t),bt(e,t));break}}e=e.return}}function Pk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(Qe&n)===n&&(Be===4||Be===3&&(Qe&130023424)===Qe&&500>Ie()-Xh?ns(t,0):Qh|=n),bt(t,e)}function T0(t,e){e===0&&(t.mode&1?(e=Ta,Ta<<=1,!(Ta&130023424)&&(Ta=4194304)):e=1);var n=lt();t=Rn(t,e),t!==null&&(Zo(t,e,n),bt(t,n))}function Nk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),T0(t,n)}function Ek(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),T0(t,n)}var P0;P0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,yk(t,e,n);yt=!!(t.flags&131072)}else yt=!1,be&&e.flags&1048576&&Rv(e,Nl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var s=ci(e,st.current);ni(e,n),s=Hh(null,e,r,t,s,n);var i=Gh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,Tl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fh(e),s.updater=sc,e.stateNode=s,s._reactInternals=e,hd(e,r,t,n),e=md(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Ih(e),ot(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Rk(r),t=Qt(r,t),s){case 0:e=pd(null,e,r,t,n);break e;case 1:e=rm(null,e,r,t,n);break e;case 11:e=tm(null,e,r,t,n);break e;case 14:e=nm(null,e,r,Qt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),pd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),rm(t,e,r,s,n);case 3:e:{if(d0(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Uv(t,e),Rl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fi(Error(E(423)),e),e=sm(t,e,r,n,s);break e}else if(r!==s){s=fi(Error(E(424)),e),e=sm(t,e,r,n,s);break e}else for(Tt=ar(e.stateNode.containerInfo.firstChild),Pt=e,be=!0,en=null,n=Dv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ui(),r===s){e=In(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return $v(e),t===null&&cd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,sd(r,s)?o=null:i!==null&&sd(r,i)&&(e.flags|=32),u0(t,e),ot(t,e,o,n),e.child;case 6:return t===null&&cd(e),null;case 13:return h0(t,e,n);case 4:return zh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=di(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),tm(t,e,r,s,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,me(El,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!wt.current){e=In(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Nn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ud(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ud(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ot(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ni(e,n),s=Wt(s),r=r(s),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,s=Qt(r,e.pendingProps),s=Qt(r.type,s),nm(t,e,r,s,n);case 15:return l0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),al(t,e),e.tag=1,xt(r)?(t=!0,Tl(e)):t=!1,ni(e,n),i0(e,r,s),hd(e,r,s,n),md(null,e,r,!0,t,n);case 19:return f0(t,e,n);case 22:return c0(t,e,n)}throw Error(E(156,e.tag))};function N0(t,e){return nv(t,e)}function Ak(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new Ak(t,e,n,r)}function nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rk(t){if(typeof t=="function")return nf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bh)return 11;if(t===kh)return 14}return 2}function dr(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")nf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ds:return rs(n.children,s,i,e);case xh:o=8,s|=8;break;case Du:return t=Ft(12,n,e,s|2),t.elementType=Du,t.lanes=i,t;case Mu:return t=Ft(13,n,e,s),t.elementType=Mu,t.lanes=i,t;case Uu:return t=Ft(19,n,e,s),t.elementType=Uu,t.lanes=i,t;case $y:return ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case My:o=10;break e;case Uy:o=9;break e;case bh:o=11;break e;case kh:o=14;break e;case Jn:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rs(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function ac(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=$y,t.lanes=n,t.stateNode={isHidden:!1},t}function ou(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function au(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ik(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rf(t,e,n,r,s,i,o,l,c){return t=new Ik(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(i),t}function Ok(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ls,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E0(t){if(!t)return fr;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(xt(n))return Ev(t,n,e)}return e}function A0(t,e,n,r,s,i,o,l,c){return t=rf(n,r,!0,t,s,i,o,l,c),t.context=E0(null),n=t.current,r=lt(),s=ur(n),i=Nn(r,s),i.callback=e??null,lr(n,i,s),t.current.lanes=s,Zo(t,s,r),bt(t,r),t}function lc(t,e,n,r){var s=e.current,i=lt(),o=ur(s);return n=E0(n),e.context===null?e.context=n:e.pendingContext=n,e=Nn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lr(s,e,o),t!==null&&(rn(t,s,o,i),sl(t,s,o)),o}function Fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sf(t,e){pm(t,e),(t=t.alternate)&&pm(t,e)}function Lk(){return null}var R0=typeof reportError=="function"?reportError:function(t){console.error(t)};function of(t){this._internalRoot=t}cc.prototype.render=of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));lc(t,e,null,null)};cc.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ds(function(){lc(null,t,null,null)}),e[An]=null}};function cc(t){this._internalRoot=t}cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=cv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&dv(t)}};function af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mm(){}function Dk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fl(o);i.call(u)}}var o=A0(e,r,t,0,null,!1,!1,"",mm);return t._reactRootContainer=o,t[An]=o.current,Oo(t.nodeType===8?t.parentNode:t),ds(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fl(c);l.call(u)}}var c=rf(t,0,!1,null,null,!1,!1,"",mm);return t._reactRootContainer=c,t[An]=c.current,Oo(t.nodeType===8?t.parentNode:t),ds(function(){lc(e,c,n,r)}),c}function dc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Fl(o);l.call(c)}}lc(e,o,t,s)}else o=Dk(n,e,t,s,r);return Fl(o)}av=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(jh(e,n|1),bt(e,Ie()),!(oe&6)&&(pi=Ie()+500,vr()))}break;case 13:ds(function(){var r=Rn(t,1);if(r!==null){var s=lt();rn(r,t,1,s)}}),sf(t,1)}};Ch=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=lt();rn(e,t,134217728,n)}sf(t,134217728)}};lv=function(t){if(t.tag===13){var e=ur(t),n=Rn(t,e);if(n!==null){var r=lt();rn(n,t,e,r)}sf(t,e)}};cv=function(){return de};uv=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};qu=function(t,e,n){switch(e){case"input":if(zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tc(r);if(!s)throw Error(E(90));zy(r),zu(r,s)}}}break;case"textarea":By(t,n);break;case"select":e=n.value,e!=null&&Xs(t,!!n.multiple,e,!1)}};Jy=Zh;Qy=ds;var Mk={usingClientEntryPoint:!1,Events:[ta,Fs,tc,qy,Ky,Zh]},qi={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uk={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ev(t),t===null?null:t.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||Lk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ua.isDisabled&&Ua.supportsFiber)try{Ql=Ua.inject(Uk),pn=Ua}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mk;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(e))throw Error(E(200));return Ok(t,e,null,n)};Et.createRoot=function(t,e){if(!af(t))throw Error(E(299));var n=!1,r="",s=R0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rf(t,1,!1,null,null,n,!1,r,s),t[An]=e.current,Oo(t.nodeType===8?t.parentNode:t),new of(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=ev(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return ds(t)};Et.hydrate=function(t,e,n){if(!uc(e))throw Error(E(200));return dc(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!af(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=R0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A0(e,null,t,1,n??null,s,!1,i,o),t[An]=e.current,Oo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cc(e)};Et.render=function(t,e,n){if(!uc(e))throw Error(E(200));return dc(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!uc(t))throw Error(E(40));return t._reactRootContainer?(ds(function(){dc(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};Et.unstable_batchedUpdates=Zh;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uc(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return dc(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function I0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I0)}catch(t){console.error(t)}}I0(),Iy.exports=Et;var $k=Iy.exports,gm=$k;Ou.createRoot=gm.createRoot,Ou.hydrateRoot=gm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bo(){return Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bo.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const ym="popstate";function Fk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Td("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:L0(s)}return Vk(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function O0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zk(){return Math.random().toString(36).substr(2,8)}function vm(t,e){return{usr:t.state,key:t.key,idx:e}}function Td(t,e,n,r){return n===void 0&&(n=null),Bo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ki(e):e,{state:n,key:e&&e.key||r||zk()})}function L0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Vk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=rr.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Bo({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=rr.Pop;let k=d(),g=k==null?null:k-u;u=k,c&&c({action:l,location:x.location,delta:g})}function f(k,g){l=rr.Push;let m=Td(x.location,k,g);n&&n(m,k),u=d()+1;let y=vm(m,u),S=x.createHref(m);try{o.pushState(y,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(S)}i&&c&&c({action:l,location:x.location,delta:1})}function p(k,g){l=rr.Replace;let m=Td(x.location,k,g);n&&n(m,k),u=d();let y=vm(m,u),S=x.createHref(m);o.replaceState(y,"",S),i&&c&&c({action:l,location:x.location,delta:0})}function v(k){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof k=="string"?k:L0(k);return m=m.replace(/ $/,"%20"),Ue(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let x={get action(){return l},get location(){return t(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ym,h),c=k,()=>{s.removeEventListener(ym,h),c=null}},createHref(k){return e(s,k)},createURL:v,encodeLocation(k){let g=v(k);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(k){return o.go(k)}};return x}var wm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wm||(wm={}));function Bk(t,e,n){return n===void 0&&(n="/"),Wk(t,e,n,!1)}function Wk(t,e,n,r){let s=typeof e=="string"?ki(e):e,i=U0(s.pathname||"/",n);if(i==null)return null;let o=D0(t);Hk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=nS(i);l=eS(o[c],u,r)}return l}function D0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=ss([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),D0(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Xk(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of M0(i.path))s(i,o,c)}),e}function M0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=M0(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Hk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Zk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Gk=/^:[\w-]+$/,Yk=3,qk=2,Kk=1,Jk=10,Qk=-2,xm=t=>t==="*";function Xk(t,e){let n=t.split("/"),r=n.length;return n.some(xm)&&(r+=Qk),e&&(r+=qk),n.filter(s=>!xm(s)).reduce((s,i)=>s+(Gk.test(i)?Yk:i===""?Kk:Jk),r)}function Zk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eS(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ss([i,h.pathname]),pathnameBase:oS(ss([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ss([i,h.pathnameBase]))}return o}function bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function tS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),O0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return O0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function rS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ki(t):t;return{pathname:n?n.startsWith("/")?n:sS(n,e):e,search:aS(r),hash:lS(s)}}function sS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $0(t,e){let n=iS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function F0(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ki(t):(s=Bo({},t),Ue(!s.pathname||!s.pathname.includes("?"),lu("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),lu("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),lu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=rS(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ss=t=>t.join("/").replace(/\/\/+/g,"/"),oS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const z0=["post","put","patch","delete"];new Set(z0);const uS=["get",...z0];new Set(uS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wo.apply(this,arguments)}const lf=w.createContext(null),dS=w.createContext(null),ra=w.createContext(null),hc=w.createContext(null),ps=w.createContext({outlet:null,matches:[],isDataRoute:!1}),V0=w.createContext(null);function sa(){return w.useContext(hc)!=null}function fc(){return sa()||Ue(!1),w.useContext(hc).location}function B0(t){w.useContext(ra).static||w.useLayoutEffect(t)}function ms(){let{isDataRoute:t}=w.useContext(ps);return t?_S():hS()}function hS(){sa()||Ue(!1);let t=w.useContext(lf),{basename:e,future:n,navigator:r}=w.useContext(ra),{matches:s}=w.useContext(ps),{pathname:i}=fc(),o=JSON.stringify($0(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return B0(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=F0(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ss([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function fS(t,e){return pS(t,e)}function pS(t,e,n,r){sa()||Ue(!1);let{navigator:s}=w.useContext(ra),{matches:i}=w.useContext(ps),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=fc(),d;if(e){var h;let k=typeof e=="string"?ki(e):e;c==="/"||(h=k.pathname)!=null&&h.startsWith(c)||Ue(!1),d=k}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let k=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=Bk(t,{pathname:p}),x=wS(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ss([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:ss([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&x?w.createElement(hc.Provider,{value:{location:Wo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:rr.Pop}},x):x}function mS(){let t=SS(),e=cS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,i)}const gS=w.createElement(mS,null);class yS extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(ps.Provider,{value:this.props.routeContext},w.createElement(V0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vS(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(lf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ps.Provider,{value:e},r)}function wS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ue(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,v=!1,x=null,k=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||gS,c&&(u<0&&f===0?(jS("route-fallback",!1),v=!0,k=null):u===f&&(v=!0,k=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),m=()=>{let y;return p?y=x:v?y=k:h.route.Component?y=w.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,w.createElement(vS,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(yS,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var W0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(W0||{}),zl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zl||{});function xS(t){let e=w.useContext(lf);return e||Ue(!1),e}function bS(t){let e=w.useContext(dS);return e||Ue(!1),e}function kS(t){let e=w.useContext(ps);return e||Ue(!1),e}function H0(t){let e=kS(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function SS(){var t;let e=w.useContext(V0),n=bS(zl.UseRouteError),r=H0(zl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _S(){let{router:t}=xS(W0.UseNavigateStable),e=H0(zl.UseNavigateStable),n=w.useRef(!1);return B0(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wo({fromRouteId:e},i)))},[t,e])}const km={};function jS(t,e,n){!e&&!km[t]&&(km[t]=!0)}function CS(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function TS(t){let{to:e,replace:n,state:r,relative:s}=t;sa()||Ue(!1);let{future:i,static:o}=w.useContext(ra),{matches:l}=w.useContext(ps),{pathname:c}=fc(),u=ms(),d=F0(e,$0(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function bn(t){Ue(!1)}function PS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=rr.Pop,navigator:i,static:o=!1,future:l}=t;sa()&&Ue(!1);let c=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Wo({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=ki(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:v="default"}=r,x=w.useMemo(()=>{let k=U0(d,c);return k==null?null:{location:{pathname:k,search:h,hash:f,state:p,key:v},navigationType:s}},[c,d,h,f,p,v,s]);return x==null?null:w.createElement(ra.Provider,{value:u},w.createElement(hc.Provider,{children:n,value:x}))}function NS(t){let{children:e,location:n}=t;return fS(Pd(e),n)}new Promise(()=>{});function Pd(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let i=[...e,s];if(r.type===w.Fragment){n.push.apply(n,Pd(r.props.children,i));return}r.type!==bn&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Pd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ES="6";try{window.__reactRouterVersion=ES}catch{}const AS="startTransition",Sm=Pb[AS];function RS(t){let{basename:e,children:n,future:r,window:s}=t,i=w.useRef();i.current==null&&(i.current=Fk({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=w.useCallback(h=>{u&&Sm?Sm(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>CS(r),[r]),w.createElement(PS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var _m;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_m||(_m={}));var jm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jm||(jm={}));var IS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const OS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LS=(t,e)=>{const n=w.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>w.createElement("svg",{ref:u,...IS,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${OS(t)}`,...c},[...e.map(([d,h])=>w.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var K=LS;const DS=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ia=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cm=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),MS=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Nd=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),US=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$S=K("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Tm=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),FS=K("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),zS=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),VS=K("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),BS=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),WS=K("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),HS=K("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]),G0=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),GS=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),YS=K("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ro=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),qS=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),KS=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),si=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ii=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),JS=K("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Y0=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),QS=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),XS=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ZS=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),e_=K("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Pm=K("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),t_=K("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Nm=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),n_=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),r_=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pc=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),s_=K("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Ed=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),q0=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),i_=K("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Em=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),o_=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),a_=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),tn=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),cf=w.createContext({});function uf(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const df=typeof window<"u",K0=df?w.useLayoutEffect:w.useEffect,mc=w.createContext(null);function hf(t,e){t.indexOf(e)===-1&&t.push(e)}function ff(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const On=(t,e,n)=>n>e?e:n<t?t:n;let pf=()=>{};const Ln={},J0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Q0(t){return typeof t=="object"&&t!==null}const X0=t=>/^0[^.\s]+$/u.test(t);function mf(t){let e;return()=>(e===void 0&&(e=t()),e)}const Vt=t=>t,l_=(t,e)=>n=>e(t(n)),oa=(...t)=>t.reduce(l_),Ho=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class gf{constructor(){this.subscriptions=[]}add(e){return hf(this.subscriptions,e),()=>ff(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gn=t=>t*1e3,yn=t=>t/1e3;function Z0(t,e){return e?t*(1e3/e):0}const ew=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,c_=1e-7,u_=12;function d_(t,e,n,r,s){let i,o,l=0;do o=e+(n-e)/2,i=ew(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>c_&&++l<u_);return o}function aa(t,e,n,r){if(t===e&&n===r)return Vt;const s=i=>d_(i,0,1,t,n);return i=>i===0||i===1?i:ew(s(i),e,r)}const tw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nw=t=>e=>1-t(1-e),rw=aa(.33,1.53,.69,.99),yf=nw(rw),sw=tw(yf),iw=t=>(t*=2)<1?.5*yf(t):.5*(2-Math.pow(2,-10*(t-1))),vf=t=>1-Math.sin(Math.acos(t)),ow=nw(vf),aw=tw(vf),h_=aa(.42,0,1,1),f_=aa(0,0,.58,1),lw=aa(.42,0,.58,1),p_=t=>Array.isArray(t)&&typeof t[0]!="number",cw=t=>Array.isArray(t)&&typeof t[0]=="number",m_={linear:Vt,easeIn:h_,easeInOut:lw,easeOut:f_,circIn:vf,circInOut:aw,circOut:ow,backIn:yf,backInOut:sw,backOut:rw,anticipate:iw},g_=t=>typeof t=="string",Am=t=>{if(cw(t)){pf(t.length===4);const[e,n,r,s]=t;return aa(e,n,r,s)}else if(g_(t))return m_[t];return t},$a=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Rm={value:null,addProjectionMetrics:null};function y_(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,p=!1)=>{const x=p&&s?n:r;return f&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&Rm.value&&Rm.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const v_=40;function uw(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=$a.reduce((y,S)=>(y[S]=y_(i,e?S:void 0),y),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:v}=o,x=()=>{const y=Ln.useManualTiming?s.timestamp:performance.now();n=!1,Ln.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,v_),1)),s.timestamp=y,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),v.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(x))},k=()=>{n=!0,r=!0,s.isProcessing||t(x)};return{schedule:$a.reduce((y,S)=>{const T=o[S];return y[S]=(C,P=!1,j=!1)=>(n||k(),T.schedule(C,P,j)),y},{}),cancel:y=>{for(let S=0;S<$a.length;S++)o[$a[S]].cancel(y)},state:s,steps:o}}const{schedule:ke,cancel:pr,state:Je,steps:cu}=uw(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vt,!0);let dl;function w_(){dl=void 0}const vt={now:()=>(dl===void 0&&vt.set(Je.isProcessing||Ln.useManualTiming?Je.timestamp:performance.now()),dl),set:t=>{dl=t,queueMicrotask(w_)}},dw=t=>e=>typeof e=="string"&&e.startsWith(t),wf=dw("--"),x_=dw("var(--"),xf=t=>x_(t)?b_.test(t.split("/*")[0].trim()):!1,b_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Si={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Go={...Si,transform:t=>On(0,1,t)},Fa={...Si,default:1},go=t=>Math.round(t*1e5)/1e5,bf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function k_(t){return t==null}const S_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kf=(t,e)=>n=>!!(typeof n=="string"&&S_.test(n)&&n.startsWith(t)||e&&!k_(n)&&Object.prototype.hasOwnProperty.call(n,e)),hw=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,l]=r.match(bf);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},__=t=>On(0,255,t),uu={...Si,transform:t=>Math.round(__(t))},Zr={test:kf("rgb","red"),parse:hw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+uu.transform(t)+", "+uu.transform(e)+", "+uu.transform(n)+", "+go(Go.transform(r))+")"};function j_(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ad={test:kf("#"),parse:j_,transform:Zr.transform},la=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qn=la("deg"),vn=la("%"),B=la("px"),C_=la("vh"),T_=la("vw"),Im=(()=>({...vn,parse:t=>vn.parse(t)/100,transform:t=>vn.transform(t*100)}))(),Ys={test:kf("hsl","hue"),parse:hw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vn.transform(go(e))+", "+vn.transform(go(n))+", "+go(Go.transform(r))+")"},De={test:t=>Zr.test(t)||Ad.test(t)||Ys.test(t),parse:t=>Zr.test(t)?Zr.parse(t):Ys.test(t)?Ys.parse(t):Ad.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zr.transform(t):Ys.transform(t),getAnimatableNone:t=>{const e=De.parse(t);return e.alpha=0,De.transform(e)}},P_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N_(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bf))==null?void 0:e.length)||0)+(((n=t.match(P_))==null?void 0:n.length)||0)>0}const fw="number",pw="color",E_="var",A_="var(",Om="${}",R_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(R_,c=>(De.test(c)?(r.color.push(i),s.push(pw),n.push(De.parse(c))):c.startsWith(A_)?(r.var.push(i),s.push(E_),n.push(c)):(r.number.push(i),s.push(fw),n.push(parseFloat(c))),++i,Om)).split(Om);return{values:n,split:l,indexes:r,types:s}}function mw(t){return Yo(t).values}function gw(t){const{split:e,types:n}=Yo(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const l=n[o];l===fw?i+=go(s[o]):l===pw?i+=De.transform(s[o]):i+=s[o]}return i}}const I_=t=>typeof t=="number"?0:De.test(t)?De.getAnimatableNone(t):t;function O_(t){const e=mw(t);return gw(t)(e.map(I_))}const mr={test:N_,parse:mw,createTransformer:gw,getAnimatableNone:O_};function du(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L_({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=du(c,l,t+1/3),i=du(c,l,t),o=du(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Vl(t,e){return n=>n>0?e:t}const Ce=(t,e,n)=>t+(e-t)*n,hu=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},D_=[Ad,Zr,Ys],M_=t=>D_.find(e=>e.test(t));function Lm(t){const e=M_(t);if(!e)return!1;let n=e.parse(t);return e===Ys&&(n=L_(n)),n}const Dm=(t,e)=>{const n=Lm(t),r=Lm(e);if(!n||!r)return Vl(t,e);const s={...n};return i=>(s.red=hu(n.red,r.red,i),s.green=hu(n.green,r.green,i),s.blue=hu(n.blue,r.blue,i),s.alpha=Ce(n.alpha,r.alpha,i),Zr.transform(s))},Rd=new Set(["none","hidden"]);function U_(t,e){return Rd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $_(t,e){return n=>Ce(t,e,n)}function Sf(t){return typeof t=="number"?$_:typeof t=="string"?xf(t)?Vl:De.test(t)?Dm:V_:Array.isArray(t)?yw:typeof t=="object"?De.test(t)?Dm:F_:Vl}function yw(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Sf(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function F_(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Sf(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function z_(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],l=t.values[o]??0;n[s]=l,r[i]++}return n}const V_=(t,e)=>{const n=mr.createTransformer(e),r=Yo(t),s=Yo(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Rd.has(t)&&!s.values.length||Rd.has(e)&&!r.values.length?U_(t,e):oa(yw(z_(r,s),s.values),n):Vl(t,e)};function vw(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ce(t,e,n):Sf(t)(t,e)}const B_=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ke.update(e,n),stop:()=>pr(e),now:()=>Je.isProcessing?Je.timestamp:vt.now()}},ww=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Bl=2e4;function _f(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Bl;)e+=n,r=t.next(e);return e>=Bl?1/0:e}function W_(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(_f(r),Bl);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:yn(s)}}const H_=5;function xw(t,e,n){const r=Math.max(e-H_,0);return Z0(n-t(r),e-r)}const Ee={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fu=.001;function G_({duration:t=Ee.duration,bounce:e=Ee.bounce,velocity:n=Ee.velocity,mass:r=Ee.mass}){let s,i,o=1-e;o=On(Ee.minDamping,Ee.maxDamping,o),t=On(Ee.minDuration,Ee.maxDuration,yn(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,p=Id(u,o),v=Math.exp(-h);return fu-f/p*v},i=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-h),x=Id(Math.pow(u,2),o);return(-s(u)+fu>0?-1:1)*((f-p)*v)/x}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-fu+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=q_(s,i,l);if(t=gn(t),isNaN(c))return{stiffness:Ee.stiffness,damping:Ee.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Y_=12;function q_(t,e,n){let r=n;for(let s=1;s<Y_;s++)r=r-t(r)/e(r);return r}function Id(t,e){return t*Math.sqrt(1-e*e)}const K_=["duration","bounce"],J_=["stiffness","damping","mass"];function Mm(t,e){return e.some(n=>t[n]!==void 0)}function Q_(t){let e={velocity:Ee.velocity,stiffness:Ee.stiffness,damping:Ee.damping,mass:Ee.mass,isResolvedFromDuration:!1,...t};if(!Mm(t,J_)&&Mm(t,K_))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*On(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ee.mass,stiffness:s,damping:i}}else{const n=G_(t);e={...e,...n,mass:Ee.mass},e.isResolvedFromDuration=!0}return e}function Wl(t=Ee.visualDuration,e=Ee.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=Q_({...n,velocity:-yn(n.velocity||0)}),v=f||0,x=u/(2*Math.sqrt(c*d)),k=o-i,g=yn(Math.sqrt(c/d)),m=Math.abs(k)<5;r||(r=m?Ee.restSpeed.granular:Ee.restSpeed.default),s||(s=m?Ee.restDelta.granular:Ee.restDelta.default);let y;if(x<1){const T=Id(g,x);y=C=>{const P=Math.exp(-x*g*C);return o-P*((v+x*g*k)/T*Math.sin(T*C)+k*Math.cos(T*C))}}else if(x===1)y=T=>o-Math.exp(-g*T)*(k+(v+g*k)*T);else{const T=g*Math.sqrt(x*x-1);y=C=>{const P=Math.exp(-x*g*C),j=Math.min(T*C,300);return o-P*((v+x*g*k)*Math.sinh(j)+T*k*Math.cosh(j))/T}}const S={calculatedDuration:p&&h||null,next:T=>{const C=y(T);if(p)l.done=T>=h;else{let P=T===0?v:0;x<1&&(P=T===0?gn(v):xw(y,T,C));const j=Math.abs(P)<=r,D=Math.abs(o-C)<=s;l.done=j&&D}return l.value=l.done?o:C,l},toString:()=>{const T=Math.min(_f(S),Bl),C=ww(P=>S.next(T*P).value,T,30);return T+"ms "+C},toTransition:()=>{}};return S}Wl.applyToOptions=t=>{const e=W_(t,100,Wl);return t.ease=e.ease,t.duration=gn(e.duration),t.type="keyframes",t};function Od({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=j=>l!==void 0&&j<l||c!==void 0&&j>c,v=j=>l===void 0?c:c===void 0||Math.abs(l-j)<Math.abs(c-j)?l:c;let x=n*e;const k=h+x,g=o===void 0?k:o(k);g!==k&&(x=g-h);const m=j=>-x*Math.exp(-j/r),y=j=>g+m(j),S=j=>{const D=m(j),I=y(j);f.done=Math.abs(D)<=u,f.value=f.done?g:I};let T,C;const P=j=>{p(f.value)&&(T=j,C=Wl({keyframes:[f.value,v(f.value)],velocity:xw(y,j,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:j=>{let D=!1;return!C&&T===void 0&&(D=!0,S(j),P(j)),T!==void 0&&j>=T?C.next(j-T):(!D&&S(j),f)}}}function X_(t,e,n){const r=[],s=n||Ln.mix||vw,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Vt:e;l=oa(c,l)}r.push(l)}return r}function Z_(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(pf(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=X_(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Ho(t[h],t[h+1],d);return l[h](f)};return n?d=>u(On(t[0],t[i-1],d)):u}function ej(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ho(0,e,r);t.push(Ce(n,1,s))}}function tj(t){const e=[0];return ej(e,t.length-1),e}function nj(t,e){return t.map(n=>n*e)}function rj(t,e){return t.map(()=>e||lw).splice(0,t.length-1)}function yo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=p_(r)?r.map(Am):Am(r),i={done:!1,value:e[0]},o=nj(n&&n.length===e.length?n:tj(e),t),l=Z_(o,e,{ease:Array.isArray(s)?s:rj(e,s)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const sj=t=>t!==null;function jf(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(sj),l=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const ij={decay:Od,inertia:Od,tween:yo,keyframes:yo,spring:Wl};function bw(t){typeof t.type=="string"&&(t.type=ij[t.type])}class Cf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const oj=t=>t/100;class Tf extends Cf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==vt.now()&&this.tick(vt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bw(e);const{type:n=yo,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=n||yo;c!==yo&&typeof l[0]!="number"&&(this.mixKeyframes=oa(oj,vw(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=_f(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:v,onUpdate:x,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-u*(this.playbackSpeed>=0?1:-1),m=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let y=this.currentTime,S=r;if(h){const j=Math.min(this.currentTime,s)/l;let D=Math.floor(j),I=j%1;!I&&j>=1&&(I=1),I===1&&D--,D=Math.min(D,h+1),!!(D%2)&&(f==="reverse"?(I=1-I,p&&(I-=p/l)):f==="mirror"&&(S=o)),y=On(0,1,I)*l}const T=m?{done:!1,value:d[0]}:S.next(y);i&&(T.value=i(T.value));let{done:C}=T;!m&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return P&&v!==Od&&(T.value=jf(d,this.options,k,this.speed)),x&&x(T.value),P&&this.finish(),T}then(e,n){return this.finished.then(e,n)}get duration(){return yn(this.calculatedDuration)}get time(){return yn(this.currentTime)}set time(e){var n;e=gn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=B_,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function aj(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const es=t=>t*180/Math.PI,Ld=t=>{const e=es(Math.atan2(t[1],t[0]));return Dd(e)},lj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ld,rotateZ:Ld,skewX:t=>es(Math.atan(t[1])),skewY:t=>es(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Dd=t=>(t=t%360,t<0&&(t+=360),t),Um=Ld,$m=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Fm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$m,scaleY:Fm,scale:t=>($m(t)+Fm(t))/2,rotateX:t=>Dd(es(Math.atan2(t[6],t[5]))),rotateY:t=>Dd(es(Math.atan2(-t[2],t[0]))),rotateZ:Um,rotate:Um,skewX:t=>es(Math.atan(t[4])),skewY:t=>es(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Md(t){return t.includes("scale")?1:0}function Ud(t,e){if(!t||t==="none")return Md(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=cj,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=lj,s=l}if(!s)return Md(e);const i=r[e],o=s[1].split(",").map(dj);return typeof i=="function"?i(o):o[i]}const uj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ud(n,e)};function dj(t){return parseFloat(t.trim())}const _i=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ji=(()=>new Set(_i))(),zm=t=>t===Si||t===B,hj=new Set(["x","y","z"]),fj=_i.filter(t=>!hj.has(t));function pj(t){const e=[];return fj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const is={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ud(e,"x"),y:(t,{transform:e})=>Ud(e,"y")};is.translateX=is.x;is.translateY=is.y;const os=new Set;let $d=!1,Fd=!1,zd=!1;function kw(){if(Fd){const t=Array.from(os).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=pj(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Fd=!1,$d=!1,os.forEach(t=>t.complete(zd)),os.clear()}function Sw(){os.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fd=!0)})}function mj(){zd=!0,Sw(),kw(),zd=!1}class Pf{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(os.add(this),$d||($d=!0,ke.read(Sw),ke.resolveKeyframes(kw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}aj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),os.delete(this)}cancel(){this.state==="scheduled"&&(os.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gj=t=>t.startsWith("--");function yj(t,e,n){gj(e)?t.style.setProperty(e,n):t.style[e]=n}const vj=mf(()=>window.ScrollTimeline!==void 0),wj={};function xj(t,e){const n=mf(t);return()=>wj[e]??n()}const _w=xj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),so=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Vm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:so([0,.65,.55,1]),circOut:so([.55,0,1,.45]),backIn:so([.31,.01,.66,-.59]),backOut:so([.33,1.53,.69,.99])};function jw(t,e){if(t)return typeof t=="function"?_w()?ww(t,e):"ease-out":cw(t)?so(t):Array.isArray(t)?t.map(n=>jw(n,e)||Vm.easeOut):Vm[t]}function bj(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=jw(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function Cw(t){return typeof t=="function"&&"applyToOptions"in t}function kj({type:t,...e}){return Cw(t)&&_w()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Sj extends Cf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,pf(typeof e.type!="string");const u=kj(e);this.animation=bj(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=jf(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):yj(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return yn(Number(e))}get time(){return yn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=gn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&vj()?(this.animation.timeline=e,Vt):n(this)}}const Tw={anticipate:iw,backInOut:sw,circInOut:aw};function _j(t){return t in Tw}function jj(t){typeof t.ease=="string"&&_j(t.ease)&&(t.ease=Tw[t.ease])}const Bm=10;class Cj extends Sj{constructor(e){jj(e),bw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Tf({...o,autoplay:!1}),c=gn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Bm).value,l.sample(c).value,Bm),l.stop()}}const Wm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mr.test(t)||t==="0")&&!t.startsWith("url("));function Tj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Pj(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Wm(s,e),l=Wm(i,e);return!o||!l?!1:Tj(t)||(n==="spring"||Cw(n))&&r}function Vd(t){t.duration=0,t.type}const Nj=new Set(["opacity","clipPath","filter","transform"]),Ej=mf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Aj(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return Ej()&&n&&Nj.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const Rj=40;class Ij extends Cf{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var x,k;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=vt.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||Pf;this.keyframeResolver=new p(l,(x,k,g)=>this.onKeyframesResolved(x,k,f,!g),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=vt.now(),Pj(e,i,o,l)||((Ln.instantAnimations||!c)&&(d==null||d(jf(e,r,n))),e[0]=e[e.length-1],Vd(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Rj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&Aj(f)?new Cj({...f,element:f.motionValue.owner.current}):new Tf(f);p.finished.then(()=>this.notifyFinished()).catch(Vt),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),mj()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Oj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Lj(t){const e=Oj.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Pw(t,e,n=1){const[r,s]=Lj(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return J0(o)?parseFloat(o):o}return xf(s)?Pw(s,e,n+1):s}function Nf(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Nw=new Set(["width","height","top","left","right","bottom",..._i]),Dj={test:t=>t==="auto",parse:t=>t},Ew=t=>e=>e.test(t),Aw=[Si,B,vn,qn,T_,C_,Dj],Hm=t=>Aw.find(Ew(t));function Mj(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||X0(t):!0}const Uj=new Set(["brightness","contrast","saturate","opacity"]);function $j(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bf)||[];if(!r)return t;const s=n.replace(r,"");let i=Uj.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Fj=/\b([a-z-]*)\(.*?\)/gu,Bd={...mr,getAnimatableNone:t=>{const e=t.match(Fj);return e?e.map($j).join(" "):t}},Gm={...Si,transform:Math.round},zj={rotate:qn,rotateX:qn,rotateY:qn,rotateZ:qn,scale:Fa,scaleX:Fa,scaleY:Fa,scaleZ:Fa,skew:qn,skewX:qn,skewY:qn,distance:B,translateX:B,translateY:B,translateZ:B,x:B,y:B,z:B,perspective:B,transformPerspective:B,opacity:Go,originX:Im,originY:Im,originZ:B},Ef={borderWidth:B,borderTopWidth:B,borderRightWidth:B,borderBottomWidth:B,borderLeftWidth:B,borderRadius:B,radius:B,borderTopLeftRadius:B,borderTopRightRadius:B,borderBottomRightRadius:B,borderBottomLeftRadius:B,width:B,maxWidth:B,height:B,maxHeight:B,top:B,right:B,bottom:B,left:B,padding:B,paddingTop:B,paddingRight:B,paddingBottom:B,paddingLeft:B,margin:B,marginTop:B,marginRight:B,marginBottom:B,marginLeft:B,backgroundPositionX:B,backgroundPositionY:B,...zj,zIndex:Gm,fillOpacity:Go,strokeOpacity:Go,numOctaves:Gm},Vj={...Ef,color:De,backgroundColor:De,outlineColor:De,fill:De,stroke:De,borderColor:De,borderTopColor:De,borderRightColor:De,borderBottomColor:De,borderLeftColor:De,filter:Bd,WebkitFilter:Bd},Rw=t=>Vj[t];function Iw(t,e){let n=Rw(t);return n!==Bd&&(n=mr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Bj=new Set(["auto","none","0"]);function Wj(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!Bj.has(i)&&Yo(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=Iw(n,s)}class Hj extends Pf{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),xf(u))){const d=Pw(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Nw.has(r)||e.length!==2)return;const[s,i]=e,o=Hm(s),l=Hm(i);if(o!==l)if(zm(o)&&zm(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else is[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||Mj(e[s]))&&r.push(s);r.length&&Wj(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=is[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=is[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Gj(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const Ow=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Lw(t){return Q0(t)&&"offsetHeight"in t}const Ym=30,Yj=t=>!isNaN(parseFloat(t));class qj{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=vt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=vt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Yj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gf);const r=this.events[e].add(n);return e==="change"?()=>{r(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ym)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ym);return Z0(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mi(t,e){return new qj(t,e)}const{schedule:Af,cancel:IA}=uw(queueMicrotask,!1),Jt={x:!1,y:!1};function Dw(){return Jt.x||Jt.y}function Kj(t){return t==="x"||t==="y"?Jt[t]?null:(Jt[t]=!0,()=>{Jt[t]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}function Mw(t,e){const n=Gj(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function qm(t){return!(t.pointerType==="touch"||Dw())}function Jj(t,e,n={}){const[r,s,i]=Mw(t,n),o=l=>{if(!qm(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{qm(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const Uw=(t,e)=>e?t===e?!0:Uw(t,e.parentElement):!1,Rf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Qj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xj(t){return Qj.has(t.tagName)||t.tabIndex!==-1}const hl=new WeakSet;function Km(t){return e=>{e.key==="Enter"&&t(e)}}function pu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Zj=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Km(()=>{if(hl.has(n))return;pu(n,"down");const s=Km(()=>{pu(n,"up")}),i=()=>pu(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Jm(t){return Rf(t)&&!Dw()}function e2(t,e,n={}){const[r,s,i]=Mw(t,n),o=l=>{const c=l.currentTarget;if(!Jm(l))return;hl.add(c);const u=e(c,l),d=(p,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),hl.has(c)&&hl.delete(c),Jm(p)&&typeof u=="function"&&u(p,{success:v})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||Uw(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Lw(l)&&(l.addEventListener("focus",u=>Zj(u,s)),!Xj(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function $w(t){return Q0(t)&&"ownerSVGElement"in t}function t2(t){return $w(t)&&t.tagName==="svg"}const rt=t=>!!(t&&t.getVelocity),n2=[...Aw,De,mr],r2=t=>n2.find(Ew(t)),If=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class s2 extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Lw(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function i2({children:t,isPresent:e,anchorX:n,root:r}){const s=w.useId(),i=w.useRef(null),o=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=w.useContext(If);return w.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:h,right:f}=o.current;if(e||!i.current||!c||!u)return;const p=n==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const v=document.createElement("style");l&&(v.nonce=l);const x=r??document.head;return x.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{x.contains(v)&&x.removeChild(v)}},[e]),a.jsx(s2,{isPresent:e,childRef:i,sizeRef:o,children:w.cloneElement(t,{ref:i})})}const o2=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=uf(a2),d=w.useId();let h=!0,f=w.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const v of u.values())if(!v)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),w.useMemo(()=>{u.forEach((p,v)=>u.set(v,!1))},[n]),w.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(i2,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(mc.Provider,{value:f,children:t})};function a2(){return new Map}function Fw(t=!0){const e=w.useContext(mc);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=w.useId();w.useEffect(()=>{if(t)return s(i)},[t]);const o=w.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const za=t=>t.key||"";function Qm(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const Of=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Fw(o),h=w.useMemo(()=>Qm(t),[t]),f=o&&!u?[]:h.map(za),p=w.useRef(!0),v=w.useRef(h),x=uf(()=>new Map),[k,g]=w.useState(h),[m,y]=w.useState(h);K0(()=>{p.current=!1,v.current=h;for(let C=0;C<m.length;C++){const P=za(m[C]);f.includes(P)?x.delete(P):x.get(P)!==!0&&x.set(P,!1)}},[m,f.length,f.join("-")]);const S=[];if(h!==k){let C=[...h];for(let P=0;P<m.length;P++){const j=m[P],D=za(j);f.includes(D)||(C.splice(P,0,j),S.push(j))}return i==="wait"&&S.length&&(C=S),y(Qm(C)),g(h),null}const{forceRender:T}=w.useContext(cf);return a.jsx(a.Fragment,{children:m.map(C=>{const P=za(C),j=o&&!u?!1:h===m||f.includes(P),D=()=>{if(x.has(P))x.set(P,!0);else return;let I=!0;x.forEach(G=>{G||(I=!1)}),I&&(T==null||T(),y(v.current),o&&(d==null||d()),r&&r())};return a.jsx(o2,{isPresent:j,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:j?void 0:D,anchorX:l,children:C},P)})})},zw=w.createContext({strict:!1}),Xm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gi={};for(const t in Xm)gi[t]={isEnabled:e=>Xm[t].some(n=>!!e[n])};function l2(t){for(const e in t)gi[e]={...gi[e],...t[e]}}const c2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||c2.has(t)}let Vw=t=>!Hl(t);function u2(t){typeof t=="function"&&(Vw=e=>e.startsWith("on")?!Hl(e):t(e))}try{u2(require("@emotion/is-prop-valid").default)}catch{}function d2(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Vw(s)||n===!0&&Hl(s)||!e&&!Hl(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const gc=w.createContext({});function yc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qo(t){return typeof t=="string"||Array.isArray(t)}const Lf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Df=["initial",...Lf];function vc(t){return yc(t.animate)||Df.some(e=>qo(t[e]))}function Bw(t){return!!(vc(t)||t.variants)}function h2(t,e){if(vc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||qo(n)?n:void 0,animate:qo(r)?r:void 0}}return t.inherit!==!1?e:{}}function f2(t){const{initial:e,animate:n}=h2(t,w.useContext(gc));return w.useMemo(()=>({initial:e,animate:n}),[Zm(e),Zm(n)])}function Zm(t){return Array.isArray(t)?t.join(" "):t}const Ko={};function p2(t){for(const e in t)Ko[e]=t[e],wf(e)&&(Ko[e].isCSSVariable=!0)}function Ww(t,{layout:e,layoutId:n}){return ji.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ko[t]||t==="opacity")}const m2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},g2=_i.length;function y2(t,e,n){let r="",s=!0;for(let i=0;i<g2;i++){const o=_i[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Ow(l,Ef[o]);if(!c){s=!1;const d=m2[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Mf(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(ji.has(c)){o=!0;continue}else if(wf(c)){s[c]=u;continue}else{const d=Ow(u,Ef[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=y2(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const Uf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Hw(t,e,n){for(const r in e)!rt(e[r])&&!Ww(r,n)&&(t[r]=e[r])}function v2({transformTemplate:t},e){return w.useMemo(()=>{const n=Uf();return Mf(n,e,t),Object.assign({},n.vars,n.style)},[e])}function w2(t,e){const n=t.style||{},r={};return Hw(r,n,t),Object.assign(r,v2(t,e)),r}function x2(t,e){const n={},r=w2(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const b2={offset:"stroke-dashoffset",array:"stroke-dasharray"},k2={offset:"strokeDashoffset",array:"strokeDasharray"};function S2(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?b2:k2;t[i.offset]=B.transform(-r);const o=B.transform(e),l=B.transform(n);t[i.array]=`${o} ${l}`}function Gw(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Mf(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&S2(h,s,i,o,!1)}const Yw=()=>({...Uf(),attrs:{}}),qw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _2(t,e,n,r){const s=w.useMemo(()=>{const i=Yw();return Gw(i,e,qw(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Hw(i,t.style,t),s.style={...i,...s.style}}return s}const j2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $f(t){return typeof t!="string"||t.includes("-")?!1:!!(j2.indexOf(t)>-1||/[A-Z]/u.test(t))}function C2(t,e,n,{latestValues:r},s,i=!1){const l=($f(t)?_2:x2)(e,r,s,t),c=d2(e,typeof t=="string",i),u=t!==w.Fragment?{...c,...l,ref:n}:{},{children:d}=e,h=w.useMemo(()=>rt(d)?d.get():d,[d]);return w.createElement(t,{...u,children:h})}function eg(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ff(t,e,n,r){if(typeof e=="function"){const[s,i]=eg(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=eg(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function fl(t){return rt(t)?t.get():t}function T2({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:P2(n,r,s,t),renderState:e()}}function P2(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=fl(i[f]);let{initial:o,animate:l}=t;const c=vc(t),u=Bw(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!yc(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const v=Ff(t,f[p]);if(v){const{transitionEnd:x,transition:k,...g}=v;for(const m in g){let y=g[m];if(Array.isArray(y)){const S=d?y.length-1:0;y=y[S]}y!==null&&(s[m]=y)}for(const m in x)s[m]=x[m]}}}return s}const Kw=t=>(e,n)=>{const r=w.useContext(gc),s=w.useContext(mc),i=()=>T2(t,e,r,s);return n?i():uf(i)};function zf(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(rt(r[o])||e.style&&rt(e.style[o])||Ww(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const N2=Kw({scrapeMotionValuesFromProps:zf,createRenderState:Uf});function Jw(t,e,n){const r=zf(t,e,n);for(const s in t)if(rt(t[s])||rt(e[s])){const i=_i.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const E2=Kw({scrapeMotionValuesFromProps:Jw,createRenderState:Yw}),A2=Symbol.for("motionComponentSymbol");function qs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function R2(t,e,n){return w.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):qs(n)&&(n.current=r))},[e])}const Vf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I2="framerAppearId",Qw="data-"+Vf(I2),Xw=w.createContext({});function O2(t,e,n,r,s){var x,k;const{visualElement:i}=w.useContext(gc),o=w.useContext(zw),l=w.useContext(mc),c=w.useContext(If).reducedMotion,u=w.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=w.useContext(Xw);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&L2(u.current,n,s,h);const f=w.useRef(!1);w.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const p=n[Qw],v=w.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,p)));return K0(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),v.current=!1),d.enteringChildren=void 0)}),d}function L2(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Zw(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&qs(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Zw(t){if(t)return t.options.allowProjection!==!1?t.projection:Zw(t.parent)}function mu(t,{forwardMotionProps:e=!1}={},n,r){n&&l2(n);const s=$f(t)?E2:N2;function i(l,c){let u;const d={...w.useContext(If),...l,layoutId:D2(l)},{isStatic:h}=d,f=f2(l),p=s(l,h);if(!h&&df){M2();const v=U2(d);u=v.MeasureLayout,f.visualElement=O2(t,p,d,r,v.ProjectionNode)}return a.jsxs(gc.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,C2(t,l,R2(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=w.forwardRef(i);return o[A2]=t,o}function D2({layoutId:t}){const e=w.useContext(cf).id;return e&&t!==void 0?e+"-"+t:t}function M2(t,e){w.useContext(zw).strict}function U2(t){const{drag:e,layout:n}=gi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $2(t,e){if(typeof Proxy>"u")return mu;const n=new Map,r=(i,o)=>mu(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,mu(o,void 0,t,e)),n.get(o))})}function ex({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function F2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function z2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function gu(t){return t===void 0||t===1}function Wd({scale:t,scaleX:e,scaleY:n}){return!gu(t)||!gu(e)||!gu(n)}function Br(t){return Wd(t)||tx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tx(t){return tg(t.x)||tg(t.y)}function tg(t){return t&&t!=="0%"}function Gl(t,e,n){const r=t-n,s=e*r;return n+s}function ng(t,e,n,r,s){return s!==void 0&&(t=Gl(t,s,r)),Gl(t,n,r)+e}function Hd(t,e=0,n=1,r,s){t.min=ng(t.min,e,n,r,s),t.max=ng(t.max,e,n,r,s)}function nx(t,{x:e,y:n}){Hd(t.x,e.translate,e.scale,e.originPoint),Hd(t.y,n.translate,n.scale,n.originPoint)}const rg=.999999999999,sg=1.0000000000001;function V2(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Js(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,nx(t,o)),r&&Br(i.latestValues)&&Js(t,i.latestValues))}e.x<sg&&e.x>rg&&(e.x=1),e.y<sg&&e.y>rg&&(e.y=1)}function Ks(t,e){t.min=t.min+e,t.max=t.max+e}function ig(t,e,n,r,s=.5){const i=Ce(t.min,t.max,s);Hd(t,e,n,i,r)}function Js(t,e){ig(t.x,e.x,e.scaleX,e.scale,e.originX),ig(t.y,e.y,e.scaleY,e.scale,e.originY)}function rx(t,e){return ex(z2(t.getBoundingClientRect(),e))}function B2(t,e,n){const r=rx(t,n),{scroll:s}=e;return s&&(Ks(r.x,s.offset.x),Ks(r.y,s.offset.y)),r}const og=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qs=()=>({x:og(),y:og()}),ag=()=>({min:0,max:0}),Re=()=>({x:ag(),y:ag()}),Gd={current:null},sx={current:!1};function W2(){if(sx.current=!0,!!df)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gd.current=t.matches;t.addEventListener("change",e),e()}else Gd.current=!1}const H2=new WeakMap;function G2(t,e,n){for(const r in e){const s=e[r],i=n[r];if(rt(s))t.addValue(r,s);else if(rt(i))t.addValue(r,mi(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,mi(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const lg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Y2{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=vt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ke.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=vc(n),this.isVariantNode=Bw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&rt(p)&&p.set(c[f])}}mount(e){var n;this.current=e,H2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),sx.current||W2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gd.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),pr(this.notifyUpdate),pr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ji.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gi){const n=gi[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Re()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lg.length;r++){const s=lg[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=G2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=mi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(J0(r)||X0(r))?r=parseFloat(r):!r2(r)&&mr.test(n)&&(r=Iw(e,n)),this.setBaseTarget(e,rt(r)?r.get():r)),rt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Ff(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!rt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gf),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Af.render(this.render)}}class ix extends Y2{constructor(){super(...arguments),this.KeyframeResolver=Hj}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ox(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function q2(t){return window.getComputedStyle(t)}class K2 extends ix{constructor(){super(...arguments),this.type="html",this.renderInstance=ox}readValueFromInstance(e,n){var r;if(ji.has(n))return(r=this.projection)!=null&&r.isProjecting?Md(n):uj(e,n);{const s=q2(e),i=(wf(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rx(e,n)}build(e,n,r){Mf(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zf(e,n,r)}}const ax=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function J2(t,e,n,r){ox(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(ax.has(s)?s:Vf(s),e.attrs[s])}class Q2 extends ix{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Re}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ji.has(n)){const r=Rw(n);return r&&r.default||0}return n=ax.has(n)?n:Vf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Jw(e,n,r)}build(e,n,r){Gw(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){J2(e,n,r,s)}mount(e){this.isSVGTag=qw(e.tagName),super.mount(e)}}const X2=(t,e)=>$f(t)?new Q2(e):new K2(e,{allowProjection:t!==w.Fragment});function oi(t,e,n){const r=t.getProps();return Ff(r,e,n!==void 0?n:r.custom,t)}const Yd=t=>Array.isArray(t);function Z2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,mi(n))}function eC(t){return Yd(t)?t[t.length-1]||0:t}function tC(t,e){const n=oi(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const l=eC(i[o]);Z2(t,o,l)}}function nC(t){return!!(rt(t)&&t.add)}function qd(t,e){const n=t.getValue("willChange");if(nC(n))return n.add(e);if(!n&&Ln.WillChange){const r=new Ln.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function lx(t){return t.props[Qw]}const rC=t=>t!==null;function sC(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(rC),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const iC={type:"spring",stiffness:500,damping:25,restSpeed:10},oC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aC={type:"keyframes",duration:.8},lC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cC=(t,{keyframes:e})=>e.length>2?aC:ji.has(t)?t.startsWith("scale")?oC(e[1]):iC:lC;function uC({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Bf=(t,e,n,r={},s,i)=>o=>{const l=Nf(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-gn(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};uC(l)||Object.assign(d,cC(t,d)),d.duration&&(d.duration=gn(d.duration)),d.repeatDelay&&(d.repeatDelay=gn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Vd(d),d.delay===0&&(h=!0)),(Ln.instantAnimations||Ln.skipAnimations)&&(h=!0,Vd(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const f=sC(d.keyframes,l);if(f!==void 0){ke.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new Tf(d):new Ij(d)};function dC({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function cx(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),f=l[d];if(f===void 0||u&&dC(u,d))continue;const p={delay:n,...Nf(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const g=lx(t);if(g){const m=window.MotionHandoffAnimation(g,d,ke);m!==null&&(p.startTime=m,x=!0)}}qd(t,d),h.start(Bf(d,h,f,t.shouldReduceMotion&&Nw.has(d)?{type:!1}:p,t,x));const k=h.animation;k&&c.push(k)}return o&&Promise.all(c).then(()=>{ke.update(()=>{o&&tC(t,o)})}),c}function ux(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:l-i*r}function Kd(t,e,n={}){var c;const r=oi(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(cx(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return hC(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function hC(t,e,n=0,r=0,s=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Kd(c,e,{...o,delay:n+(typeof r=="function"?0:r)+ux(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function fC(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Kd(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Kd(t,e,n);else{const s=typeof e=="function"?oi(t,e,n.custom):e;r=Promise.all(cx(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function dx(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const pC=Df.length;function hx(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?hx(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pC;n++){const r=Df[n],s=t.props[r];(qo(s)||s===!1)&&(e[r]=s)}return e}const mC=[...Lf].reverse(),gC=Lf.length;function yC(t){return e=>Promise.all(e.map(({animation:n,options:r})=>fC(t,n,r)))}function vC(t){let e=yC(t),n=cg(),r=!0;const s=c=>(u,d)=>{var f;const h=oi(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:v,...x}=h;u={...u,...x,...v}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=hx(t.parent)||{},h=[],f=new Set;let p={},v=1/0;for(let k=0;k<gC;k++){const g=mC[k],m=n[g],y=u[g]!==void 0?u[g]:d[g],S=qo(y),T=g===c?m.isActive:null;T===!1&&(v=k);let C=y===d[g]&&y!==u[g]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),m.protectedKeys={...p},!m.isActive&&T===null||!y&&!m.prevProp||yc(y)||typeof y=="boolean")continue;const P=wC(m.prevProp,y);let j=P||g===c&&m.isActive&&!C&&S||k>v&&S,D=!1;const I=Array.isArray(y)?y:[y];let G=I.reduce(s(g),{});T===!1&&(G={});const{prevResolvedValues:M={}}=m,Oe={...M,...G},Z=J=>{j=!0,f.has(J)&&(D=!0,f.delete(J)),m.needsAnimating[J]=!0;const R=t.getValue(J);R&&(R.liveStyle=!1)};for(const J in Oe){const R=G[J],$=M[J];if(p.hasOwnProperty(J))continue;let z=!1;Yd(R)&&Yd($)?z=!dx(R,$):z=R!==$,z?R!=null?Z(J):f.add(J):R!==void 0&&f.has(J)?Z(J):m.protectedKeys[J]=!0}m.prevProp=y,m.prevResolvedValues=G,m.isActive&&(p={...p,...G}),r&&t.blockInitialAnimation&&(j=!1);const kt=C&&P;j&&(!kt||D)&&h.push(...I.map(J=>{const R={type:g};if(typeof J=="string"&&r&&!kt&&t.manuallyAnimateOnMount&&t.parent){const{parent:$}=t,z=oi($,J);if($.enteringChildren&&z){const{delayChildren:ae}=z.transition||{};R.delay=ux($.enteringChildren,t,ae)}}return{animation:J,options:R}}))}if(f.size){const k={};if(typeof u.initial!="boolean"){const g=oi(t,Array.isArray(u.initial)?u.initial[0]:u.initial);g&&g.transition&&(k.transition=g.transition)}f.forEach(g=>{const m=t.getBaseTarget(g),y=t.getValue(g);y&&(y.liveStyle=!0),k[g]=m??null}),h.push({animation:k})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=cg(),r=!0}}}function wC(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dx(e,t):!1}function Ur(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cg(){return{animate:Ur(!0),whileInView:Ur(),whileHover:Ur(),whileTap:Ur(),whileDrag:Ur(),whileFocus:Ur(),exit:Ur()}}class wr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xC extends wr{constructor(e){super(e),e.animationState||(e.animationState=vC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let bC=0;class kC extends wr{constructor(){super(...arguments),this.id=bC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const SC={animation:{Feature:xC},exit:{Feature:kC}};function Jo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ca(t){return{point:{x:t.pageX,y:t.pageY}}}const _C=t=>e=>Rf(e)&&t(e,ca(e));function vo(t,e,n,r){return Jo(t,e,_C(n),r)}const fx=1e-4,jC=1-fx,CC=1+fx,px=.01,TC=0-px,PC=0+px;function at(t){return t.max-t.min}function NC(t,e,n){return Math.abs(t-e)<=n}function ug(t,e,n,r=.5){t.origin=r,t.originPoint=Ce(e.min,e.max,t.origin),t.scale=at(n)/at(e),t.translate=Ce(n.min,n.max,t.origin)-t.originPoint,(t.scale>=jC&&t.scale<=CC||isNaN(t.scale))&&(t.scale=1),(t.translate>=TC&&t.translate<=PC||isNaN(t.translate))&&(t.translate=0)}function wo(t,e,n,r){ug(t.x,e.x,n.x,r?r.originX:void 0),ug(t.y,e.y,n.y,r?r.originY:void 0)}function dg(t,e,n){t.min=n.min+e.min,t.max=t.min+at(e)}function EC(t,e,n){dg(t.x,e.x,n.x),dg(t.y,e.y,n.y)}function hg(t,e,n){t.min=e.min-n.min,t.max=t.min+at(e)}function xo(t,e,n){hg(t.x,e.x,n.x),hg(t.y,e.y,n.y)}function Mt(t){return[t("x"),t("y")]}const mx=({current:t})=>t?t.ownerDocument.defaultView:null,fg=(t,e)=>Math.abs(t-e);function AC(t,e){const n=fg(t.x,e.x),r=fg(t.y,e.y);return Math.sqrt(n**2+r**2)}class gx{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=vu(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=AC(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:x}=f,{timestamp:k}=Je;this.history.push({...x,timestamp:k});const{onStart:g,onMove:m}=this.handlers;p||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=yu(p,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=vu(f.type==="pointercancel"?this.lastMoveEventInfo:yu(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,g),x&&x(f,g)},!Rf(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const l=ca(e),c=yu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Je;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,vu(c,this.history)),this.removeListeners=oa(vo(this.contextWindow,"pointermove",this.handlePointerMove),vo(this.contextWindow,"pointerup",this.handlePointerUp),vo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pr(this.updatePoint)}}function yu(t,e){return e?{point:e(t.point)}:t}function pg(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vu({point:t},e){return{point:t,delta:pg(t,yx(e)),offset:pg(t,RC(e)),velocity:IC(e,.1)}}function RC(t){return t[0]}function yx(t){return t[t.length-1]}function IC(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=yx(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>gn(e)));)n--;if(!r)return{x:0,y:0};const i=yn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function OC(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ce(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ce(n,t,r.max):Math.min(t,n)),t}function mg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function LC(t,{top:e,left:n,bottom:r,right:s}){return{x:mg(t.x,n,s),y:mg(t.y,e,r)}}function gg(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function DC(t,e){return{x:gg(t.x,e.x),y:gg(t.y,e.y)}}function MC(t,e){let n=.5;const r=at(t),s=at(e);return s>r?n=Ho(e.min,e.max-r,t.min):r>s&&(n=Ho(t.min,t.max-s,e.min)),On(0,1,n)}function UC(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Jd=.35;function $C(t=Jd){return t===!1?t=0:t===!0&&(t=Jd),{x:yg(t,"left","right"),y:yg(t,"top","bottom")}}function yg(t,e,n){return{min:vg(t,e),max:vg(t,n)}}function vg(t,e){return typeof t=="number"?t:t[e]||0}const FC=new WeakMap;class zC{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Re(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ca(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:x}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Kj(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mt(g=>{let m=this.getAxisMotionValue(g).get()||0;if(vn.test(m)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[g];S&&(m=at(S)*(parseFloat(m)/100))}}this.originPoint[g]=m}),x&&ke.postRender(()=>x(h,f)),qd(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:x,onDrag:k}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=f;if(v&&this.currentDirection===null){this.currentDirection=VC(g),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),k&&k(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Mt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new gx(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:mx(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ke.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Va(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=OC(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&qs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=LC(r.layoutBox,e):this.constraints=!1,this.elastic=$C(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Mt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UC(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!qs(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=B2(r,s.root,this.visualElement.getTransformPagePoint());let o=DC(s.layout.layoutBox,i);if(n){const l=n(F2(o));this.hasMutatedConstraints=!!l,l&&(o=ex(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Mt(d=>{if(!Va(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return qd(this.visualElement,e),r.start(Bf(e,r,0,n,this.visualElement,!1))}stopAnimation(){Mt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Mt(n=>{const{drag:r}=this.getProps();if(!Va(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(e[n]-Ce(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!qs(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Mt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=MC({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mt(o=>{if(!Va(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ce(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;FC.set(this.visualElement,this);const e=this.visualElement.current,n=vo(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();qs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ke.read(r);const o=Jo(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Mt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Jd,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Va(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VC(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class BC extends wr{constructor(e){super(e),this.removeGroupControls=Vt,this.removeListeners=Vt,this.controls=new zC(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const wg=t=>(e,n)=>{t&&ke.postRender(()=>t(e,n))};class WC extends wr{constructor(){super(...arguments),this.removePointerDownListener=Vt}onPointerDown(e){this.session=new gx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:wg(e),onStart:wg(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ke.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=vo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ki={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(B.test(t))t=parseFloat(t);else return t;const n=xg(t,e.target.x),r=xg(t,e.target.y);return`${n}% ${r}%`}},HC={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=mr.parse(t);if(s.length>5)return r;const i=mr.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=Ce(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};let wu=!1;class GC extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;p2(YC),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),wu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),pl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,wu=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ke.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Af.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;wu=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vx(t){const[e,n]=Fw(),r=w.useContext(cf);return a.jsx(GC,{...t,layoutGroup:r,switchLayoutGroup:w.useContext(Xw),isPresent:e,safeToRemove:n})}const YC={borderRadius:{...Ki,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ki,borderTopRightRadius:Ki,borderBottomLeftRadius:Ki,borderBottomRightRadius:Ki,boxShadow:HC};function qC(t,e,n){const r=rt(t)?t:mi(t);return r.start(Bf("",r,e,n)),r.animation}const KC=(t,e)=>t.depth-e.depth;class JC{constructor(){this.children=[],this.isDirty=!1}add(e){hf(this.children,e),this.isDirty=!0}remove(e){ff(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KC),this.isDirty=!1,this.children.forEach(e)}}function QC(t,e){const n=vt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(pr(r),t(i-e))};return ke.setup(r,!0),()=>pr(r)}const wx=["TopLeft","TopRight","BottomLeft","BottomRight"],XC=wx.length,bg=t=>typeof t=="string"?parseFloat(t):t,kg=t=>typeof t=="number"||B.test(t);function ZC(t,e,n,r,s,i){s?(t.opacity=Ce(0,n.opacity??1,eT(r)),t.opacityExit=Ce(e.opacity??1,0,tT(r))):i&&(t.opacity=Ce(e.opacity??1,n.opacity??1,r));for(let o=0;o<XC;o++){const l=`border${wx[o]}Radius`;let c=Sg(e,l),u=Sg(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||kg(c)===kg(u)?(t[l]=Math.max(Ce(bg(c),bg(u),r),0),(vn.test(u)||vn.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Ce(e.rotate||0,n.rotate||0,r))}function Sg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const eT=xx(0,.5,ow),tT=xx(.5,.95,Vt);function xx(t,e,n){return r=>r<t?0:r>e?1:n(Ho(t,e,r))}function _g(t,e){t.min=e.min,t.max=e.max}function Dt(t,e){_g(t.x,e.x),_g(t.y,e.y)}function jg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Cg(t,e,n,r,s){return t-=e,t=Gl(t,1/n,r),s!==void 0&&(t=Gl(t,1/s,r)),t}function nT(t,e=0,n=1,r=.5,s,i=t,o=t){if(vn.test(e)&&(e=parseFloat(e),e=Ce(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ce(i.min,i.max,r);t===i&&(l-=e),t.min=Cg(t.min,e,n,l,s),t.max=Cg(t.max,e,n,l,s)}function Tg(t,e,[n,r,s],i,o){nT(t,e[n],e[r],e[s],e.scale,i,o)}const rT=["x","scaleX","originX"],sT=["y","scaleY","originY"];function Pg(t,e,n,r){Tg(t.x,e,rT,n?n.x:void 0,r?r.x:void 0),Tg(t.y,e,sT,n?n.y:void 0,r?r.y:void 0)}function Ng(t){return t.translate===0&&t.scale===1}function bx(t){return Ng(t.x)&&Ng(t.y)}function Eg(t,e){return t.min===e.min&&t.max===e.max}function iT(t,e){return Eg(t.x,e.x)&&Eg(t.y,e.y)}function Ag(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function kx(t,e){return Ag(t.x,e.x)&&Ag(t.y,e.y)}function Rg(t){return at(t.x)/at(t.y)}function Ig(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oT{constructor(){this.members=[]}add(e){hf(this.members,e),e.scheduleRender()}remove(e){if(ff(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aT(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const xu=["","X","Y","Z"],lT=1e3;let cT=0;function bu(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Sx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=lx(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ke,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Sx(r)}function _x({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=cT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hT),this.nodes.forEach(gT),this.nodes.forEach(yT),this.nodes.forEach(fT)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new JC)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$w(o)&&!t2(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;ke.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=QC(f,250),pl.hasAnimatedSinceResize&&(pl.hasAnimatedSinceResize=!1,this.nodes.forEach(Dg)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||kT,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=u.getProps(),g=!this.targetLayout||!kx(this.targetLayout,p),m=!h&&f;if(this.options.layoutRoot||this.resumeFrom||m||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...Nf(v,"layout"),onPlay:x,onComplete:k};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(d,m)}else h||Dg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Sx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Og);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Lg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mT),this.nodes.forEach(uT),this.nodes.forEach(dT)):this.nodes.forEach(Lg),this.clearAllSnapshots();const l=vt.now();Je.delta=On(0,1e3/60,l-Je.timestamp),Je.timestamp=l,Je.isProcessing=!0,cu.update.process(Je),cu.preRender.process(Je),cu.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Af.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pT),this.sharedNodes.forEach(wT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!at(this.snapshot.measuredBox.x)&&!at(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!bx(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Br(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),ST(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Re();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(_T))){const{scroll:d}=this.root;d&&(Ks(l.x,d.offset.x),Ks(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Re();if(Dt(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Dt(l,o),Ks(l.x,h.offset.x),Ks(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Re();Dt(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Js(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Br(d.latestValues)&&Js(c,d.latestValues)}return Br(this.latestValues)&&Js(c,this.latestValues),c}removeTransform(o){const l=Re();Dt(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Br(u.latestValues))continue;Wd(u.latestValues)&&u.updateSnapshot();const d=Re(),h=u.measurePageBox();Dt(d,h),Pg(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Br(this.latestValues)&&Pg(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),xo(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Re(),this.targetWithTransforms=Re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dt(this.target,this.layout.layoutBox),nx(this.target,this.targetDelta)):Dt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),xo(this.relativeTargetOrigin,this.target,p.target),Dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wd(this.parent.latestValues)||tx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Dt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;V2(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Re());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jg(this.prevProjectionDelta.x,this.projectionDelta.x),jg(this.prevProjectionDelta.y,this.projectionDelta.y)),wo(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Ig(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ig(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qs(),this.projectionDelta=Qs(),this.projectionDeltaWithTransform=Qs()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Qs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Re(),p=c?c.source:void 0,v=this.layout?this.layout.source:void 0,x=p!==v,k=this.getStack(),g=!k||k.members.length<=1,m=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(bT));this.animationProgress=0;let y;this.mixTargetDelta=S=>{const T=S/1e3;Mg(h.x,o.x,T),Mg(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xT(this.relativeTarget,this.relativeTargetOrigin,f,T),y&&iT(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Re()),Dt(y,this.relativeTarget)),x&&(this.animationValues=d,ZC(d,u,this.latestValues,T,m,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{pl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mi(0)),this.currentAnimation=qC(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&jx(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Re();const h=at(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=at(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Dt(l,c),Js(l,d),wo(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new oT),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&bu("z",o,u,this.animationValues);for(let d=0;d<xu.length;d++)bu(`rotate${xu[d]}`,o,u,this.animationValues),bu(`skew${xu[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=fl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=fl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Br(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=aT(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in Ko){if(d[v]===void 0)continue;const{correct:x,applyTo:k,isCSSVariable:g}=Ko[v],m=h==="none"?d[v]:x(d[v],u);if(k){const y=k.length;for(let S=0;S<y;S++)o[k[S]]=m}else g?this.options.visualElement.renderState.vars[v]=m:o[v]=m}this.options.layoutId&&(o.pointerEvents=u===this?fl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Og),this.root.sharedNodes.clear()}}}function uT(t){t.updateLayout()}function dT(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Mt(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=at(f);f.min=r[h].min,f.max=f.min+p}):jx(i,e.layoutBox,r)&&Mt(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=at(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const l=Qs();wo(l,r,e.layoutBox);const c=Qs();o?wo(c,t.applyTransform(s,!0),e.measuredBox):wo(c,r,e.layoutBox);const u=!bx(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const v=Re();xo(v,e.layoutBox,f.layoutBox);const x=Re();xo(x,r,p.layoutBox),kx(v,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function hT(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pT(t){t.clearSnapshot()}function Og(t){t.clearMeasurements()}function Lg(t){t.isLayoutDirty=!1}function mT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Dg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gT(t){t.resolveTargetDelta()}function yT(t){t.calcProjection()}function vT(t){t.resetSkewAndRotation()}function wT(t){t.removeLeadSnapshot()}function Mg(t,e,n){t.translate=Ce(e.translate,0,n),t.scale=Ce(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ug(t,e,n,r){t.min=Ce(e.min,n.min,r),t.max=Ce(e.max,n.max,r)}function xT(t,e,n,r){Ug(t.x,e.x,n.x,r),Ug(t.y,e.y,n.y,r)}function bT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kT={duration:.45,ease:[.4,0,.1,1]},$g=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Fg=$g("applewebkit/")&&!$g("chrome/")?Math.round:Vt;function zg(t){t.min=Fg(t.min),t.max=Fg(t.max)}function ST(t){zg(t.x),zg(t.y)}function jx(t,e,n){return t==="position"||t==="preserve-aspect"&&!NC(Rg(e),Rg(n),.2)}function _T(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const jT=_x({attachResizeListener:(t,e)=>Jo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ku={current:void 0},Cx=_x({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ku.current){const t=new jT({});t.mount(window),t.setOptions({layoutScroll:!0}),ku.current=t}return ku.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CT={pan:{Feature:WC},drag:{Feature:BC,ProjectionNode:Cx,MeasureLayout:vx}};function Vg(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&ke.postRender(()=>i(e,ca(e)))}class TT extends wr{mount(){const{current:e}=this.node;e&&(this.unmount=Jj(e,(n,r)=>(Vg(this.node,r,"Start"),s=>Vg(this.node,s,"End"))))}unmount(){}}class PT extends wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oa(Jo(this.node.current,"focus",()=>this.onFocus()),Jo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bg(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&ke.postRender(()=>i(e,ca(e)))}class NT extends wr{mount(){const{current:e}=this.node;e&&(this.unmount=e2(e,(n,r)=>(Bg(this.node,r,"Start"),(s,{success:i})=>Bg(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qd=new WeakMap,Su=new WeakMap,ET=t=>{const e=Qd.get(t.target);e&&e(t)},AT=t=>{t.forEach(ET)};function RT({root:t,...e}){const n=t||document;Su.has(n)||Su.set(n,{});const r=Su.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(AT,{root:t,...e})),r[s]}function IT(t,e,n){const r=RT(e);return Qd.set(t,n),r.observe(t),()=>{Qd.delete(t),r.unobserve(t)}}const OT={some:0,all:1};class LT extends wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:OT[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return IT(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DT(e,n))&&this.startObserver()}unmount(){}}function DT({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const MT={inView:{Feature:LT},tap:{Feature:NT},focus:{Feature:PT},hover:{Feature:TT}},UT={layout:{ProjectionNode:Cx,MeasureLayout:vx}},$T={...SC,...MT,...CT,...UT},fn=$2($T,X2),Tx=w.createContext(null),Px=()=>{const t=w.useContext(Tx);if(!t)throw new Error("useToasts must be used within <ToastProvider/>");return t},FT=3,zT=4200;function VT({children:t}){const[e,n]=w.useState([]),r=w.useRef([]),s=w.useRef({}),i=w.useCallback(f=>{n(p=>p.filter(v=>v.id!==f)),s.current[f]&&(window.clearTimeout(s.current[f]),delete s.current[f])},[]),o=w.useCallback(()=>{n(f=>{const p=[...f];for(;p.length<FT&&r.current.length>0;){const v=r.current.shift();p.push(v)}return p})},[]),l=w.useCallback(f=>{r.current.push(f),o(),(()=>{s.current[f.id]=window.setTimeout(()=>i(f.id),zT)})()},[o,i]);w.useEffect(()=>()=>Object.values(s.current).forEach(f=>window.clearTimeout(f)),[]);const c=w.useCallback(({title:f="Added to queue",message:p="We'll start processing shortly."}={})=>{l({id:crypto.randomUUID(),kind:"queue",title:f,message:p})},[l]),u=w.useCallback(({title:f="Your media is ready",message:p="Tap to open",thumbUrl:v,onClickThumb:x}={})=>{l({id:crypto.randomUUID(),kind:"ready",title:f,message:p,thumbUrl:v,onClickThumb:x})},[l]),d=w.useCallback(({title:f="Something went wrong",message:p="Please try again."})=>{l({id:crypto.randomUUID(),kind:"error",title:f,message:p})},[l]),h=w.useMemo(()=>({notifyQueue:c,notifyReady:u,notifyError:d}),[c,u,d]);return a.jsxs(Tx.Provider,{value:h,children:[t,a.jsx("div",{className:"fixed z-[100] right-4 top-16 flex w-[min(92vw,380px)] flex-col gap-2",children:a.jsx(Of,{initial:!1,children:e.map(f=>a.jsx(fn.div,{initial:{opacity:0,y:-12,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{type:"spring",stiffness:400,damping:28},children:a.jsx(BT,{toast:f,onClose:()=>i(f.id)})},f.id))})})]})}function BT({toast:t,onClose:e}){const n=t.kind,r="border-white/20";return a.jsx("div",{className:`relative overflow-hidden rounded-2xl border shadow-lg backdrop-blur ${r}`,style:{backgroundColor:"#333333"},children:a.jsxs("div",{className:"flex items-center gap-3 p-3",children:[a.jsxs("div",{className:"shrink-0",children:[t.kind==="queue"&&a.jsx(Y0,{className:"h-5 w-5 animate-spin"}),t.kind==="ready"&&a.jsx($S,{className:"h-5 w-5"}),t.kind==="error"&&a.jsx(DS,{className:"h-5 w-5"})]}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"truncate text-sm font-semibold",children:t.title}),t.message&&a.jsx("div",{className:"truncate text-xs opacity-70",children:t.message})]}),t.thumbUrl?a.jsxs("button",{onClick:t.onClickThumb,className:"group relative h-12 w-16 overflow-hidden rounded-lg border bg-white/50 shadow-inner","aria-label":"Open media",children:[a.jsx("img",{src:t.thumbUrl,alt:"thumbnail",className:"h-full w-full object-cover"}),a.jsx("div",{className:"absolute inset-0 hidden place-items-center bg-black/20 group-hover:grid",children:a.jsx(t_,{className:"h-5 w-5 text-white"})})]}):null,a.jsx("button",{onClick:e,className:"rounded-full p-1 transition hover:bg-black/10","aria-label":"Close",children:a.jsx(tn,{className:"h-4 w-4"})})]})})}function WT({src:t,kind:e,status:n,onClick:r,label:s}){return a.jsxs("div",{className:"relative aspect-video w-full overflow-hidden rounded-2xl border bg-neutral-100 dark:bg-neutral-900",children:[t?a.jsx("img",{src:t,alt:s||"media",className:"h-full w-full object-cover"}):a.jsx("div",{className:"grid h-full w-full place-items-center text-neutral-400",children:a.jsx(ii,{className:"h-8 w-8"})}),n==="processing"&&a.jsx("div",{className:"absolute inset-0 grid place-items-center bg-black/30",children:a.jsx("div",{className:"grid place-items-center",children:a.jsx("div",{className:"h-14 w-14 animate-spin rounded-full border-2 border-white/40 border-t-white"})})}),a.jsx("button",{onClick:r,className:"absolute inset-0","aria-label":"Open media"})]})}const Yr=class Yr{constructor(){ve(this,"authState",{isAuthenticated:!1,user:null,token:null});ve(this,"authChangeListeners",[]);this.loadAuthState()}static getInstance(){return Yr.instance||(Yr.instance=new Yr),Yr.instance}loadAuthState(){try{const e=localStorage.getItem("auth_token"),n=localStorage.getItem("user_data");if(e&&n)try{const r=JSON.parse(n);this.authState={isAuthenticated:!0,user:r,token:e}}catch(r){console.error("Error parsing user data:",r),this.clearAuthState()}}catch(e){console.error("Error loading auth state:",e),this.clearAuthState()}}getAuthState(){return{...this.authState}}isAuthenticated(){return this.authState.isAuthenticated}getCurrentUser(){return this.authState.user}getToken(){return this.authState.token}setAuthState(e,n){const r=this.authState.isAuthenticated;this.authState={isAuthenticated:!0,user:n,token:e},localStorage.setItem("auth_token",e),localStorage.setItem("user_data",JSON.stringify(n)),r||this.notifyAuthChange()}clearAuthState(){this.authState={isAuthenticated:!1,user:null,token:null},localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}logout(){try{fetch("/.netlify/functions/logout",{method:"POST"}).catch(()=>{})}finally{this.clearAuthState(),this.notifyAuthChange(),window.dispatchEvent(new CustomEvent("auth-state-changed"))}}getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Bearer ${this.authState.token}`}}isTokenValid(){if(!this.authState.token)return!1;try{return this.authState.token.split(".").length===3}catch{return!1}}refreshAuthState(){this.loadAuthState()}onAuthStateChange(e){return this.authChangeListeners.push(e),()=>{const n=this.authChangeListeners.indexOf(e);n>-1&&this.authChangeListeners.splice(n,1)}}notifyAuthChange(){this.authChangeListeners.forEach(e=>{try{e(this.authState)}catch(n){console.error("Error in auth state change listener:",n)}})}};ve(Yr,"instance");let Xd=Yr;const F=Xd.getInstance();function HT(){return F.getAuthState().token||localStorage.getItem("auth_token")||localStorage.getItem("token")}async function GT(t,e={}){const n=HT(),r={};return n&&(r.Authorization=`Bearer ${n}`),fetch(t,{...e,headers:{...r,...e.headers||{}}})}async function ai(t,e={}){return GT(t,e)}const Wg={name:"User Name",avatar:null,shareToFeed:!1,allowRemix:!1},Nx=w.createContext(void 0),wc=()=>{const t=w.useContext(Nx);if(t===void 0)throw new Error("useProfile must be used within a ProfileProvider");return t},YT=({children:t})=>{const[e,n]=w.useState(Wg),[r,s]=w.useState(!0),i=async()=>{s(!0);try{if(F.isAuthenticated()){const d=await ai("/.netlify/functions/get-user-profile",{method:"GET"});if(d.ok){const h=await d.json();console.log(" Loaded profile from database:",h);const f={id:h.id,name:h.name||h.username||"",username:h.username||"",avatar:h.avatar||h.avatar_url||"",shareToFeed:h.shareToFeed||!1,allowRemix:h.allowRemix||!1,onboarding_completed:h.onboarding_completed||!1,tier:h.tier||"registered",createdAt:h.createdAt};n(f),localStorage.setItem("userProfile",JSON.stringify(f));return}}const u=localStorage.getItem("userProfile");if(u){const d=JSON.parse(u);n(h=>({...h,...d})),console.log(" Loaded profile from localStorage:",d)}}catch(u){console.error(" Failed to load profile:",u);const d=localStorage.getItem("userProfile");if(d)try{const h=JSON.parse(d);n(f=>({...f,...h}))}catch(h){console.error("Failed to parse localStorage profile:",h)}}finally{s(!1)}},o=u=>{n(d=>{const h={...d,...u};return localStorage.setItem("userProfile",JSON.stringify(h)),console.log(" Profile updated:",u),h})},l=async()=>{await i()};w.useEffect(()=>{i()},[]),w.useEffect(()=>{const u=()=>{F.isAuthenticated()?i():(n(Wg),localStorage.removeItem("userProfile"))};return window.addEventListener("auth-state-changed",u),()=>{window.removeEventListener("auth-state-changed",u)}},[]);const c={profileData:e,setProfileData:n,updateProfile:o,refreshProfile:l,isLoading:r};return a.jsx(Nx.Provider,{value:c,children:t})},qT=({isOpen:t,onClose:e,feature:n})=>{const r={remix:{icon:Ed,title:"Unlock Remix",description:"Sign up to remix and create your own variations of community creations",benefits:["Try any style","Create variations","Share your remixes"]},save:{icon:si,title:"Save Favorites",description:"Sign up to save your favorite creations and build your collection",benefits:["Save favorites","Create collections","Access anytime"]},share:{icon:pc,title:"Share Creations",description:"Sign up to share your AI creations with the community",benefits:["Share to social","Get feedback","Build audience"]},upload:{icon:US,title:"Upload Photos",description:"Sign up to upload your own photos and apply AI filters",benefits:["Upload photos","Apply filters","Create art"]},ai:{icon:Ed,title:"Access AI Filters",description:"Sign up to unlock powerful AI filters and transformations",benefits:["AI filters","Style mixing","High-res output"]}},s=r[n]||r.remix,i=s.icon,o=()=>{e(),console.log("Redirecting to signup flow...")};return a.jsx(Of,{children:t&&a.jsx(fn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs(fn.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-[#222222] border border-white/10 rounded-2xl max-w-md w-full p-6 relative shadow-2xl text-white",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:24})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center",children:a.jsx(i,{size:32,className:"text-white"})})}),a.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:s.title}),a.jsx("p",{className:"text-white/60",children:s.description})]}),a.jsx("div",{className:"space-y-3 mb-6",children:s.benefits.map((l,c)=>a.jsxs(fn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(QS,{size:12,className:"text-white"})}),a.jsx("span",{className:"text-sm text-white/70",children:l})]},c))}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(fn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"w-full bg-white text-black font-semibold py-4 rounded-xl hover:bg-white/90 transition-colors",children:"Sign Up Free"}),a.jsx(fn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"w-full bg-white/5 text-white font-semibold py-4 rounded-xl hover:bg-white/10 transition-colors border border-white/20",children:"Continue Browsing"})]}),a.jsx("p",{className:"text-center text-xs text-white/40 mt-4",children:"Free to sign up  No credit card required"})]})})})},KT="modulepreload",JT=function(t){return"/"+t},Hg={},xr=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=JT(i),i in Hg)return;Hg[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":KT,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function QT(t={}){let e=t.token||localStorage.getItem("auth_token")||F.getToken()||"";return typeof e=="object"&&(console.error(" Token is object, extracting string:",e),e=e.access_token||e.token||e.jwt||""),!e||typeof e!="string"||!e.includes(".")||e.split(".").length!==3?{"Content-Type":"application/json"}:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}async function Wf(t,e={}){const n=QT(e);return fetch(t,{...e,headers:{...n,...e.headers||{}}})}async function Ex(t,e){var o;let n;if(typeof t=="string"){if(!t.startsWith("data:"))throw new Error("Non-file string passed to upload");const l=await fetch(t).then(c=>c.blob());n=new File([l],"upload.png",{type:l.type||"image/png"})}else n=t;const r=await Wf("/.netlify/functions/cloudinary-sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder:e,resource_type:"image"})}).then(l=>l.json()),s=new FormData;s.append("file",n),s.append("api_key",r.api_key),s.append("timestamp",String(r.timestamp)),s.append("signature",r.signature),s.append("folder",e),s.append("resource_type","image");const i=await fetch(`https://api.cloudinary.com/v1_1/${r.cloud_name}/auto/upload`,{method:"POST",body:s}).then(l=>l.json());if(!(i!=null&&i.secure_url))throw console.error("Cloudinary upload failed:",i),new Error(((o=i==null?void 0:i.error)==null?void 0:o.message)||"Cloudinary upload failed");return{secure_url:i.secure_url,width:i.width,height:i.height,public_id:i.public_id}}const ts=({size:t=16,className:e=""})=>a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[a.jsx("circle",{cx:"7",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",fill:"none"}),a.jsx("circle",{cx:"17",cy:"17",r:"4",stroke:"currentColor",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M11 7 L13 17",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"}),a.jsx("path",{d:"M13 7 L11 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M12 15.5 L13 17 L14 15.5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 8.5 L11 7 L10 8.5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),a.jsx("circle",{cx:"9",cy:"9",r:"1",fill:"currentColor"}),a.jsx("circle",{cx:"15",cy:"15",r:"1",fill:"currentColor"})]}),Zd=({size:t=24,className:e=""})=>a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:`flex-shrink-0 ${e}`,style:{display:"block"},children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]});function XT(t={}){const{enableCoreWebVitals:e=!0,enableCustomMetrics:n=!0,sampleRate:r=.1,onMetric:s}=t,i=w.useRef({}),o=w.useRef(Math.random()<r);w.useEffect(()=>{if(o.current&&(e&&xr(()=>import("./web-vitals-80fe8d1b.js"),[]).then(({getCLS:h,getFID:f,getLCP:p})=>{h(v=>{i.current.cls=v.value;const x=v.value<.1?"good":v.value<.25?"needs-improvement":"poor";s==null||s("CLS",v.value,x)}),f(v=>{i.current.fid=v.value;const x=v.value<100?"good":v.value<300?"needs-improvement":"poor";s==null||s("FID",v.value,x)}),p(v=>{i.current.lcp=v.value;const x=v.value<2500?"good":v.value<4e3?"needs-improvement":"poor";s==null||s("LCP",v.value,x)})}).catch(()=>{console.warn("web-vitals library not available")}),n)){const h=performance.getEntriesByType("navigation")[0];if(h){const f=h.loadEventEnd-h.navigationStart;i.current.renderTime=f;const p=f<1e3?"good":f<3e3?"needs-improvement":"poor";s==null||s("renderTime",f,p)}}},[e,n,s]);const l=(h,f,p)=>{if(!o.current)return;const v=f-h;i.current.imageLoadTime=v;const x=v<500?"good":v<1500?"needs-improvement":"poor";s==null||s("imageLoadTime",v,x),v>2e3&&console.warn(`Slow image load: ${p} took ${v}ms`)},c=(h,f,p)=>{if(!o.current)return;const v=p-f;i.current.apiResponseTime=v;const x=v<200?"good":v<1e3?"needs-improvement":"poor";s==null||s("apiResponseTime",v,x),v>3e3&&console.warn(`Slow API call: ${h} took ${v}ms`)},u=()=>({...i.current});return{trackImageLoad:l,trackApiCall:c,getMetrics:u,reportMetrics:()=>{if(!o.current)return;const h=u();console.log("Performance metrics:",h)},isMonitoring:o.current}}function ZT(){const{trackImageLoad:t,isMonitoring:e}=XT();return{trackImage:r=>{if(!e)return{onLoadStart:()=>{},onLoadEnd:()=>{}};let s;return{onLoadStart:()=>{s=performance.now()},onLoadEnd:()=>{const i=performance.now();t(s,i,r)}}}}}function Gg(t,e={}){if(!t||!t.includes("cloudinary.com"))return t;const{width:n,height:r,quality:s=80,format:i="auto",crop:o="limit",gravity:l="auto",dpr:c="auto",blur:u,sharpen:d=!1}=e;try{const[h,f]=t.split("/upload/");if(!h||!f)return t;const p=[];p.push(`f_${i}`),p.push(`q_${s}`),n&&p.push(`w_${n}`),r&&p.push(`h_${r}`),(n||r)&&p.push(`c_${o}`),p.push(`dpr_${c}`),l!=="auto"&&p.push(`g_${l}`),u&&p.push(`e_blur:${u}`),d&&p.push("e_sharpen"),p.push("fl_progressive"),p.push("fl_immutable_cache");const v=p.join(",");return`${h}/upload/${v}/${f}`}catch(h){return console.warn("Failed to optimize Cloudinary URL:",h),t}}const Yg=({src:t,alt:e,className:n="",placeholder:r,onLoad:s,onError:i,priority:o=!1,sizes:l,quality:c=80,format:u="auto"})=>{const[d,h]=w.useState(!1),[f,p]=w.useState(!1),[v,x]=w.useState(o),[k,g]=w.useState(!1),m=w.useRef(null),y=w.useRef(null),{trackImage:S}=ZT(),T=S(t),C=Gg(t,{format:u,quality:c,width:800,height:600,dpr:"auto"}),P=Gg(t,{format:"auto",quality:10,width:50,height:38,blur:300});w.useEffect(()=>{if(o)return;const G=new IntersectionObserver(([M])=>{M.isIntersecting&&(x(!0),G.disconnect())},{rootMargin:"100px 0px",threshold:.1});return y.current&&G.observe(y.current),()=>G.disconnect()},[o]),w.useEffect(()=>{if(!v)return;const G=new ii;G.onload=()=>g(!0),G.src=P},[v,P]);const j=()=>{h(!0),T.onLoadEnd(),s==null||s()},D=()=>{p(!0),T.onLoadEnd(),i==null||i()},I=()=>{T.onLoadStart()};return a.jsx("div",{ref:y,className:`relative overflow-hidden ${n}`,children:a.jsxs(Of,{children:[k&&!d&&!f&&a.jsx(fn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0",style:{backgroundImage:`url(${P})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(2px)",transform:"scale(1.05)"}}),!k&&!d&&!f&&a.jsx(fn.div,{initial:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Y0,{size:20,className:"animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading..."})]})}),f&&a.jsx(fn.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-2 text-gray-500",children:[a.jsx(ii,{size:24}),a.jsx("span",{className:"text-sm",children:"Failed to load"})]})}),v&&a.jsx(fn.img,{ref:m,src:C,alt:e,sizes:l,onLoadStart:I,onLoad:j,onError:D,className:`w-full h-full object-cover transition-opacity duration-500 ${d?"opacity-100":"opacity-0"}`,initial:{scale:1.02},animate:{scale:1},transition:{duration:.5,ease:"easeOut"},loading:o?"eager":"lazy"})]})})},ml=({media:t,columns:e=3,onMediaClick:n,onDownload:r,onShare:s,onUnshare:i,onLike:o,onRemix:l,onDelete:c,onFilterCreator:u,onGenerateCaption:d,showActions:h=!0,className:f="",isLikedMedia:p=!1,isSelectionMode:v=!1,selectedMediaIds:x=new Set,onToggleSelection:k,hideRemixCount:g=!1,hideUserAvatars:m=!1,hideShareButton:y=!1,hideLikeButton:S=!1})=>{const{profileData:T}=wc(),C=w.useRef(null),P=w.useMemo(()=>{if(t.length===0)return[];const I=3,G=Array.from({length:I},()=>[]);return t.forEach((M,Oe)=>{const Z=G.map(dt=>dt.reduce((J,R)=>J+1/R.aspectRatio,0)),kt=Z.indexOf(Math.min(...Z));G[kt].push(M)}),G},[t]),j=(I,G)=>{G.stopPropagation(),I()},D=I=>{switch(I){case"video":return a.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"white",children:a.jsx("path",{d:"M8 5v14l11-7z"})})});case"remix":return a.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:a.jsx(ts,{size:12,className:"text-white"})});default:return null}};return t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-white/40",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("polyline",{points:"21,15 16,10 5,21"})]})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No media found"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Media will appear here"})]}):a.jsx("div",{className:`${f}`,ref:C,children:a.jsx("div",{className:"flex gap-2 mx-auto",style:{maxWidth:"1200px"},children:P.map((I,G)=>a.jsx("div",{className:"flex-1 flex flex-col gap-2 min-w-0",children:I.map(M=>{var Oe;return a.jsx("div",{className:"relative group cursor-pointer bg-white/5 overflow-hidden",onClick:()=>n==null?void 0:n(M),children:a.jsxs("div",{className:"relative w-full overflow-hidden",children:[v&&k&&a.jsx("div",{className:"absolute top-2 left-2 z-10",children:a.jsx("button",{onClick:Z=>{Z.stopPropagation(),k(M.id)},className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${x.has(M.id)?"bg-white border-white":"bg-black/60 border-white/60 hover:border-white"}`,title:x.has(M.id)?"Deselect":"Select",children:x.has(M.id)&&a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-black",children:a.jsx("polyline",{points:"20,6 9,17 4,12"})})})}),M.status==="processing"?a.jsx(WT,{kind:M.type==="video"?"video":"image",status:"processing",src:M.thumbnailUrl||M.url,onClick:()=>n==null?void 0:n(M)}):M.status==="failed"?a.jsxs("div",{className:"relative",children:[M.type==="video"?a.jsx("video",{src:M.url,className:"w-full h-auto object-cover opacity-50",muted:!0}):a.jsx(Yg,{src:M.url,alt:M.prompt,className:"w-full h-auto opacity-50",quality:60,format:"auto"}),a.jsx("div",{className:"absolute inset-0 grid place-items-center",children:a.jsx("div",{className:"px-3 py-1 rounded-full bg-red-600/80 text-white text-xs font-semibold",children:"Failed"})})]}):M.type==="video"?a.jsx("video",{src:M.url,className:"w-full h-auto object-cover",muted:!0,loop:!0,onMouseEnter:Z=>Z.currentTarget.play(),onMouseLeave:Z=>Z.currentTarget.pause()}):a.jsx(Yg,{src:M.url,alt:M.prompt,priority:index<6,quality:85,format:"auto",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"w-full h-auto object-cover",loading:"lazy"}),D(M.type),M.style&&a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:a.jsx("span",{className:"text-white text-xs font-medium",children:M.style})}),((Oe=M.modeMeta)==null?void 0:Oe.mode)&&a.jsx("div",{className:"absolute bottom-2 left-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:a.jsxs("span",{className:"text-white text-xs font-medium",children:[M.modeMeta.mode==="story"&&" Story",M.modeMeta.mode==="time_machine"&&" Time Machine",M.modeMeta.mode==="restore"&&" Restore"]})}),h&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute bottom-2 left-2 flex items-center space-x-2",children:m?a.jsx(Zd,{size:18,className:"text-white"}):a.jsxs("div",{className:"flex items-center space-x-2 group",children:[a.jsxs("button",{type:"button",onClick:Z=>{Z.stopPropagation(),u==null||u(M.userId)},className:"relative w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",title:`View ${M.userUsername||M.userId}'s content`,children:[(()=>{const kt=M.userId===T.id&&typeof T.avatar=="string"?T.avatar:M.userAvatar;return kt?a.jsx("img",{src:kt,alt:"avatar",className:"w-full h-full object-cover"}):a.jsx(Zd,{size:18,className:"text-white"})})(),String(M.userTier||"").toLowerCase()==="contributor"||String(M.userTier||"").toLowerCase()==="creator"?a.jsx("span",{className:"absolute -right-1 -bottom-1 w-3 h-3 rounded-full bg-white text-black text-[9px] flex items-center justify-center",children:""}):null]}),(M.userUsername||M.userId)&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-white text-xs font-medium bg-black/60 backdrop-blur-sm px-2 py-1 rounded",children:M.userUsername||M.userId}),a.jsxs("div",{className:"flex items-center space-x-1",children:[M.visibility==="public"&&a.jsx("span",{className:"text-white/80 text-[10px] bg-green-600/80 px-1.5 py-0.5 rounded text-center font-medium",children:"Public"}),M.allowRemix&&a.jsx("span",{className:"text-white/80 text-[10px] bg-blue-600/80 px-1.5 py-0.5 rounded text-center font-medium",children:"Remix OK"})]})]})]})}),a.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center space-x-2",children:[r&&a.jsx("button",{onClick:Z=>j(()=>r(M),Z),className:"w-8 h-8 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-all duration-200",title:"Download",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-white",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7,10 12,15 17,10"}),a.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),l&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:Z=>j(()=>l(M),Z),className:"w-8 h-8 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-all duration-200",title:"Remix",children:a.jsx(ts,{size:14})}),!g&&a.jsx("span",{className:"text-white/80 text-xs font-medium",children:M.remixCount||0})]}),s&&!y&&a.jsx("button",{onClick:Z=>j(()=>s(M),Z),className:"w-8 h-8 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 btn-optimized",title:"Share",children:a.jsx(pc,{size:14,className:"text-white"})}),o&&!S&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:Z=>j(()=>o(M),Z),className:"w-8 h-8 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 btn-optimized",title:"Like",children:a.jsx(si,{size:14,className:p?"text-red-500 fill-red-500":"text-white"})}),a.jsx("span",{className:"text-white/80 text-xs font-medium",children:M.likes||0})]}),c&&a.jsx("button",{onClick:Z=>j(()=>c(M),Z),className:"w-8 h-8 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-all duration-200",title:"Delete",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-white",children:[a.jsx("polyline",{points:"3,6 5,6 21,6"}),a.jsx("path",{d:"M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})})]})]})]})},M.id)})},G))})})};class eP{constructor(){ve(this,"baseUrl","/.netlify/functions")}async toggleLike(e){try{const n=F.getToken();if(!n)return{success:!1,action:"error",error:"Sign in to like"};const r=await fetch(`${this.baseUrl}/toggleLike`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({asset_id:e})});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.error||"Failed to toggle like")}const s=await r.json();return{success:!!s.ok,action:s.liked?"liked":"unliked",likeCount:s.likes_count,isLiked:s.liked}}catch(n){return console.error("Toggle like error:",n),{success:!1,action:"error",error:n instanceof Error?n.message:"Unknown error"}}}async recordShare(e,n="public"){try{const r=F.getToken();if(!r)return{success:!1,action:"error",error:"Sign in to change visibility"};const s=await fetch(`${this.baseUrl}/recordShare`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({asset_id:e,shareToFeed:n==="public"})});if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(o.error||"Failed to record share")}const i=await s.json();return{success:!0,action:"shared",shareCount:1}}catch(r){return console.error("Record share error:",r),{success:!1,action:"error",error:r instanceof Error?r.message:"Unknown error"}}}async getInteractionCounts(e){try{return{likes:0,remixes:0,shares:0}}catch(n){return console.error("Get interaction counts error:",n),{likes:0,remixes:0,shares:0}}}async getUserInteractions(e){try{return{hasLiked:!1,hasRemixed:!1,hasShared:!1}}catch(n){return console.error("Get user interactions error:",n),{hasLiked:!1,hasRemixed:!1,hasShared:!1}}}updateLocalCounts(e,n,r,s){const i={...s};return n==="like"?r==="add"?i[`${e}_likes`]=(i[`${e}_likes`]||0)+1:i[`${e}_likes`]=Math.max(0,(i[`${e}_likes`]||0)-1):n==="share"?r==="add"&&(i[`${e}_shares`]=(i[`${e}_shares`]||0)+1):n==="remix"&&r==="add"&&(i[`${e}_remixes`]=(i[`${e}_remixes`]||0)+1),i}}const tP=new eP;class nP{constructor(){ve(this,"notifications",[]);ve(this,"settings",{likes:!0,remixes:!0,announcements:!0,system:!0,emailNotifications:!1,pushNotifications:!1})}async getUserNotifications(e){return this.notifications.filter(n=>n.userId===e)}async getUnreadCount(e){return(await this.getUserNotifications(e)).filter(r=>!r.read).length}async markAsRead(e){const n=this.notifications.find(r=>r.id===e);n&&(n.read=!0)}async markAllAsRead(e){this.notifications.filter(r=>r.userId===e).forEach(r=>r.read=!0)}async createNotification(e){const n={...e,id:this.generateId(),timestamp:new Date,read:!1};return this.shouldShowNotification(n)&&(this.notifications.push(n),this.settings.pushNotifications&&this.showToastNotification(n)),n}async createLikeNotification(e,n,r){return this.createNotification({type:"like",title:"New Like",message:`${r} liked your content`,userId:e,relatedContentId:n,priority:"low"})}async createRemixNotification(e,n,r){return this.createNotification({type:"remix",title:"New Remix",message:`${r} remixed your content`,userId:e,relatedContentId:n,priority:"medium"})}async createAnnouncementNotification(e,n,r){return this.createNotification({type:"announcement",title:n,message:r,userId:e,priority:"high"})}async createSystemNotification(e,n,r){return this.createNotification({type:"system",title:n,message:r,userId:e,priority:"medium"})}shouldShowNotification(e){switch(e.type){case"like":return this.settings.likes;case"remix":return this.settings.remixes;case"announcement":return this.settings.announcements;case"system":return this.settings.system;default:return!0}}showToastNotification(e){console.log("Toast notification:",e.title,e.message)}async getSettings(){return this.settings}async updateSettings(e){this.settings={...this.settings,...e}}async deleteNotification(e){this.notifications=this.notifications.filter(n=>n.id!==e)}async clearAllNotifications(e){this.notifications=this.notifications.filter(n=>n.userId!==e)}generateId(){return Math.random().toString(36).substr(2,9)}async getNotificationsByType(e,n){return(await this.getUserNotifications(e)).filter(s=>s.type===n)}async getRecentNotifications(e){const n=await this.getUserNotifications(e),r=new Date;return r.setDate(r.getDate()-7),n.filter(s=>s.timestamp>r)}}const Ba=new nP,rP=({userId:t,className:e=""})=>{const[n,r]=w.useState([]),[s,i]=w.useState(0),[o,l]=w.useState(!1),[c,u]=w.useState(!1);w.useEffect(()=>{d()},[t]),w.useEffect(()=>{const g=()=>l(!1);return window.addEventListener("global-nav-close",g),()=>window.removeEventListener("global-nav-close",g)},[]);const d=async()=>{u(!0);try{const g=await Ba.getUserNotifications(t),m=await Ba.getUnreadCount(t);r(g),i(m)}catch(g){console.error("Error loading notifications:",g)}finally{u(!1)}},h=async g=>{try{await Ba.markAsRead(g),await d()}catch(m){console.error("Error marking notification as read:",m)}},f=async g=>{try{await Ba.deleteNotification(g),await d()}catch(m){console.error("Error deleting notification:",m)}},p=()=>{l(!o)},v=g=>{switch(g){case"success":return"";case"warning":return"";case"error":return"";case"info":return"";default:return""}},x=g=>{switch(g){case"success":return"text-green-400";case"warning":return"text-yellow-400";case"error":return"text-red-400";case"info":return"text-blue-400";default:return"text-white"}},k=g=>{const m=new Date(g),S=(new Date().getTime()-m.getTime())/(1e3*60*60);return S<1?"Just now":S<24?`${Math.floor(S)}h ago`:S<48?"Yesterday":g.toLocaleDateString()};return a.jsxs("div",{className:`relative ${e}`,children:[a.jsxs("button",{onClick:p,className:"nav-icon text-white hover:text-white/80 transition-colors duration-300",title:"Notifications","aria-expanded":o,"aria-haspopup":"menu",children:[a.jsx(Nd,{size:20,className:"text-white"}),s>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:s>99?"99+":s})]}),o&&a.jsx("div",{className:"absolute right-0 top-full mt-2 w-80 bg-[#222222] border border-white/20 rounded-2xl shadow-2xl z-50",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?a.jsx("div",{className:"p-4 text-center text-white/60",children:"Loading notifications..."}):n.length===0?a.jsx("div",{className:"p-4 text-center text-white/60",children:"No notifications yet"}):a.jsx("div",{className:"space-y-1",children:n.map(g=>a.jsx("div",{className:`p-3 hover:bg-white/5 transition-colors ${g.read?"":"bg-white/5"}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"text-lg",children:v(g.type)}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`text-sm font-medium ${x(g.type)}`,children:g.title}),a.jsx("p",{className:"text-xs text-white/60 mt-1",children:g.message}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:k(g.timestamp)})]}),a.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!g.read&&a.jsx("button",{onClick:()=>h(g.id),className:"p-1 text-white/40 hover:text-white transition-colors",title:"Mark as read",children:a.jsx(FS,{size:12})}),a.jsx("button",{onClick:()=>f(g.id),className:"p-1 text-white/40 hover:text-red-400 transition-colors",title:"Delete notification",children:a.jsx(q0,{size:12})})]})]})})]})},g.id))})})}),o&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})},_u={cinematic_glow:{id:"cinematic_glow",name:"Cinematic Glow",tag:"Cinematic",prompt:"Enhance this image/video with cinematic color grading, warm highlights, deep shadows, and rich blacks. Add a subtle teal-orange tone balance. Keep faces natural.",negative_prompt:"flat, dull, oversaturated, harsh lighting",strength:.75,description:"Professional cinematic look with teal-orange balance",category:"cinematic"},bright_airy:{id:"bright_airy",name:"Bright & Airy",tag:"Minimalist",prompt:"Edit with a clean, airy stylesoft lighting, pastel tones, balanced whites, and gentle shadows. Perfect for lifestyle, wellness, and yoga shots.",negative_prompt:"dark, moody, harsh contrast, oversaturated",strength:.65,description:"Clean, minimal aesthetic perfect for lifestyle content",category:"minimalist"},vivid_pop:{id:"vivid_pop",name:"Vivid Pop",tag:"Vibrant",prompt:"Make colors vibrant and saturated while keeping skin tones realistic. Enhance clarity and add slight contrast for a punchy, Instagram-ready look.",negative_prompt:"muted, dull, flat, desaturated",strength:.7,description:"Bold, vibrant colors perfect for social media",category:"vibrant"},vintage_film_35mm:{id:"vintage_film_35mm",name:"Vintage Film 35mm",tag:"Vintage",prompt:"Add a retro 35mm film look with warm faded tones, subtle grain, and soft shadows. Keep details sharp but with a nostalgic mood.",negative_prompt:"digital, sharp, modern, oversaturated",strength:.75,description:"Classic film aesthetic with warm, nostalgic tones",category:"vintage"},tropical_boost:{id:"tropical_boost",name:"Tropical Boost",tag:"Travel",prompt:"Boost blues, greens, and warm tones for a tropical, sunny feel. Slight HDR for landscapes, keep people looking natural.",negative_prompt:"cold, muted, dull, flat lighting",strength:.7,description:"Tropical paradise colors perfect for travel photos",category:"travel"},urban_grit:{id:"urban_grit",name:"Urban Grit",tag:"Urban",prompt:"Apply desaturated blues, deep contrast, and crisp details. Keep shadows strong and highlights clean for an urban city aesthetic.",negative_prompt:"bright, colorful, soft, pastel",strength:.75,description:"Urban city aesthetic with gritty, modern feel",category:"urban"},mono_drama:{id:"mono_drama",name:"Mono Drama",tag:"Black & White",prompt:"Convert to black and white with strong contrast, bright highlights, and detailed textures. Ideal for close-up portraits or moody street scenes.",negative_prompt:"color, flat, low contrast, blurry",strength:.8,description:"Dramatic black and white with strong contrast",category:"black_white"},dreamy_pastels:{id:"dreamy_pastels",name:"Dreamy Pastels",tag:"Soft",prompt:"Add soft-focus effect, pastel colors, and warm highlights for a dreamy, romantic vibe. Keep details smooth and flattering.",negative_prompt:"sharp, harsh, dark, oversaturated",strength:.65,description:"Soft, dreamy aesthetic perfect for romantic content",category:"soft"},golden_hour_magic:{id:"golden_hour_magic",name:"Golden Hour Magic",tag:"Warm",prompt:"Simulate golden hour lightingwarm tones, glowing highlights, and soft shadows. Perfect for portraits and sunsets.",negative_prompt:"cold, blue, harsh, flat lighting",strength:.7,description:"Warm golden hour lighting simulation",category:"warm"},high_fashion_editorial:{id:"high_fashion_editorial",name:"High Fashion Editorial",tag:"Editorial",prompt:"Sleek desaturated tones with strong contrast, minimal noise, and smooth skin retouching. Magazine cover quality.",negative_prompt:"colorful, soft, blurry, amateur",strength:.75,description:"Professional editorial look for fashion content",category:"editorial"},moody_forest:{id:"moody_forest",name:"Moody Forest",tag:"Nature",prompt:"Deep green tones, soft diffused light, and light fog overlay for a moody forest atmosphere.",negative_prompt:"bright, sunny, colorful, harsh lighting",strength:.7,description:"Moody forest atmosphere with deep greens",category:"nature"},desert_glow:{id:"desert_glow",name:"Desert Glow",tag:"Travel",prompt:"Warm sandy tones, golden highlights, and gentle texture enhancement for desert and dune scenes.",negative_prompt:"cold, blue, wet, lush",strength:.7,description:"Warm desert tones perfect for landscape photography",category:"travel"},retro_polaroid:{id:"retro_polaroid",name:"Retro Polaroid",tag:"Vintage",prompt:"Add warm faded tones, soft focus, and subtle frame edge blur for a retro instant camera feel.",negative_prompt:"sharp, digital, modern, clear",strength:.7,description:"Retro Polaroid instant camera aesthetic",category:"vintage"},crystal_clear:{id:"crystal_clear",name:"Crystal Clear",tag:"Clarity",prompt:"Enhance sharpness, remove haze, and boost clarity while keeping colors true to life.",negative_prompt:"blurry, hazy, soft, distorted",strength:.65,description:"Maximum clarity and sharpness enhancement",category:"minimalist"},ocean_breeze:{id:"ocean_breeze",name:"Ocean Breeze",tag:"Travel",prompt:"Bright blues, soft whites, and airy highlights for a clean, coastal feel.",negative_prompt:"dark, moody, warm, inland",strength:.65,description:"Clean coastal aesthetic with ocean blues",category:"travel"},festival_vibes:{id:"festival_vibes",name:"Festival Vibes",tag:"Vibrant",prompt:"Rich saturated colors, warm highlights, and slight vignette for lively festival and street party scenes.",negative_prompt:"muted, dull, dark, serious",strength:.75,description:"Vibrant festival atmosphere with rich colors",category:"vibrant"},noir_classic:{id:"noir_classic",name:"Noir Classic",tag:"Black & White",prompt:"High-contrast black and white with sharp detail, deep blacks, and a timeless cinematic mood.",negative_prompt:"color, soft, low contrast, bright",strength:.8,description:"Classic film noir with high contrast",category:"black_white"},sun_kissed:{id:"sun_kissed",name:"Sun-Kissed",tag:"Warm",prompt:"Golden warmth, soft shadows, and glowing skin tones for outdoor sunlit photos.",negative_prompt:"cold, dark, indoor, artificial lighting",strength:.7,description:"Natural sunlit warmth for outdoor photography",category:"warm"},frost_light:{id:"frost_light",name:"Frost & Light",tag:"Cool",prompt:"Cool blues and crisp whites for winter and mountain scenes, enhancing snow textures.",negative_prompt:"warm, dark, summer, tropical",strength:.7,description:"Cool winter aesthetic with enhanced snow textures",category:"cool"},neon_nights:{id:"neon_nights",name:"Neon Nights",tag:"Urban",prompt:"Vivid neon colors, deep blacks, and sharp clarity for night city scenes.",negative_prompt:"daytime, natural, muted, soft",strength:.75,description:"Vibrant neon night city aesthetic",category:"urban"},cultural_glow:{id:"cultural_glow",name:"Cultural Glow",tag:"Travel",prompt:"Enhance traditional fabrics, patterns, and natural light to showcase cultural richness.",negative_prompt:"modern, artificial, dull, flat",strength:.7,description:"Cultural heritage enhancement with natural lighting",category:"travel"},soft_skin_portrait:{id:"soft_skin_portrait",name:"Soft Skin Portrait",tag:"Portrait",prompt:"Smooth skin tones, natural color correction, and soft background blur for professional portraits.",negative_prompt:"harsh, rough, oversaturated, blurry",strength:.65,description:"Professional portrait with smooth skin enhancement",category:"portrait"},rainy_day_mood:{id:"rainy_day_mood",name:"Rainy Day Mood",tag:"Moody",prompt:"Cool tones, soft reflections, and subtle raindrop texture for rainy street or nature scenes.",negative_prompt:"sunny, warm, dry, bright",strength:.7,description:"Moody rainy day atmosphere with cool tones",category:"moody"},wildlife_focus:{id:"wildlife_focus",name:"Wildlife Focus",tag:"Nature",prompt:"Enhance fur, feathers, or scales with natural tones and sharp detail, keeping background slightly blurred.",negative_prompt:"blurry, artificial, oversaturated, harsh",strength:.75,description:"Wildlife photography with enhanced natural details",category:"nature"},street_story:{id:"street_story",name:"Street Story",tag:"Urban",prompt:"High contrast, rich shadows, and enhanced textures for documentary-style street photography.",negative_prompt:"soft, bright, colorful, artificial",strength:.75,description:"Documentary street photography aesthetic",category:"urban"}};class sP{constructor(){ve(this,"STORAGE_KEY","stefna_preset_rotation");ve(this,"USAGE_STORAGE_KEY","stefna_preset_usage");ve(this,"DEFAULT_CONFIG",{totalPresets:6,retentionCount:3,rotationDay:"monday",rotationTime:"00:00"})}getRotationConfig(){const e=localStorage.getItem(this.STORAGE_KEY);if(e)try{return{...this.DEFAULT_CONFIG,...JSON.parse(e)}}catch{return this.DEFAULT_CONFIG}return this.DEFAULT_CONFIG}getPresetUsage(){const e=localStorage.getItem(this.USAGE_STORAGE_KEY);if(e)try{return JSON.parse(e)}catch{return{}}return{}}savePresetUsage(e){localStorage.setItem(this.USAGE_STORAGE_KEY,JSON.stringify(e))}shouldRotate(){const e=this.getRotationConfig(),n=new Date,r=n.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),s=n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});if(r===e.rotationDay&&s===e.rotationTime){const i=localStorage.getItem("stefna_last_rotation"),o=n.toDateString();if(i!==o)return localStorage.setItem("stefna_last_rotation",o),!0}return!1}getActivePresets(){try{const e=this.getRotationConfig(),n=this.getPresetUsage();this.shouldRotate()&&this.performRotation();const r=this.getStoredActivePresets();if(!r||r.length===0)return console.log(" No active presets found, generating initial rotation..."),this.generateNewRotation();const s=r.map(i=>_u[i]).filter(Boolean);return console.log(` Returning ${s.length} active presets`),s}catch(e){return console.error(" Error getting active presets:",e),console.log(" Falling back to random preset selection"),this.getRandomPresets(6)}}generateNewRotation(){try{const e=this.getRotationConfig(),n=this.getPresetUsage(),r=Object.values(_u).sort((c,u)=>{var f,p;const d=((f=n[c.id])==null?void 0:f.usageCount)||0;return(((p=n[u.id])==null?void 0:p.usageCount)||0)-d}),s=r.slice(0,e.retentionCount),i=r.slice(e.retentionCount),o=this.shuffleArray(i).slice(0,e.totalPresets-e.retentionCount),l=[...s,...o];return this.storeActivePresets(l.map(c=>c.id)),l}catch(e){return console.error(" Error generating new rotation:",e),this.getRandomPresets(6)}}performRotation(){console.log(" Performing preset rotation...");const e=this.generateNewRotation();console.log(" New preset rotation:",e.map(n=>n.name))}storeActivePresets(e){localStorage.setItem("stefna_active_presets",JSON.stringify(e))}getStoredActivePresets(){const e=localStorage.getItem("stefna_active_presets");if(e)try{return JSON.parse(e)}catch{return[]}return[]}trackPresetUsage(e){const n=this.getPresetUsage(),r=new Date;if(n[e])n[e].usageCount+=1,n[e].lastUsed=r;else{const s=_u[e];s&&(n[e]={presetId:e,usageCount:1,lastUsed:r,category:s.category})}this.savePresetUsage(n)}getPresetStats(){const e=this.getPresetUsage(),n=Object.values(e),r=n.reduce((l,c)=>l+c.usageCount,0),s=[...n].sort((l,c)=>c.usageCount-l.usageCount).slice(0,5),i=[...n].sort((l,c)=>l.usageCount-c.usageCount).slice(0,5),o={};return n.forEach(l=>{o[l.category]=(o[l.category]||0)+l.usageCount}),{totalUsage:r,mostUsed:s,leastUsed:i,categoryStats:o}}shuffleArray(e){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}forceRotation(){console.log(" Forcing preset rotation..."),this.performRotation()}getNextRotationTime(){const e=this.getRotationConfig(),n=new Date,r=n.getDay();let i=(this.getDayNumber(e.rotationDay)-r+7)%7;i===0&&n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})>=e.rotationTime&&(i=7);const o=new Date(n);return o.setDate(n.getDate()+i),o.setHours(parseInt(e.rotationTime.split(":")[0]),parseInt(e.rotationTime.split(":")[1]),0,0),o}getDayNumber(e){return{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[e.toLowerCase()]||0}clearAllData(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.USAGE_STORAGE_KEY),localStorage.removeItem("stefna_active_presets"),localStorage.removeItem("stefna_last_rotation"),console.log(" Cleared all preset rotation data")}}const Ax=new sP;function Hf(){return Ax.getActivePresets()}const iP=(()=>{const t=Hf(),e={};return t.forEach(n=>{e[n.id]=n.prompt}),e})(),oP=(()=>{const t=Hf(),e={};return t.forEach(n=>{e[n.id]=`${n.prompt}, smooth motion, cinematic timing, enhanced video quality`}),e})();function aP(t){return(typeof t=="string"?t:(t==null?void 0:t.slug)||(t==null?void 0:t.label)||"").trim().toLowerCase().replace(/\s+/g,"_")}function lP(t,e=!1,n="stylize, preserve subject and composition"){const r=aP(t),i=(e?oP:iP)[r];return console.log(" Preset lookup:",{input:t,slug:r,isVideo:e,found:!!i,prompt:i||n}),i||n}const se=(()=>{const t=Hf(),e={};return t.forEach(n=>{e[n.id]={label:n.name,prompt:n.prompt,negative_prompt:n.negative_prompt||"blurry, low quality, distorted",strength:n.strength,description:n.description}}),e})();class cP{constructor(){ve(this,"hashtagTemplates",{instagram:["#AIArt","#DigitalArt","#CreativeAI","#StefnaApp","#AIPhotography","#AiAsABrush","#ArtisticAI","#CreativeProcess","#DigitalCreation","#AIGenerated","#ModernArt","#TechArt","#Innovation","#Creativity","#ArtCommunity"],x:["#AIArt","#DigitalArt","#CreativeAI","#StefnaApp","#AIPhotography","#AiAsABrush","#ArtisticAI","#CreativeProcess","#DigitalCreation","#AIGenerated"],whatsapp:["#AIArt","#DigitalArt","#CreativeAI","#StefnaApp","#AIPhotography","#AiAsABrush"],telegram:["#AIArt","#DigitalArt","#CreativeAI","#StefnaApp","#AIPhotography","#AiAsABrush"],tiktok:["#AIArt","#DigitalArt","#CreativeAI","#StefnaApp","#AIPhotography","#AiAsABrush","#ArtisticAI","#CreativeProcess","#DigitalCreation","#AIGenerated","#FYP","#Trending","#Viral","#Creative","#Art"]});ve(this,"captionTemplates",{casual:["Just created this with AI!","AI magic at work! What do you think?","Stefna made this possible! AI art is incredible","From photo to art in seconds! AI is wild","This AI filter is everything!"],professional:["Exploring the intersection of photography and AI-generated art.","AI-enhanced photography: pushing creative boundaries.","Digital transformation through AI-powered artistic filters.","Innovative approach to visual storytelling with AI.","Bridging traditional photography with AI-generated aesthetics."],trendy:["This AI filter is giving main character energy","Stefna really said 'let's make art' and I'm here for it","AI art is the future and the future is now!","This prompt is everything! AI creativity is unmatched","Who else is obsessed with AI-generated art?"],artistic:["Where technology meets creativity","AI as a brush, imagination as the canvas","Digital alchemy: transforming reality through AI","The future of artistic expression is here","AI-generated art: a new form of human creativity"]})}generateCaption(e){const{prompt:n,platform:r,style:s}=e,i=this.generateBaseCaption(n,s),o=this.generateHashtags(n,r);return{caption:this.formatCaption(i,o,r),captionText:i,hashtags:o,platform:r,style:s}}generateBaseCaption(e,n){const r=this.captionTemplates[n]||this.captionTemplates.casual,s=r[Math.floor(Math.random()*r.length)],i=this.extractStyleKeywords(e);return i.length>0?`${s}

Applied: ${i.join(", ")}`:s}extractStyleKeywords(e){const n=[],r=e.toLowerCase();return r.includes("anime")&&n.push("Anime Style"),r.includes("oil painting")&&n.push("Oil Painting"),r.includes("watercolor")&&n.push("Watercolor"),r.includes("cyberpunk")&&n.push("Cyberpunk"),r.includes("vintage")&&n.push("Vintage"),r.includes("fantasy")&&n.push("Fantasy"),r.includes("artistic")&&n.push("Artistic"),r.includes("sci-fi")&&n.push("Sci-Fi"),n}generateHashtags(e,n){const r=this.hashtagTemplates[n]||this.hashtagTemplates.instagram,s=this.getStyleHashtags(e),i=[...r,...s],o=i.includes("#AiAsABrush")?i:["#AiAsABrush",...i],l=n==="instagram"?15:n==="x"?8:10;return o.slice(0,l)}getStyleHashtags(e){const n=e.toLowerCase(),r=[];return n.includes("anime")&&r.push("#AnimeArt","#AnimeStyle"),n.includes("oil painting")&&r.push("#OilPainting","#ClassicalArt"),n.includes("watercolor")&&r.push("#Watercolor","#SoftArt"),n.includes("cyberpunk")&&r.push("#Cyberpunk","#Futuristic"),n.includes("vintage")&&r.push("#Vintage","#Retro"),n.includes("fantasy")&&r.push("#Fantasy","#Magical"),n.includes("artistic")&&r.push("#Artistic","#Creative"),n.includes("sci-fi")&&r.push("#SciFi","#Futuristic"),r}formatCaption(e,n,r){const s=n.join(" ");switch(r){case"instagram":return`${e}

${s}`;case"x":return`${e}

${n.slice(0,5).join(" ")}`;case"tiktok":return`${e}

${s}`;default:return`${e}

${s}`}}generateMultipleCaptions(e){return["casual","professional","trendy","artistic"].map(r=>this.generateCaption({...e,style:r}))}}const uP=new cP,qg=t=>{let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const f=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,f))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,l);return l},dP=t=>t?qg(t):qg,hP=t=>t;function fP(t,e=hP){const n=Os.useSyncExternalStore(t.subscribe,Os.useCallback(()=>e(t.getState()),[t,e]),Os.useCallback(()=>e(t.getInitialState()),[t,e]));return Os.useDebugValue(n),n}const Kg=t=>{const e=dP(t),n=r=>fP(e,r);return Object.assign(n,e),n},pP=t=>t?Kg(t):Kg;let gl=null;const mP=new Promise(t=>gl=t),Dn=pP((t,e)=>({byId:{},status:"idle",load:async()=>{const n=e().status;if(!(n==="ready"||n==="loading")){t({status:"loading"});try{const r=Object.entries(se),s={};for(const[i,o]of r)s[i]=o;t({byId:s,status:"ready"}),gl==null||gl(),console.log(" Presets loaded and ready:",Object.keys(s).length)}catch(r){console.error(" Failed to load presets:",r),t({status:"error"})}}},ready:()=>mP}));async function gP(t,e={}){const n=F.getToken();if(!n)throw new Error("No authentication token available");let r=await fetch(t,{...e,headers:{...e.headers,Authorization:`Bearer ${n}`}});if(r.status===401){console.log(" Auth token expired, attempting refresh...");try{const s=await yP();s&&(r=await fetch(t,{...e,headers:{...e.headers,Authorization:`Bearer ${s}`}}))}catch(s){throw console.error(" Token refresh failed:",s),window.location.href="/auth",new Error("Authentication failed")}}return r}async function yP(){try{const t=F.getToken();return t?(await fetch("/.netlify/functions/whoami",{headers:{Authorization:`Bearer ${t}`}})).ok?t:(F.clearAuth(),null):null}catch(t){return console.error("Token validation failed:",t),F.clearAuth(),null}}class Gf{constructor(){ve(this,"context",{})}child(e){const n=new Gf;return n.context={...this.context,...e},n}setContext(e){this.context={...this.context,...e}}clearContext(){this.context={}}formatMessage(e,n,r){const s=new Date().toISOString(),i=Object.keys(this.context).length>0?` [${Object.entries(this.context).map(([l,c])=>`${l}:${c}`).join(", ")}]`:"",o=`${s} ${e}${i} ${n}`;r?console.log(o,r):console.log(o)}info(e,n){this.formatMessage("INFO",e,n)}warn(e,n){this.formatMessage("WARN",e,n)}error(e,n){this.formatMessage("ERROR",e,n)}debug(e,n){}generationStart(e,n,r){return this.child({runId:e,step:"start",mode:n,presetId:r})}generationStep(e){return this.child({...this.context,step:e})}generationComplete(e,n){this.info(`Generation ${e?"completed":"failed"}`,{duration:n?`${n}ms`:void 0})}}const yi=new Gf,ju=new Map,vP=1e3;function wP(t,e=vP){const n=Date.now(),r=ju.get(t);return r&&n-r<e?(yi.warn("Duplicate operation prevented",{operationKey:t,timeSinceLastMs:n-r,cooldownMs:e}),!1):(ju.set(t,n),setTimeout(()=>{ju.delete(t)},e*2),!0)}let Yl=navigator.onLine,bo=[];window.addEventListener("online",()=>{Yl=!0,yi.info("Network connection restored"),bo.forEach(t=>t(!0))});window.addEventListener("offline",()=>{Yl=!1,yi.warn("Network connection lost"),bo.forEach(t=>t(!1))});const xP={isOnline:()=>Yl,onNetworkChange:t=>(bo.push(t),()=>{bo=bo.filter(e=>e!==t)}),requireOnline:t=>Yl?!0:(yi.error("Operation requires network connection",{operationName:t}),window.dispatchEvent(new CustomEvent("network-required",{detail:{operationName:t}})),!1)},bP=t=>typeof t=="object"&&t!==null&&"size"in t&&"type"in t;let jt={busy:!1,currentRunId:null,activeRuns:new Map};const js={getState:()=>jt,setBusy:t=>{jt.busy=t,window.dispatchEvent(new CustomEvent("ui-state-change",{detail:jt}))},setCurrentRunId:t=>{jt.currentRunId=t},registerActiveRun:(t,e)=>{jt.activeRuns.set(t,{runId:t,controller:e,timestamp:Date.now()})},unregisterActiveRun:t=>{jt.activeRuns.delete(t)},abortAllActiveRuns:()=>{console.log(` Aborting ${jt.activeRuns.size} active runs`),jt.activeRuns.forEach(({controller:t})=>{t.abort("Navigation or unmount")}),jt.activeRuns.clear(),jt.busy=!1,jt.currentRunId=null},abortStaleRuns:(t=3e5)=>{const e=Date.now();Array.from(jt.activeRuns.entries()).filter(([,r])=>e-r.timestamp>t).forEach(([r,s])=>{console.warn(` Aborting stale run: ${r}`),s.controller.abort("Stale run cleanup"),jt.activeRuns.delete(r)})}},kP={getState:()=>({hasCredit:()=>!0})};let Wa=null;async function Yf(t){var o,l;const e=`generation-${Date.now()}`;if(!wP(e)||!xP.requireOnline("generation"))return null;const n=crypto.randomUUID(),r=new AbortController,s=Date.now(),i=yi.generationStart(n,"unknown","unknown");Wa=n,js.setBusy(!0),js.setCurrentRunId(n),js.registerActiveRun(n,r),i.info("Generation started");try{const c=i.generationStep("preflight");if(await Dn.getState().ready(),r.signal.aborted)return null;const u=await t();if(!u||r.signal.aborted)return null;const d=yi.child({runId:n,mode:u.mode,presetId:u.presetId}),{presetId:h,prompt:f}=u;if(!h||!f)return d.error("Missing required fields",{presetId:!!h,prompt:!!f}),Ji("Preset or prompt missing",n),null;if(!!!Dn.getState().byId[h])return d.error("Preset not available",{presetId:h}),Ji("This style is temporarily unavailable",n),null;if(kP.getState().hasCredit(),r.signal.aborted)return null;d.info("Preflight checks passed");const v=d.generationStep("upload");let x;if(bP((o=u.source)==null?void 0:o.file))try{v.info("Starting file upload",{fileName:u.source.file.name,fileSize:u.source.file.size}),x=await Ex(u.source.file,{signal:r.signal}),v.info("Upload completed",{sourceUrl:x})}catch(S){return r.signal.aborted||(v.error("Upload failed",{error:S instanceof Error?S.message:S}),Ji("Upload failed: "+(S instanceof Error?S.message:"Unknown error"),n)),null}else if(typeof((l=u.source)==null?void 0:l.url)=="string"&&u.source.url)x=u.source.url,v.info("Using provided URL",{sourceUrl:x});else return v.error("No valid source found",{source:u.source}),Ji("No source image found",n),null;if(r.signal.aborted)return null;const k=d.generationStep("api_call"),g={...u,source:x?{url:x}:void 0,runId:n};k.info("Calling AIML API",{hasSource:!!x});const m=await SP(g,{signal:r.signal});k.info("API call completed",{success:m.success}),!r.signal.aborted&&Wa===n&&d.generationStep("save").info("Generation result processed");const y=Date.now()-s;return d.generationComplete(m.success,y),m}catch(c){if(r.signal.aborted)return i.info("Generation cancelled by user"),null;const u=(c==null?void 0:c.message)||"Generation failed";return i.error("Generation failed",{error:u,stack:c==null?void 0:c.stack}),Ji(u,n),null}finally{Wa===n&&(js.setBusy(!1),js.setCurrentRunId(null),Wa=null),js.unregisterActiveRun(n);const c=Date.now()-s;i.info("Generation pipeline completed",{duration:`${c}ms`})}}async function SP(t,e){var n;try{const r=await gP("/.netlify/functions/aimlApi",{method:"POST",headers:{"Content-Type":"application/json"},signal:e==null?void 0:e.signal,body:JSON.stringify({...t.params,prompt:t.prompt,image_url:(n=t.source)==null?void 0:n.url,mode:t.mode,presetId:t.presetId,runId:t.runId})});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.error||`Generation failed: ${r.status}`)}const s=await r.json();return{success:!0,resultUrl:s.result_url||s.output_url,runId:t.runId,media:s}}catch(r){return console.error(" AIML API error:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error",runId:t.runId}}}const Cu=new Set,_P=3e3;function Ji(t,e){const n=t.toLowerCase().trim();if(Cu.has(n)){console.warn(` Suppressed duplicate toast: ${t}`);return}Cu.add(n),setTimeout(()=>Cu.delete(n),_P),console.error("",t,e?`[${e}]`:""),window.dispatchEvent(new CustomEvent("generation-error",{detail:{message:t,runId:e,timestamp:Date.now()}}))}function jP(t,e,n){return Yf(async()=>{const r=Dn.getState().byId[t];return r?{mode:"i2i",presetId:t,prompt:r.prompt,params:r.params||{},source:e?{file:e}:n?{url:n}:void 0}:(console.warn(`Preset "${t}" not found`),null)})}const Rx={"1920s_art_deco":"vintage_film_35mm","1930s_golden_age":"cinematic_glow","1940s_wartime":"mono_drama","1950s_americana":"retro_polaroid","1960s_psychedelic":"vivid_pop","1960s_kodachrome":"retro_polaroid","1970s_disco":"neon_nights","1980s_neon":"neon_nights","1990s_grunge":"urban_grit","2000s_y2k":"crystal_clear","2010s_hipster":"retro_polaroid","2020s_minimalist":"bright_airy","2100_cyberpunk":"neon_nights",roaring_twenties:"vintage_film_35mm",great_depression:"mono_drama",golden_fifties:"retro_polaroid",swinging_sixties:"vivid_pop",groovy_seventies:"golden_hour_magic",radical_eighties:"neon_nights",grunge_nineties:"urban_grit",digital_2000s:"crystal_clear",social_2010s:"retro_polaroid",streaming_2020s:"bright_airy",cyber_future:"neon_nights",art_nouveau:"vintage_film_35mm",bauhaus:"mono_drama",pop_art:"vivid_pop",minimalism:"bright_airy",punk_rock:"urban_grit",new_wave:"neon_nights",grunge_movement:"urban_grit",indie_aesthetic:"retro_polaroid",hipster_culture:"vintage_film_35mm",victorian_era:"vintage_film_35mm",jazz_age:"cinematic_glow",atomic_age:"retro_polaroid",space_age:"crystal_clear",information_age:"bright_airy",digital_age:"crystal_clear",social_media_age:"vivid_pop",impressionism:"dreamy_pastels",expressionism:"mono_drama",surrealism:"dreamy_pastels",abstract_expressionism:"vivid_pop",pop_art_movement:"vivid_pop",street_art:"urban_grit",digital_art:"crystal_clear"},CP={enhance_details:"crystal_clear",fix_colors:"vivid_pop",remove_noise:"crystal_clear",sharpen_focus:"crystal_clear",restore_vintage:"vintage_film_35mm",brighten_shadows:"vivid_pop"};function Jg(t,e,n){return Yf(async()=>{const r=Rx[t];if(!r)return console.warn(`Option "${t}" not configured`),null;const s=Dn.getState().byId[r];return s?{mode:"time_machine",presetId:r,prompt:s.prompt,params:{...s.params,time_machine_option:t},source:e?{file:e}:n?{url:n}:void 0}:(console.warn(`Time Machine "${t}"  missing preset "${r}"`),null)})}const Ix=["cinematic_glow","vivid_pop","bright_airy","tropical_boost","noir_classic","soft_skin_portrait"];async function TP(t,e){console.log(" Starting Story Mode (legacy)...");const n=await Yf(async()=>{await Dn.getState().ready();const{byId:r}=Dn.getState(),s=Ix.filter(o=>r[o]);if(s.length===0)return null;const i=r[s[0]];return{mode:"story",presetId:i.id,prompt:e||i.prompt,params:{sequence:s,story_shot:!0},source:{url:t}}});n!=null&&n.success?console.log("Story Mode complete!"):console.error("Story Mode failed:",n==null?void 0:n.error)}let As={unavailableTimeMachineOptions:new Set,unavailableRestoreOptions:new Set,storyDisabled:!1,validationComplete:!1};const Ha={getState:()=>As,setUnavailableTimeMachineOptions:t=>{As.unavailableTimeMachineOptions=t,Ga()},setUnavailableRestoreOptions:t=>{As.unavailableRestoreOptions=t,Ga()},setStoryDisabled:t=>{As.storyDisabled=t,Ga()},setValidationComplete:t=>{As.validationComplete=t,Ga()}};function Ga(){window.dispatchEvent(new CustomEvent("validation-state-change",{detail:As}))}async function PP(){console.log(" Validating preset mappings..."),await Dn.getState().ready();const{byId:t}=Dn.getState(),e=Object.entries(Rx).filter(([,s])=>!t[s]).map(([s])=>s);Ha.setUnavailableTimeMachineOptions(new Set(e));const n=Object.entries(CP).filter(([,s])=>!t[s]).map(([s])=>s);Ha.setUnavailableRestoreOptions(new Set(n));const r=Ix.filter(s=>!t[s]);Ha.setStoryDisabled(r.length>0),Ha.setValidationComplete(!0),console.log(" Mapping validation complete")}const NP=PP,Ox=({isOpen:t,media:e,startIndex:n=0,onClose:r,onLike:s,onRemix:i,onShowAuth:o})=>{const{profileData:l}=wc(),[c,u]=w.useState(n),d=w.useMemo(()=>e[c],[e,c]),[h,f]=w.useState((d==null?void 0:d.likes)??0),[p,v]=w.useState(!1),[x,k]=w.useState((d==null?void 0:d.remixCount)??0),[g,m]=w.useState("idle");w.useEffect(()=>{var j;d&&console.log(" FullScreenMediaViewer current media:",{id:d.id,prompt:d.prompt,userId:d.userId,type:d.type,hasPrompt:!!d.prompt,promptLength:((j=d.prompt)==null?void 0:j.length)||0})},[d]),w.useEffect(()=>{u(n)},[n]),w.useEffect(()=>{d&&(f(d.likes??0),k(d.remixCount??0))},[d]);const y=()=>{if(!F.isAuthenticated()){o?o():window.location.href="/auth";return}s&&(v(!p),f(p?h-1:h+1),s(d))},S=()=>{if(!F.isAuthenticated()){o?o():window.location.href="/auth";return}i&&(k(x+1),i(d))};if(w.useEffect(()=>{if(!t)return;const j=D=>{D.key==="Escape"&&r(),D.key==="ArrowRight"&&u(I=>(I+1)%e.length),D.key==="ArrowLeft"&&u(I=>(I-1+e.length)%e.length)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[t,e.length,r]),!t||!d)return null;const T=()=>u(j=>(j-1+e.length)%e.length),C=()=>u(j=>(j+1)%e.length),P=new Date(d.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return a.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 w-12 h-12 flex items-center justify-center text-white hover:text-white/80 bg-black/50 rounded-full backdrop-blur-sm z-50","aria-label":"Close viewer",title:"Close",children:a.jsx(tn,{size:24})}),a.jsxs("div",{className:"h-full w-full flex flex-col",children:[a.jsx("div",{className:"bg-black/80 backdrop-blur-sm p-4",children:a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[(()=>{const j=d.userId===l.id,D=j&&l.name?l.name:d.userUsername||d.userId||"Anonymous User",I=j&&typeof l.avatar=="string"?l.avatar:d.userAvatar;return a.jsxs(a.Fragment,{children:[I&&a.jsx("img",{src:I,alt:"avatar",className:"w-6 h-6 rounded-full object-cover"}),a.jsx("span",{className:"text-white text-sm",children:D})]})})(),a.jsx("span",{className:"text-white text-sm",children:""}),a.jsx("span",{className:"text-white text-sm",children:P})]})})}),a.jsxs("div",{className:"flex-1 relative flex flex-col items-center justify-start pt-4",children:[e.length>1&&a.jsx("button",{onClick:T,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white hover:text-white/80","aria-label":"Previous",title:"Previous",children:a.jsx(VS,{size:20})}),a.jsx("div",{className:"max-w-full max-h-full object-contain",children:d.type==="video"?a.jsx("video",{src:d.url,className:"max-w-full max-h-[calc(100vh-200px)] object-contain",controls:!0,autoPlay:!0,muted:!0}):a.jsx("img",{src:d.url,alt:d.prompt,className:"max-w-full max-h-[calc(100vh-200px)] object-contain"})}),e.length>1&&a.jsx("button",{onClick:C,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center text-white hover:text-white/80","aria-label":"Next",title:"Next",children:a.jsx(BS,{size:20})}),a.jsxs("div",{className:"mt-6 text-center max-w-4xl px-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-3 group relative mb-4",children:[a.jsx("span",{className:"text-white/60 text-sm font-medium",children:"Prompt:"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"text-white text-sm max-w-md truncate block",title:d.prompt||"No prompt available",children:d.prompt?d.prompt.length>60?`${d.prompt.substring(0,60)}...`:d.prompt:a.jsx("span",{className:"text-white/40 italic",children:"No prompt available"})}),d.prompt&&d.prompt.length>60&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 p-3 bg-black/90 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-normal max-w-md z-50 border border-white/20",children:d.prompt})]}),d.prompt&&a.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(d.prompt),m("success"),setTimeout(()=>m("idle"),1e3)}catch(j){console.error("Failed to copy prompt:",j);const D=document.createElement("textarea");D.value=d.prompt,document.body.appendChild(D),D.select();try{document.execCommand("copy"),m("success"),setTimeout(()=>m("idle"),1e3)}catch(I){console.error("Fallback copy failed:",I),m("error"),setTimeout(()=>m("idle"),1e3)}document.body.removeChild(D)}},className:"text-white/60 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10",title:"Copy prompt to clipboard",children:g==="success"?a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-green-400",children:a.jsx("polyline",{points:"20,6 9,17 4,12"})}):g==="error"?a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-red-400",children:a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})}):a.jsx(G0,{size:16})})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[a.jsxs("button",{onClick:y,className:"flex flex-col items-center space-y-1 text-white hover:text-white/80 transition-colors",children:[a.jsx(si,{size:16,className:`${p?"text-red-500 fill-red-500":"text-white"}`}),a.jsx("span",{className:"text-xs",children:h>0?h:"Like"})]}),a.jsxs("button",{onClick:S,className:"flex flex-col items-center space-y-1 text-white hover:text-white/80 transition-colors",children:[a.jsx(ts,{size:16,className:"text-white"}),a.jsx("span",{className:"text-xs",children:x>0?x:"Remix"})]})]})]})]})]})]})},EP=({isOpen:t,onClose:e,mediaUrl:n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWExYTFhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjI0Ij5BSSBDcmVhdGlvbiBWaWRlbzwvdGV4dD48L3N2Zz4=",caption:r="Check out my amazing AI creation! #AIasABrush #Stefna",title:s="Share Your Creation"})=>{const[i,o]=w.useState("casual"),[l,c]=w.useState(r),[u,d]=w.useState(!1),[h,f]=w.useState(!1),p=[{id:"instagram",name:"Instagram",icon:JS,color:"#E4405F",gradient:"from-[#E4405F] to-[#F77737]"},{id:"twitter",name:"X",icon:i_,color:"#1DA1F2",gradient:"from-[#1DA1F2] to-[#0D8BD9]"},{id:"facebook",name:"Facebook",icon:YS,color:"#1877F2",gradient:"from-[#1877F2] to-[#0D6EFD]"},{id:"whatsapp",name:"WhatsApp",icon:e_,color:"#25D366",gradient:"from-[#25D366] to-[#128C7E]"},{id:"telegram",name:"Telegram",icon:n_,color:"#0088CC",gradient:"from-[#0088CC] to-[#006699]"}],v=[{id:"casual",name:"Casual",example:"Just created this with AI! "},{id:"professional",name:"Professional",example:"AI-powered creative transformation using Stefna."},{id:"trendy",name:"Trendy",example:"This AI magic is everything!  #Viral"},{id:"artistic",name:"Artistic",example:"Exploring the boundaries of AI creativity "}],x=y=>{const S=`https://stefna.app/share/${Date.now()}`,T=l;let C="";switch(y){case"twitter":C=`https://twitter.com/intent/tweet?text=${encodeURIComponent(T)}&url=${encodeURIComponent(S)}`;break;case"facebook":C=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(S)}`;break;case"whatsapp":C=`https://wa.me/?text=${encodeURIComponent(T+" "+S)}`;break;case"telegram":C=`https://t.me/share/url?url=${encodeURIComponent(S)}&text=${encodeURIComponent(T)}`;break;default:C=S}window.open(C,"_blank","width=600,height=400")},k=async()=>{try{await navigator.clipboard.writeText(l),f(!0),setTimeout(()=>f(!1),2e3)}catch(y){console.error("Failed to copy caption:",y)}},g=()=>{d(!0),setTimeout(()=>{d(!1),alert("Download started!")},1e3)},m=y=>{o(y);const S=v.find(T=>T.id===y);S&&c(S.example)};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative w-full max-w-md bg-white/5 backdrop-blur-md border border-white/20 rounded-t-3xl shadow-2xl",children:[a.jsx("div",{className:"flex justify-center pt-4 pb-2",children:a.jsx("div",{className:"w-12 h-1 bg-white/20 rounded-full"})}),a.jsxs("div",{className:"text-center px-6 py-4 border-b border-white/10",children:[a.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pc,{size:24,className:"text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:s}),a.jsx("p",{className:"text-white/60",children:"Share your creation with the world"})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Your Creation"}),a.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-gradient-to-br from-[#FF6B9D] to-[#00D4FF] flex items-center justify-center border border-white/20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ed,{size:48,className:"text-white mx-auto mb-4"}),a.jsx("p",{className:"text-white font-semibold",children:"Your Creation"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Caption Style"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.map(y=>a.jsxs("button",{onClick:()=>m(y.id),className:`p-3 rounded-lg text-left transition-all duration-300 border ${i===y.id?"border-white/40 bg-white/20 text-white":"border-white/20 bg-white/5 text-white/60 hover:text-white hover:bg-white/10"}`,children:[a.jsx("div",{className:"text-sm font-medium",children:y.name}),a.jsx("div",{className:"text-xs mt-1 opacity-80",children:y.example})]},y.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Custom Caption"}),a.jsx("textarea",{value:l,onChange:y=>c(y.target.value),placeholder:"Write your caption...",className:"w-full h-24 p-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-white/40 resize-none focus:outline-none focus:border-white/40 focus:bg-white/10",rows:3}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsxs("span",{className:"text-xs text-white/40",children:[l.length,"/280 characters"]}),a.jsxs("button",{onClick:k,className:"text-xs text-white/60 hover:text-white transition-colors flex items-center space-x-1",children:[a.jsx(G0,{size:16}),a.jsx("span",{children:h?"Copied!":"Copy"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Share to Platform"}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:p.map(y=>{const S=y.icon;return a.jsxs("button",{onClick:()=>x(y.id),className:"flex flex-col items-center space-y-2 p-3 rounded-lg bg-white/5 border border-white/20 hover:border-white/40 transition-all duration-300",children:[a.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-r ${y.gradient} flex items-center justify-center`,children:a.jsx(S,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs text-white font-medium",children:y.name})]},y.id)})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:g,disabled:u,className:"w-full py-3 rounded-lg font-medium text-sm transition-all duration-300 flex items-center justify-center space-x-2 bg-white text-black hover:bg-white/90",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-black/20 border-t-black rounded-full animate-spin"}),a.jsx("span",{children:"Downloading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(GS,{size:16}),a.jsx("span",{children:"Download"})]})}),a.jsx("button",{onClick:e,className:"w-full py-3 rounded-lg font-medium text-sm transition-all duration-300 flex items-center justify-center space-x-2 bg-white/5 text-white hover:bg-white/10",children:a.jsx("span",{children:"Close"})})]})]})]})]}):null};function AP(t){const e=!!(t&&t.userInitiated===!0);return console.info(` requireUserIntent: ${e?"ALLOW":"BLOCK"}`,t),!e}const qr=class qr{constructor(){ve(this,"mediaStorage",new Map);ve(this,"likesIndex",new Map);this.loadFromStorage()}static getInstance(){return qr.instance||(qr.instance=new qr),qr.instance}async saveMedia(e,n){const r={...e,id:this.generateId(),timestamp:new Date().toISOString(),likes:0,remixCount:0,isPublic:(n==null?void 0:n.shareToFeed)??e.isPublic,allowRemix:(n==null?void 0:n.allowRemix)??e.allowRemix,expiresAt:e.userId.startsWith("guest-")?new Date(Date.now()+1728e5).toISOString():void 0},s=this.mediaStorage.get(e.userId)||[];return s.unshift(r),this.mediaStorage.set(e.userId,s),await this.saveToStorage(),r}async saveRemix(e,n,r,s,i,o,l,c,u){const d=await this.getMediaById(n),h={userId:e,type:"remix",url:r,prompt:s,style:u,aspectRatio:i,width:o,height:l,originalMediaId:n,tokensUsed:c,isPublic:!0,allowRemix:!0,tags:(d==null?void 0:d.tags)||[],metadata:{quality:"high",generationTime:2e3,modelVersion:"v2.0"},expiresAt:e.startsWith("guest-")?new Date(Date.now()+48*60*60*1e3).toISOString():void 0},f=await this.saveMedia(h);return d&&await this.incrementRemixCount(n),f}async cleanupExpiredGuestMedia(){const e=Date.now();for(const[n,r]of this.mediaStorage.entries()){const s=r.filter(i=>!(i.userId.startsWith("guest-")&&i.expiresAt&&new Date(i.expiresAt).getTime()<e));s.length!==r.length&&this.mediaStorage.set(n,s)}await this.saveToStorage()}async toggleLike(e,n){this.likesIndex.has(e)||this.likesIndex.set(e,[]);const r=this.likesIndex.get(e),s=r.includes(n),i=s?r.filter(o=>o!==n):[...r,n];this.likesIndex.set(e,i);for(const[o,l]of this.mediaStorage.entries()){const c=l.findIndex(u=>u.id===e);c!==-1&&(l[c].likes=i.length)}return await this.saveLikesIndex(),await this.saveToStorage(),{liked:!s,likes:i.length}}async getLikeCount(e){return(this.likesIndex.get(e)||[]).length}async hasUserLiked(e,n){return(this.likesIndex.get(e)||[]).includes(n)}async incrementRemixCount(e){let n=0;for(const[r,s]of this.mediaStorage.entries()){const i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].remixCount=(s[i].remixCount||0)+1,n=s[i].remixCount)}return await this.saveToStorage(),n}async getRemixCount(e){for(const n of this.mediaStorage.values()){const r=n.find(s=>s.id===e);if(r)return r.remixCount||0}return 0}async getActiveGuestMedia(e){await this.cleanupExpiredGuestMedia();const n=this.mediaStorage.get(e)||[],r=Date.now();return n.filter(s=>!s.expiresAt||new Date(s.expiresAt).getTime()>r)}async migrateMedia(e,n){const r=this.mediaStorage.get(e)||[],s=this.mediaStorage.get(n)||[];if(r.length===0)return;const i=r.map(o=>({...o,userId:n,expiresAt:void 0}));this.mediaStorage.set(n,[...i,...s]),this.mediaStorage.delete(e),await this.saveToStorage()}async getUserMedia(e,n){const r=this.mediaStorage.get(e)||[];return n?r.filter(s=>s.type===n):r}async getAllUsers(){return Array.from(this.mediaStorage.keys())}async recoverMedia(e){try{const n=[],r=localStorage.getItem("user_media_storage");if(r){const o=JSON.parse(r),l=new Map(o);for(const[c,u]of l.entries())this.isLikelySameUser(c,e)&&n.push(...u)}const s=localStorage.getItem("user_media_backup");if(s){const o=JSON.parse(s);for(const[l,c]of o.entries())this.isLikelySameUser(l,e)&&n.push(...c)}const i=this.removeDuplicateMedia(n);if(i.length>0){const o=this.mediaStorage.get(e)||[],l=[...i,...o];this.mediaStorage.set(e,l),await this.saveToStorage(),await this.createBackup()}return i}catch(n){return console.error("Failed to recover media:",n),[]}}isLikelySameUser(e,n){return e===n?!0:e.startsWith("guest-")&&n.includes("@")||n.startsWith("guest-")&&e.includes("@")?!1:e.includes("@")&&n.includes("@")?e.toLowerCase()===n.toLowerCase():e.includes("@")?this.hashEmail(e)===n:n.includes("@")?this.hashEmail(n)===e:!1}hashEmail(e){let n=0;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n).toString(36)}removeDuplicateMedia(e){const n=new Set;return e.filter(r=>n.has(r.id)?!1:(n.add(r.id),!0))}async createBackup(){try{const e=Array.from(this.mediaStorage.entries());localStorage.setItem("user_media_backup",JSON.stringify(e))}catch(e){console.error("Failed to create backup:",e)}}async getAllUserMedia(e){let n=this.mediaStorage.get(e)||[];return n.length===0&&(await this.recoverMedia(e)).length>0&&(n=this.mediaStorage.get(e)||[]),n}async getUserRemixes(e){return this.getUserMedia(e,"remix")}async getUserLikedMedia(e){const n=[];for(const r of this.mediaStorage.values())for(const s of r)await this.hasUserLiked(s.id,e)&&n.push(s);return n}async getMediaById(e){for(const n of this.mediaStorage.values()){const r=n.find(s=>s.id===e);if(r)return r}return null}async getUserStats(e){const n=this.mediaStorage.get(e)||[],r=n.filter(u=>u.type!=="remix").length,s=n.filter(u=>u.type==="remix").length,i=n.reduce((u,d)=>u+d.likes,0),o=n.length*10,l=n.reduce((u,d)=>u+d.tokensUsed,0),c=n.length>0?n.filter(u=>u.metadata.quality==="high").length/n.length:0;return{totalCreations:r,totalRemixes:s,totalLikes:i,totalViews:o,tokensUsed:l,averageQuality:c}}async updateMedia(e,n){for(const[r,s]of this.mediaStorage.entries()){const i=s.findIndex(o=>o.id===e);if(i!==-1)return this.mediaStorage.set(r,[...s.slice(0,i),{...s[i],...n},...s.slice(i+1)]),await this.saveToStorage(),!0}return!1}async deleteMedia(e,n){const r=this.mediaStorage.get(e)||[],s=r.filter(i=>i.id!==n);return s.length!==r.length?(this.mediaStorage.set(e,s),this.likesIndex.has(n)&&(this.likesIndex.delete(n),await this.saveLikesIndex()),await this.saveToStorage(),!0):!1}async likeMedia(e){var n;return this.updateMedia(e,{likes:((n=await this.getMediaById(e))==null?void 0:n.likes)||0+1})}async getTrendingMedia(e=20){const n=[];for(const r of this.mediaStorage.values())n.push(...r.filter(s=>s.isPublic));return n.sort((r,s)=>{const i=(r.likes+r.remixCount)*this.getRecencyScore(r.timestamp);return(s.likes+s.remixCount)*this.getRecencyScore(s.timestamp)-i}).slice(0,e)}async searchUserMedia(e,n){const r=this.mediaStorage.get(e)||[],s=n.toLowerCase();return r.filter(i=>{var o;return i.prompt.toLowerCase().includes(s)||i.tags.some(l=>l.toLowerCase().includes(s))||((o=i.style)==null?void 0:o.toLowerCase().includes(s))})}generateMasonryLayout(e,n=3){const r=new Array(n).fill(0),s=Array.from({length:n},()=>[]);return e.forEach(i=>{const o=r.indexOf(Math.min(...r));s[o].push(i),r[o]+=1/i.aspectRatio}),s}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getRecencyScore(e){const n=Date.now(),r=new Date(e).getTime(),s=(n-r)/(1e3*60*60*24);return Math.exp(-s/7)}async saveToStorage(){try{const e=Array.from(this.mediaStorage.entries());localStorage.setItem("user_media_storage",JSON.stringify(e))}catch(e){console.error("Failed to save user media:",e)}}loadFromStorage(){try{const e=localStorage.getItem("user_media_storage");if(e){const r=JSON.parse(e);this.mediaStorage=new Map(r)}const n=localStorage.getItem("user_media_likes");if(n){const r=JSON.parse(n);this.likesIndex=new Map(Object.entries(r))}}catch(e){console.error("Failed to load user media:",e),this.mediaStorage=new Map}}async saveLikesIndex(){try{const e={};for(const[n,r]of this.likesIndex.entries())e[n]=r;localStorage.setItem("user_media_likes",JSON.stringify(e))}catch(e){console.error("Failed to save likes index:",e)}}async generateSampleMedia(e){return console.log("generateSampleMedia called for user:",e,"- no sample content generated"),Promise.resolve()}};ve(qr,"instance");let eh=qr;const Wr=eh.getInstance();function RP(t){return!t||typeof t!="object"?null:t.result_url||t.image_url||t.url||Array.isArray(t.result_urls)&&t.result_urls[0]||null}async function IP(t,e){if(t&&!t.startsWith("blob:"))return t;if(!e)throw new Error("Invalid asset URL and no file to upload");const n=await fetch("/.netlify/functions/cloudinary-sign",{method:"POST"});if(!n.ok){const l=await n.json().catch(()=>({}));throw new Error(`Cloudinary sign failed ${n.status}: ${(l==null?void 0:l.error)||"unknown"}`)}const r=await n.json();if(!r.cloudName||!r.signature||!r.timestamp||!r.apiKey)throw new Error("Signer returned missing fields");const s=new FormData;s.append("file",e),s.append("timestamp",String(r.timestamp)),s.append("signature",r.signature),s.append("api_key",r.apiKey),r.folder&&s.append("folder",r.folder);const i=await fetch(`https://api.cloudinary.com/v1_1/${r.cloudName}/auto/upload`,{method:"POST",body:s});if(!i.ok)throw new Error("Cloudinary upload failed");const o=await i.json();if(!(o!=null&&o.secure_url))throw new Error("Cloudinary upload failed");return o.secure_url}function OP(t,e,n){const r=`https://res.cloudinary.com/${n}`;return e==="video"?`${r}/video/upload/${t}.mp4`:`${r}/image/upload/${t}.jpg`}function LP(){return{}.VITE_CLOUDINARY_CLOUD_NAME||""}function DP(t,e){const n=LP();if(!n)throw new Error("VITE_CLOUDINARY_CLOUD_NAME not configured");return OP(t,e,n)}async function Qg(t){const e=localStorage.getItem("auth_token");return(await fetch("/.netlify/functions/create-asset",{method:"POST",headers:e?{"Content-Type":"application/json",Authorization:`Bearer ${e}`}:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}var wy;({}).VITE_NO_DB_MODE==="true"||typeof process<"u"&&((wy=process.env)==null||wy.NO_DB_MODE);async function MP(t){const e=await fetch("/.netlify/functions/save-media",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),n=await e.text();let r={};try{r=JSON.parse(n)}catch{}if(!e.ok||(r==null?void 0:r.ok)===!1){const s=r&&r.error?r.error:n||"save-media failed";throw new Error(s)}return(r==null?void 0:r.data)??{}}const UP={auto:"Auto (Surprise Me)",four_seasons_spring:"Spring",four_seasons_summer:"Summer",four_seasons_autumn:"Autumn",four_seasons_winter:"Winter",time_sunrise:"Sunrise",time_day:"Day",time_sunset:"Sunset",time_night:"Night",mood_calm:"Calm",mood_vibrant:"Vibrant",mood_dramatic:"Dramatic",mood_dreamy:"Dreamy",style_photorealistic:"Photorealistic",style_vintage:"Vintage Film",style_pastels:"Pastels",style_neon:"Neon Pop"},$P={"1920s_noir_glam":"1920s Noir Glam","1960s_kodachrome":"1960s Kodachrome","1980s_vhs_retro":"1980s VHS Retro","1990s_disposable":"1990s Disposable Camera","2100_cyberpunk":"Futuristic Cyberpunk (Year 2100)"},FP={colorize_bw:"Colorize B/W Photo",revive_faded:"Revive Faded Colors",sharpen_enhance:"Sharpen & Enhance Details",remove_scratches:"Remove Scratches & Artifacts"},zP={neon_nights:{label:"Neon Nights",prompt:"Vivid neon colors, deep blacks, crisp micro-contrast, night city vibe.",negative_prompt:"flat, muddy blacks, blown highlights, banding, halos, color bleed",strength:.7,description:"Night urban with neon pop"},crystal_clear:{label:"Crystal Clear",prompt:"Enhance sharpness, remove haze, boost clarity, keep colors true to life.",negative_prompt:"oversharpen halo, plastic skin, artificial texture, noise",strength:.65,description:"Clean detail and clarity"},noir_classic:{label:"Noir Classic",prompt:"High-contrast black and white, deep blacks, sharp detail, cinematic mood.",negative_prompt:"low-contrast, washed out, muddy blacks, blur, noise",strength:.7,description:"Timeless B/W look"},vintage_film_35mm:{label:"Vintage Film",prompt:"Film grain, warm tones, analog color grading, nostalgic atmosphere.",negative_prompt:"digital artifacts, oversaturation, harsh contrast, plastic look",strength:.6,description:"Classic film aesthetic"},retro_polaroid:{label:"Retro Polaroid",prompt:"Instant film look, soft focus, warm vintage colors, slight vignette.",negative_prompt:"sharp digital, cold tones, perfect clarity, modern look",strength:.65,description:"Instant camera nostalgia"},vivid_pop:{label:"Vivid Pop",prompt:"Saturated colors, high contrast, vibrant energy, bold visual impact.",negative_prompt:"muted colors, low contrast, dull, washed out",strength:.6,description:"Bold and energetic"},cinematic_glow:{label:"Cinematic Glow",prompt:"Warm cinematic lighting, subtle glow, film-like color grading, dramatic mood.",negative_prompt:"flat lighting, harsh shadows, amateur look, oversaturation",strength:.65,description:"Movie-like atmosphere"},bright_airy:{label:"Bright Airy",prompt:"Light and airy feel, soft shadows, clean bright tones, fresh atmosphere.",negative_prompt:"dark, heavy, muddy, harsh contrast",strength:.55,description:"Light and fresh"},urban_grit:{label:"Urban Grit",prompt:"Street photography style, raw urban energy, high contrast, gritty texture.",negative_prompt:"soft, clean, polished, suburban",strength:.7,description:"Raw city energy"},dreamy_pastels:{label:"Dreamy Pastels",prompt:"Soft pastel colors, dreamy atmosphere, gentle lighting, ethereal mood.",negative_prompt:"harsh colors, sharp contrast, dark, aggressive",strength:.5,description:"Soft and dreamy"}};function ko(t,e){return(e==null?void 0:e[t])??zP[t]??null}function Qi(t,e){if(!t)return"Custom";const n=ko(t,e);return(n==null?void 0:n.label)??t.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}function Xg({mode:t,option:e,activePresets:n}){const r={"1920s_noir_glam":"noir_classic","1960s_kodachrome":"vintage_film_35mm","1980s_vhs_retro":"retro_polaroid","1990s_disposable":"vintage_film_35mm","2100_cyberpunk":"neon_nights"},s={colorize_bw:"crystal_clear",revive_faded:"vivid_pop",sharpen_enhance:"crystal_clear",remove_scratches:"crystal_clear"},i={auto:Object.keys(n).length>0?Object.keys(n).slice(0,6):["cinematic_glow","bright_airy","vivid_pop","vintage_film_35mm","urban_grit","dreamy_pastels"],spring:["bright_airy","dreamy_pastels"],summer:["vivid_pop","cinematic_glow"],autumn:["vintage_film_35mm","urban_grit"],winter:["crystal_clear","noir_classic"],sunrise:["cinematic_glow","bright_airy"],day:["crystal_clear","vivid_pop"],sunset:["cinematic_glow","vintage_film_35mm"],night:["neon_nights","noir_classic"],calm:["bright_airy","dreamy_pastels"],vibrant:["vivid_pop","neon_nights"],dramatic:["noir_classic","urban_grit"],dreamy:["dreamy_pastels","cinematic_glow"],photorealistic:["crystal_clear","bright_airy"],vintage_film:["vintage_film_35mm","retro_polaroid"],pastels:["dreamy_pastels","bright_airy"],neon_pop:["neon_nights","vivid_pop"]};let o=null;if(t==="time_machine")o=r[e||""]||"noir_classic";else if(t==="restore")o=s[e||""]||"crystal_clear";else if(t==="story"){const d=(i[e||"auto"]||i.auto).filter(h=>ko(h,n));d.length>0?o=d[Math.floor(Math.random()*d.length)]:o=Object.keys(n)[0]||"crystal_clear"}if(o&&ko(o,n))return o;const l={retro_polaroid:"vivid_pop",neon_nights:"vivid_pop",crystal_clear:"bright_airy",noir_classic:"urban_grit"};if(o&&l[o]){const u=l[o];if(ko(u,n))return console.log(` Mapped ${o}  ${u}`),u}const c=Object.keys(n)[0]||"vivid_pop";return console.warn(`Preset ${o} not found, falling back to ${c}`),c}const VP="increase micro-contrast and edge fidelity; subtle sharpening; preserve natural skin texture; no halos",BP="strong micro-contrast; crisp edges; enhance fine textures (hair, neoprene seams); avoid halos or crunchy artifacts",WP="maximize micro-contrast and fine detail; razor-sharp edges; crisp textures; retain natural grain; strictly no halos, no plastic skin",HP="same person, adult male surfer, holding a surfboard, same pose and angle, same composition, beach and ocean waves",GP="female, woman, girl, bikini, long hair blowing, dress, banana, banana boat, inflatable, kayak, canoe, paddle, raft, extra people, different subject, face swap, toy boat",YP="deformed subject, new faces, age change, child, baby, extra people, different subject, face swap, plastic skin, waxy skin, heavy smoothing";function qP(t){const e=t.detail==="hard"?WP:t.detail==="medium"?BP:VP,n=[t.base,t.user,e,t.lockSurfer?HP:""].filter(Boolean).join(". ").replace(/\s+/g," ").trim(),r=[t.extraNeg,t.lockSurfer?GP:"",t.mode==="time_machine"||t.mode==="restore"?YP:""].filter(Boolean).join(", ");return{positives:n,negatives:r}}const Ya=({title:t,themes:e,selectedTheme:n,onThemeSelect:r,isExpanded:s,onToggle:i})=>a.jsxs("div",{className:"border-b border-white/10 last:border-b-0 pb-2 last:pb-0",children:[a.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between px-2 py-2 rounded-lg transition-colors text-sm text-white hover:bg-white/5",children:[a.jsx("span",{className:"font-medium text-white",children:t}),a.jsx(zS,{size:14,className:`transition-transform text-white ${s?"rotate-180":""}`})]}),s&&a.jsx("div",{className:"mt-1 space-y-1 pl-2",children:e.map(o=>a.jsxs("button",{onClick:()=>r(o),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors text-sm ${n===o?"bg-white/20 text-white":"text-white hover:bg-white/10"}`,children:[a.jsx("span",{className:"text-white",children:UP[o]}),n===o?a.jsx("div",{className:"w-3 h-3 rounded-full bg-white border border-white/30"}):a.jsx("div",{className:"w-3 h-3 rounded-full border border-white/30"})]},o))})]}),KP={}.VITE_NO_DB_MODE==="true",JP=()=>{var ep;const{notifyQueue:t,notifyReady:e,notifyError:n}=Px(),r=w.useRef(null),s=ms(),i=fc(),o=w.useRef(null),l=w.useRef(null),[c,u]=w.useState(0),[d,h]=w.useState(0),[f,p]=w.useState(!1),[v,x]=w.useState(null),[k,g]=w.useState(null),[m,y]=w.useState(!1),[S,T]=w.useState(!1),[C,P]=w.useState(""),[j,D]=w.useState(null),[I,G]=w.useState(null),[M,Oe]=w.useState(null),[Z,kt]=w.useState(null),[dt,J]=w.useState(null),[R,$]=w.useState(!1),[z,ae]=w.useState(!1),[he,St]=w.useState(!1),Ze=w.useRef(null),Gt=w.useRef(0),[it,on]=w.useState(null);w.useEffect(()=>{Ze.current=j},[j]);function ha(){return Gt.current+=1,T(!0),Gt.current}function $e(b){b===Gt.current&&T(!1)}function ys(b){if(S){console.debug(" Blocked preset clear while generating:",b);return}D(null),Ze.current=null,localStorage.removeItem("selectedPreset")}const Tc=()=>{console.log(" Clearing mode after generation"),G(null),Oe(null),kt(null),J(null)};w.useEffect(()=>{(async()=>(await Dn.getState().load(),NP()))()},[]),w.useEffect(()=>{const b=localStorage.getItem("selectedPreset");if(b&&se[b]){D(b),Ze.current=b;return}const N=Object.keys(se)[0]||null;D(N||null),Ze.current=N||null,N&&localStorage.setItem("selectedPreset",N)},[se]),w.useEffect(()=>{console.log(" selectedPreset changed to:",j),j?(console.log(" Preset details:",se[j]),localStorage.setItem("selectedPreset",j),Ze.current=j):(localStorage.removeItem("selectedPreset"),Ze.current=null)},[j,se]),w.useEffect(()=>{console.log(" PRESETS object updated:",{count:Object.keys(se).length,keys:Object.keys(se),sample:Object.keys(se).slice(0,3).map(b=>{var N,H;return{key:b,label:Qi(b,se),prompt:((H=(N=se[b])==null?void 0:N.prompt)==null?void 0:H.substring(0,50))+"..."}})})},[se]),w.useEffect(()=>{},[j]);const[kr,Sr]=w.useState(!1),[Pi,fa]=w.useState("instagram"),[Ni,Ei]=w.useState("trendy"),[_r,jr]=w.useState(""),[Un,Rt]=w.useState(!1),vs=w.useMemo(()=>{try{const b=Object.keys(se);return b.length===0?["cinematic_glow","bright_airy","vivid_pop","vintage_film_35mm","tropical_boost","urban_grit"]:b.slice(0,6)}catch(b){return console.error(" Error getting active presets:",b),["cinematic_glow","bright_airy","vivid_pop","vintage_film_35mm","tropical_boost","urban_grit"]}},[se]),[Zf,Yt]=w.useState(null),[Ai,Ri]=w.useState([]),[Pc,pa]=w.useState(!0),[ce,ma]=w.useState(!1),[$n,Cr]=w.useState(null),[Tr,It]=w.useState(!1),[ws,an]=w.useState(!1),[Le,ln]=w.useState(null),{profileData:Ot}=wc(),[Fn,Ii]=w.useState("all"),[ga,ge]=w.useState(!1),[Oi,ya]=w.useState(!1),[xs,Lt]=w.useState(!1),[Nc,Li]=w.useState(!1),[Ec,Pr]=w.useState([]),[Di,Nr]=w.useState(0),[va,ue]=w.useState(null),[Er,zn]=w.useState(null),[Mi,wa]=w.useState(!1),[Vn,Ui]=w.useState(null);w.useEffect(()=>{const b=Q=>{const Y=Q.target;Tr&&!Y.closest("[data-filter-dropdown]")&&It(!1),xs&&!Y.closest("[data-user-menu]")&&Lt(!1),ws&&!Y.closest("[data-presets-dropdown]")&&an(!1),R&&!Y.closest("[data-story-dropdown]")&&$(!1),z&&!Y.closest("[data-timemachine-dropdown]")&&ae(!1),he&&!Y.closest("[data-restore-dropdown]")&&St(!1)},N=()=>{It(!1),Lt(!1),an(!1),$(!1),ae(!1),St(!1)},H=Q=>{Q.key==="Escape"&&(It(!1),Lt(!1),an(!1),$(!1),ae(!1),St(!1))},X=Q=>{const Y=Q.target;if(Y.closest("[data-nav-button]")){const We=Y.closest("[data-nav-button]"),ie=We==null?void 0:We.getAttribute("data-nav-type");ie!=="filter"&&It(!1),ie!=="user"&&Lt(!1),ie!=="presets"&&an(!1)}};return document.addEventListener("click",b),document.addEventListener("click",X),window.addEventListener("global-nav-close",N),document.addEventListener("keydown",H),()=>{document.removeEventListener("click",b),document.removeEventListener("click",X),window.removeEventListener("global-nav-close",N),document.removeEventListener("keydown",H)}},[Tr,xs,ws,R,z,he]);const xa=()=>{It(!1),Lt(!1),an(!1),$(!1),ae(!1),St(!1)},ba=()=>{var b;xa(),(b=r.current)==null||b.click()},Ac=b=>{var X;const N=(X=b.target.files)==null?void 0:X[0];if(!N)return;const H=URL.createObjectURL(N);x(H),y(!1),g(N),p(!0),ys("new media uploaded")},Ar=()=>{const b=o.current,N=l.current;if(!b||!N)return;const H=b.getBoundingClientRect().height,X=N.getBoundingClientRect(),Q=Math.max(0,(H-X.height)/2);u(Q),h(X.width)};w.useEffect(()=>{if(!f)return;const b=()=>Ar();window.addEventListener("resize",b);const N=setTimeout(Ar,50);return()=>{window.removeEventListener("resize",b),clearTimeout(N)}},[f,v]),w.useEffect(()=>{const b=i==null?void 0:i.state;if(b&&(b.remixUrl||b.remixPrompt)){const N=b.remixUrl;x(N),y(/\.(mp4|webm|mov|mkv)(\?|$)/i.test(N)),g(null),p(!0),b.remixPrompt&&P(b.remixPrompt)}},[i]);const $i=async()=>{var b;try{pa(!0),console.log(" Loading public feed...");const N=await fetch("/.netlify/functions/getPublicFeed?limit=50");if(console.log(" Feed response status:",N.status),N.ok){const H=await N.json();if(console.log(" Raw feed response:",H),console.log(" Feed items received:",H.ok?"success":"failed"),!H.ok){console.error(" Feed API error:",H.error);return}const{data:X}=H;console.log(" Raw feed data:",X),console.log(" Feed length:",(X==null?void 0:X.length)||0);const Q=(X||[]).map(Y=>{const We=DP(Y.cloudinary_public_id,Y.media_type);return console.log(` URL mapping for item ${Y.id}:`,{cloudinary_public_id:Y.cloudinary_public_id,media_type:Y.media_type,final:We}),{id:Y.id,userId:Y.user_id||"",userAvatar:Y.user_avatar||void 0,userTier:Y.user_tier||void 0,type:Y.media_type==="video"?"video":"photo",url:We,thumbnailUrl:We,prompt:Y.prompt||"AI Generated Content",style:void 0,aspectRatio:4/3,width:800,height:600,timestamp:Y.published_at,originalMediaId:Y.source_asset_id||void 0,tokensUsed:Y.media_type==="video"?5:2,likes:0,remixCount:0,isPublic:!0,allowRemix:!0,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"1.0"},cloudinaryPublicId:Y.cloudinary_public_id,mediaType:Y.media_type}});console.log(" Mapped feed items:",Q.length),console.log(" Setting feed with items:",Q.length,"first item ID:",(b=Q[0])==null?void 0:b.id),Ri(Q)}else console.error(" Feed response not ok:",N.status,await N.text())}catch(N){console.error(" Failed to load feed",N)}finally{pa(!1)}};w.useEffect(()=>{(async()=>{const N=F.getAuthState();if(ma(N.isAuthenticated),console.log(" Auth state initialized:",N),N.isAuthenticated)try{await _(),console.log(" User settings synced from database"),await ob(),console.log(" User profile synced from database"),await ab()}catch(H){console.warn(" Failed to sync user data from database:",H)}})()},[]),w.useEffect(()=>{const b=()=>{const N=F.getAuthState();ma(N.isAuthenticated),console.log(" Auth state changed:",N),N.isAuthenticated||(console.log(" User logged out, clearing state"),Yt(null))};return window.addEventListener("auth-state-changed",b),()=>{window.removeEventListener("auth-state-changed",b)}},[]),w.useEffect(()=>{const b=localStorage.getItem("selectedPreset");b&&se[b]?(console.log(" Restoring preset from localStorage:",b),D(b)):b&&!se[b]&&(console.warn(" Invalid preset in localStorage, clearing:",b),localStorage.removeItem("selectedPreset"))},[se]),w.useEffect(()=>{$i();const b=()=>{$i()};return window.addEventListener("refreshFeed",b),()=>{window.removeEventListener("refreshFeed",b)}},[]),w.useEffect(()=>{(async()=>{try{if(!f)return;if(!F.getToken()){Yt(null);return}const H=await ai("/.netlify/functions/getQuota",{method:"GET"});if(H.ok){const X=await H.json();Yt(X)}else H.status===401&&Yt(null)}catch(N){console.error("Failed to load quota",N),Yt(null)}})()},[f]),w.useEffect(()=>()=>{Er&&clearInterval(Er)},[Er]),w.useEffect(()=>()=>{T(!1),ge(!1)},[]);const _=async()=>{if(ce&&F.getToken())try{const b=await fetch("/.netlify/functions/user-settings",{method:"GET",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}});if(b.ok){const N=await b.json();console.log(" Retrieved settings from database:",N);const X={...JSON.parse(localStorage.getItem("userProfile")||"{}"),...N};return localStorage.setItem("userProfile",JSON.stringify(X)),N}}catch(b){console.warn(" Failed to get settings from database, falling back to localStorage:",b)}try{const b=localStorage.getItem("userProfile");if(b){const N=JSON.parse(b);return{shareToFeed:N.shareToFeed||!1,allowRemix:N.allowRemix||!1}}}catch(b){console.error("Error reading user profile from localStorage:",b)}return{shareToFeed:!0,allowRemix:!0}},A=()=>{p(!1),P(""),x(null),xa()};async function O(b,N){var tp,np,rp,sp,ip;const H=performance.now(),X=crypto.randomUUID();if(on(X),console.info(" dispatchGenerate",{kind:b,options:N,runId:X}),N!=null&&N.presetId&&(console.assert(se[N.presetId],`Preset ${N.presetId} must be valid before generate`),!se[N.presetId])){console.error(" Invalid preset assertion failed:",N.presetId),n({title:"Invalid preset",message:"Please select a valid style preset"});return}const Q=ha();ge(!0);const{shareToFeed:Y,allowRemix:We}=await _();if(console.log(" Using profile settings:",{shareToFeed:Y,allowRemix:We}),console.table({hasActiveAssetUrl:!!v,promptLen:(C==null?void 0:C.length)??0,isGenerating:S,isAuthenticated:ce}),!v){console.warn("No source media URL; aborting."),$e(Q),ge(!1);return}let ie="",Wn=null;const ye=(N==null?void 0:N.presetId)||j;N!=null&&N.promptOverride;const bs=(N==null?void 0:N.mode)||I,ks=(N==null?void 0:N.modeOption)||M||Z||dt;if(b==="mode"&&bs&&ks){const Se=Xg({mode:bs,option:ks,activePresets:se});Wn={mode:bs,option:ks,mapping_version:"v2"};const Ir=ko(Se,se);if(Ir){const qe=I==="story"?"medium":"hard",{positives:wn,negatives:_e}=qP({base:Ir.prompt,user:C.trim()||void 0,detail:qe,lockSurfer:!0,mode:I,extraNeg:Ir.negative_prompt});ie=wn,console.log(` Using mode "${I}"  preset "${Se}" (${qe} detail):`,ie),_e&&console.log(" Negative prompt:",_e)}else console.warn(` Preset ${Se} not found, using fallback`),ie="stylize, preserve subject and composition"}const ee=!!ye,Rc=!!C.trim();if(!ee&&!Rc&&!!!bs){console.warn("No preset, mode, or user prompt selected; aborting."),$e(Q),ge(!1);return}console.log(" Preset selection debug:",{selectedPreset:j,currentPresetId:ye,hasPreset:!!ye,presetExists:ye?!!se[ye]:!1,presetPrompt:ye?(tp=se[ye])==null?void 0:tp.prompt:"N/A"}),ie||(ye&&se[ye]?(ie=se[ye].prompt,console.log(` Using preset "${ye}":`,ie)):C.trim()?(ie=C.trim(),console.log(" Using user prompt:",ie)):(ie="stylize, preserve subject and composition",console.log(" Using fallback prompt:",ie)));const Rr=C.toLowerCase().includes("make it obvious")||C.toLowerCase().includes("test");if(Rr&&(ie="black-and-white line art, no color, heavy outlines, flat shading, cartoon style",console.log(' Using "Make it obvious" test prompt:',ie)),ye){const Se=lP(ye,m);Se!=="stylize, preserve subject and composition"&&(ie=Se,console.log(` Using new preset system "${ye}" (${m?"V2V":"I2I"}):`,ie))}if(console.log(" Final effective prompt:",ie),ye&&se[ye]?(console.log(" Preset used in generation:",{presetName:ye,presetLabel:Qi(ye,se),presetPrompt:se[ye].prompt,finalPrompt:ie}),Ax.trackPresetUsage(ye)):ye&&!se[ye]&&console.warn(" Invalid preset selected:",ye),!ie){console.warn("No prompt available; aborting."),$e(Q),ge(!1);return}if(!ce){console.warn("User not authenticated; redirecting to auth."),s("/auth"),$e(Q),ge(!1);return}if(AP({userInitiated:!0,source:b})){console.warn(" Generation blocked by guard"),$e(Q),ge(!1);return}try{console.log(" Starting generation with:",{kind:b,effectivePrompt:ie,selectedPreset:ye,isVideo:m}),p(!1);let Se=v;if(v!=null&&v.startsWith("blob:")||k)try{Se=await IP(v,k||void 0),console.log(" Using remote source URL:",Se)}catch(Ne){console.error(" Upload failed:",Ne),n({title:"Something went wrong",message:Ne.message||"Failed to upload file to Cloudinary"}),$e(Q),ge(!1);return}console.table({hasActiveAssetUrl:!!v,promptLen:(C==null?void 0:C.length)??0,isGenerating:S,isAuthenticated:ce,sourceUrl:Se,selectedPreset:j,effectivePrompt:ie,promptFieldValue:C});const Ir=m||/\/video\/upload\//.test(Se||"")||/\.(mp4|mov|webm|m4v)(\?|$)/i.test(Se||""),qe={prompt:ie,...Ir?{video_url:Se}:{image_url:Se},isVideo:Ir,fps:24,duration:Ir?5:void 0,stabilization:!1,source:b,visibility:Y?"public":"private",allow_remix:Y?We:!1,...Wn&&{modeMeta:Wn},num_variations:Oi?2:1,strength:.85,seed:Date.now(),request_id:((np=crypto.randomUUID)==null?void 0:np.call(crypto))||`${Date.now()}-${Math.random()}`};if(m&&(qe.video_settings={fps:24,duration:3,quality:"high",stabilization:!0},console.log(" V2V payload with video settings:",qe.video_settings)),Rr&&(qe.strength=.9,qe.num_inference_steps=36,qe.guidance_scale=7.5,qe.seed=Date.now(),console.log(" Using test parameters:",{strength:qe.strength,steps:qe.num_inference_steps,seed:qe.seed})),j&&se[j]){const Ne=se[j];Ne.negative_prompt&&(qe.negative_prompt=Ne.negative_prompt),typeof Ne.strength=="number"&&(qe.strength=Ne.strength),qe.presetName=j}if(console.info("aimlApi payload",qe),m){const Ne=F.getToken();if(!Ne){console.error("Missing auth for start-v2v"),$e(Q),ge(!1),s("/auth");return}try{const ht=await fetch("/.netlify/functions/start-gen",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne}`},body:JSON.stringify({video_url:Se,prompt:ie,duration:3,fps:24,stabilization:!1,frameSecond:0,tier:"standard"})}),ft=await ht.json().catch(()=>({}));if(!ht.ok||!(ft!=null&&ft.job_id))throw new Error((ft==null?void 0:ft.error)||"start-v2v failed");t({title:"Added to queue",message:"We'll start processing shortly."}),ue({id:ft.job_id,status:"queued"}),Fi(ft.job_id,ft.model,ie);try{const Lr=F.getCurrentUser();if(Lr!=null&&Lr.id){const Dr={id:`job-${ft.job_id}`,userId:Lr.id,type:"video",url:Se,thumbnailUrl:Se,status:"processing",prompt:ie,aspectRatio:1.3333333333333333,width:800,height:600,timestamp:new Date().toISOString(),tokensUsed:0,likes:0,remixCount:0,isPublic:Y,allowRemix:We,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"pending"}};window.dispatchEvent(new CustomEvent("userMediaUpdated",{detail:{optimistic:Dr}}))}}catch{}}catch(ht){console.error("start-v2v error",ht),n({title:"Failed",message:(ht==null?void 0:ht.message)||"Video job failed to start"})}$e(Q),ge(!1);return}const wn=await ai("/.netlify/functions/aimlApi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qe)});console.info("aimlApi status",wn.status);const _e=await wn.json().catch(()=>({}));if(console.info("aimlApi body",_e),wn.status===202&&_e.job_id&&(m||_e.kind==="story")){_e.kind==="story"?t({title:"Your Story is ready",message:"Creating your 4-shot story video..."}):t({title:"Add to queue",message:"Processing will begin shortly."}),ue({id:_e.job_id,status:"queued"}),Fi(_e.job_id,_e.model,ie),$e(Q),ge(!1);return}if(!wn.ok)if(wn.status===501&&m)t({title:"Added to queue",message:"Well start processing shortly."});else if(wn.status===429){n({title:"Something went wrong",message:"Rate limited"}),$e(Q),ge(!1);return}else throw new Error((_e==null?void 0:_e.error)||`aimlApi ${wn.status}`);const Hn=RP(_e),Or=_e.result_urls||[Hn],op=_e.variations_generated||1;if(!Hn)throw console.error("No result URL in response:",_e),new Error("No result URL in API response");console.info(`Generated ${op} variation(s):`,Or);const Ic=`${Hn}${Hn.includes("?")?"&":"?"}t=${Date.now()}`;x(Ic),e({title:"Your media is ready",message:"Tap to open",thumbUrl:Hn,onClickThumb:()=>{Pr([{id:"generated-"+Date.now(),userId:"current-user",type:"photo",url:Hn,prompt:C,aspectRatio:4/3,width:800,height:600,timestamp:new Date().toISOString(),tokensUsed:2,likes:0,remixCount:0,isPublic:!1,allowRemix:!1,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"1.0"}}]),Nr(0),Li(!0)}});try{const Ne=F.getToken(),ht=(rp=F.getCurrentUser())==null?void 0:rp.id;if(!Ne||!ht){console.error("No JWT or user ID for saveMedia"),n({title:"Something went wrong",message:"Generated, but not saved (auth error)"});return}if(KP){try{if(ht){const Fe={id:`img-${Date.now()}`,userId:ht,type:"photo",url:Ic,thumbnailUrl:Ic,status:"processing",prompt:ie,aspectRatio:1.3333333333333333,width:800,height:600,timestamp:new Date().toISOString(),tokensUsed:0,likes:0,remixCount:0,isPublic:Y,allowRemix:We,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"pending"}};window.dispatchEvent(new CustomEvent("userMediaUpdated",{detail:{optimistic:Fe}}))}}catch{}try{const Fe=await MP({resultUrl:Hn,userId:ht,presetKey:j??null,sourcePublicId:Se?((sp=Se.split("/").pop())==null?void 0:sp.split(".")[0])||"":null,allowRemix:We,shareNow:!!Y,mediaTypeHint:"image"});console.log(" saveMediaNoDB ok:",Fe),setTimeout(()=>window.dispatchEvent(new CustomEvent("refreshFeed")),800)}catch(Fe){console.error(" saveMediaNoDB failed:",Fe),n({title:"Something went wrong",message:(Fe==null?void 0:Fe.message)||"Failed to save media"});try{}catch{}}$e(Q),ge(!1);return}const ft=await Qg({sourcePublicId:Se&&((ip=Se.split("/").pop())==null?void 0:ip.split(".")[0])||"",mediaType:"image",presetKey:j,prompt:ie});if(!ft.ok){console.error("Failed to create asset:",ft.error),n({title:"Something went wrong",message:"Failed to create asset record"}),$e(Q),ge(!1);return}const Lr=ft.data.id;console.log(" Asset created:",Lr),console.log(` Saving ${Or.length} variation(s) to database...`);let Dr=0,Oc=[];for(let Fe=0;Fe<Or.length;Fe++){const Lc=Or[Fe];console.log(` Saving variation ${Fe+1}/${Or.length}:`,Lc);try{const Mr=await fetch("/.netlify/functions/save-media",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne}`},body:JSON.stringify({assetId:Lr,resultUrl:Lc,mediaTypeHint:"image",userId:ht,shareNow:!!Y,prompt:ie,..._e.modeMeta&&{modeMeta:_e.modeMeta},variationIndex:Fe,totalVariations:Or.length})}),ap=await Mr.text();let xn={};try{xn=JSON.parse(ap)}catch{}Mr.ok&&(xn!=null&&xn.ok)?(Dr++,console.log(` Variation ${Fe+1} saved successfully:`,xn)):(console.error(` Variation ${Fe+1} save failed:`,Mr.status,xn||ap),Oc.push({variation:Fe+1,error:(xn==null?void 0:xn.error)||"Save failed"}))}catch(Mr){console.error(` Variation ${Fe+1} save error:`,Mr),Oc.push({variation:Fe+1,error:Mr instanceof Error?Mr.message:"Unknown error"})}}console.log(` Saved ${Dr}/${Or.length} variations successfully`),Dr>0?(Y&&setTimeout(()=>{console.log(" Dispatching refreshFeed event..."),window.dispatchEvent(new CustomEvent("refreshFeed"))},800),op>1&&e({title:"Your media is ready",message:`${Dr} variation${Dr>1?"s":""} generated`,thumbUrl:Hn})):(console.error(" All variations failed to save:",Oc),n({title:"Something went wrong",message:"Failed to save generated media"})),$e(Q),ge(!1);return}catch(Ne){console.error(" Error in save flow:",Ne),n({title:"Something went wrong",message:"Failed to save generated media"})}if($e(Q),ge(!1),I){try{const Ne=Xg({mode:I,option:M||Z||dt});console.log(" Mode analytics - success:",{mode:I,theme:M,era:Z,op:dt,preset:Ne,timestamp:new Date().toISOString()})}catch(Ne){console.warn(" Analytics tracking failed:",Ne)}Tc()}m&&(_e.status==="processing"||_e.status==="queued"?(t({title:"Added to queue",message:"Well start processing shortly."}),console.log(" V2V job started:",_e.job_id||"unknown")):_e.status==="completed"&&e({title:"Your media is ready",message:"Tap to open"}));try{const Ne=await ai("/.netlify/functions/getQuota");Ne.ok&&Yt(await Ne.json())}catch{}}catch(Se){console.error("dispatchGenerate error",Se),$e(Q),ge(!1)}finally{it===X?(on(null),console.info(" dispatchGenerate done",(performance.now()-H).toFixed(1),"ms")):console.warn(" Ignoring late completion for run:",X,"current:",it)}}const W=async b=>{if(console.log(" handlePresetClick called with:",b),!ce){console.log(" User not authenticated, redirecting to auth"),s("/auth");return}if(D(b),console.log(" selectedPreset set to:",b),!v){console.log(" No previewUrl available, cannot auto-generate");return}console.log(" Starting bulletproof generation with preset:",b),ge(!0);try{await jP(b,v)}catch(N){console.error(" Preset generation failed:",N),n({title:"Generation failed",message:"Please try another preset."})}finally{ge(!1)}},L=async(b,N)=>{if(console.log(" handleModeClick called with:",{mode:b,option:N}),!ce){console.log(" User not authenticated, redirecting to auth"),s("/auth");return}if(!v){console.log(" No previewUrl available, cannot generate"),n({title:"Upload a photo first",message:"Please upload a photo to use this mode"});return}ge(!0);try{const{prepareSourceAsset:H}=await xr(()=>import("./prepareSourceAsset-21366c9e.js"),[]),X=k||v,{url:Q,resource_type:Y}=await H(X);if(Y!=="image"){n({title:"Photo required",message:"Story / Time Machine / Restore need a photo"}),ge(!1);return}G(b),b==="story"?await TP(Q,C):b==="time_machine"?await Jg(N,Q):b==="restore"&&await Jg(N,Q)}catch(H){console.error(" Mode generation failed:",H),n({title:"Generation failed",message:"Please try another photo or style."})}finally{ge(!1)}},V=()=>{if(!C.trim()){jr("");return}Rt(!0);try{const b=uP.generateCaption({prompt:C.trim(),platform:Pi,style:Ni});jr(b.caption)}catch{jr("")}finally{Rt(!1)}},te=async()=>{if(_r)try{await navigator.clipboard.writeText(_r)}catch{}},fe=async b=>{if(!F.getToken()){s("/auth");return}const N=await tP.toggleLike(b.id);N.success&&Ri(H=>H.map(X=>X.id===b.id?{...X,likes:N.likeCount??X.likes}:X))},Bn=async b=>{if(!b.cloudinaryPublicId||!b.mediaType){console.error("Cannot share: missing cloudinary_public_id or media_type"),n({title:"Something went wrong",message:"Cannot share incomplete media"});return}wa(!0),Ui(b)},_t=async b=>{if(b.allowRemix!==!1){if(!F.getToken()){s("/auth");return}try{if(!b.cloudinaryPublicId||!b.mediaType){console.error("Missing cloudinary_public_id or media_type for remix"),n({title:"Something went wrong",message:"Failed to start remix"});return}const{ok:N,data:H,error:X}=await Qg({sourcePublicId:b.cloudinaryPublicId,mediaType:b.mediaType,presetKey:j,sourceAssetId:b.id});if(!N){console.error("Failed to create remix asset:",X),n({title:"Something went wrong",message:"Failed to create remix"});return}console.log(" Remix asset created:",H),x(b.url),y(!1),g(null),p(!0),P(b.prompt||""),ys("remix started"),b.prompt&&setTimeout(()=>O("remix"),100),t({title:"Added to queue",message:"Remix started"})}catch(N){console.error("Error creating remix:",N),n({title:"Something went wrong",message:"Failed to start remix"})}}},le=b=>{var N;console.log(" HomeNew handleMediaClick:",{id:b.id,prompt:b.prompt,userId:b.userId,type:b.type,hasPrompt:!!b.prompt,promptLength:((N=b.prompt)==null?void 0:N.length)||0}),Pr([b]),Nr(0),Li(!0)};Ai.filter(b=>$n&&b.userId!==$n?!1:Fn==="images"?b.type==="photo":Fn==="videos"?b.type==="video":!0);const Fi=(b,N,H)=>{Er&&clearInterval(Er);const X=setInterval(async()=>{var Q,Y,We,ie;try{const Wn=F.getToken(),ye=N?`&model=${encodeURIComponent(N)}`:"",bs=H?`&prompt=${encodeURIComponent(H)}`:"",ks=await fetch(`/.netlify/functions/poll-gen?id=${encodeURIComponent(b)}&model=${encodeURIComponent(N||"kling-video/v1.6/standard/image-to-video")}&persist=true${bs}`,{headers:Wn?{Authorization:`Bearer ${Wn}`}:{}});if(ks.ok){const ee=await ks.json(),Rc={id:(ee==null?void 0:ee.job_id)||b,status:ee==null?void 0:ee.status,error:ee==null?void 0:ee.error};if(ue(Rc),ee&&(ee.status==="done"||ee.status==="completed")){clearInterval(X),zn(null),ue(null);const Ss=((Q=ee==null?void 0:ee.record)==null?void 0:Q.resultUrl)||((Y=ee==null?void 0:ee.data)==null?void 0:Y.resultUrl)||(ee==null?void 0:ee.result_url),Rr=((We=ee==null?void 0:ee.record)==null?void 0:We.publicId)||((ie=ee==null?void 0:ee.data)==null?void 0:ie.publicId)||(ee==null?void 0:ee.cloudinary_public_id);console.log("poll-v2v payload:",ee),!Ss&&!Rr&&console.warn("V2V done but missing resultUrl/publicId"),e({title:"Your media is ready",message:"Tap to open"}),window.dispatchEvent(new CustomEvent("refreshFeed")),window.dispatchEvent(new Event("userMediaUpdated"))}else if(ee&&(ee.status==="failed"||ee.status==="timeout")){clearInterval(X),zn(null),ue(null),n({title:"Failed",message:ee.error||(ee.status==="timeout"?"Timed out":"Video processing failed")});try{const Ss=F.getCurrentUser();if(Ss!=null&&Ss.id){const Rr=`job-${b}`;window.dispatchEvent(new CustomEvent("userMediaUpdated",{detail:{markFailedId:Rr}})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("userMediaUpdated",{detail:{removeId:Rr}}))},1e4)}}catch{}}}}catch(Wn){console.error("Video job polling error:",Wn)}},3e3);zn(X)},ib=async()=>{if(!v||!C.trim()){n({title:"Something went wrong",message:"Upload media and enter a prompt first"});return}try{const b=F.getCurrentUser();if(!(b!=null&&b.id)){n({title:"Something went wrong",message:"Please sign up to save drafts"}),s("/auth");return}const N=b.id,H=`user_drafts_${N}`,X=JSON.parse(localStorage.getItem(H)||"[]"),Q={id:Date.now().toString(36)+Math.random().toString(36).slice(2),userId:N,type:m?"video":"photo",url:v,prompt:C.trim(),aspectRatio:4/3,width:800,height:600,timestamp:new Date().toISOString(),tokensUsed:0,likes:0,remixCount:0,isPublic:!1,allowRemix:!1,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"draft"}},Y=[Q,...X].slice(0,200);localStorage.setItem(H,JSON.stringify(Y));try{await Wr.saveMedia(Q)}catch(We){console.warn("Failed to save draft to userMediaService:",We)}e({title:"Your media is ready",message:"Draft saved"}),window.dispatchEvent(new Event("userMediaUpdated"))}catch(b){console.error("Failed to save draft:",b),n({title:"Something went wrong",message:"Could not save draft"})}},ob=async()=>{try{const b=F.getToken();if(!b)return;console.log(" Loading user profile from database...");const N=await fetch("/.netlify/functions/get-user-profile",{method:"GET",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(N.ok){const H=await N.json();console.log(" User profile loaded from database:",H);const Q={...JSON.parse(localStorage.getItem("userProfile")||"{}"),name:H.name||"",avatar:H.avatar||""};localStorage.setItem("userProfile",JSON.stringify(Q))}else console.warn(" Failed to load user profile from database")}catch(b){console.error(" Failed to load user profile from database:",b)}},ab=async()=>{try{const b=F.getToken();if(!b)return;console.log(" Checking for tier promotions...");const N=await fetch("/.netlify/functions/check-tier-promotion",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(N.ok){const H=await N.json();H.promoted&&(console.log(" User was promoted!",H),e({title:H.message,message:`Upgraded to ${H.newTier}`}),await _())}}catch(b){console.error(" Failed to check tier promotion:",b)}};return a.jsxs("div",{className:"flex min-h-screen bg-black relative overflow-hidden",children:[ce&&a.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-3",children:[a.jsxs("div",{className:"relative","data-filter-dropdown":!0,children:[a.jsx("button",{onClick:()=>{It(b=>!b)},className:"w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white/90 hover:text-white transition-colors border border-white/20",title:"Filter","aria-expanded":Tr,"aria-haspopup":"menu","data-nav-button":!0,"data-nav-type":"filter",children:a.jsx(qS,{size:18})}),Tr&&a.jsxs("div",{className:"absolute right-0 mt-2 bg-[#333333] border border-white/20 rounded-2xl shadow-2xl p-2 w-40 z-50",children:[a.jsx("button",{onClick:()=>{Ii("all"),It(!1)},className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${Fn==="all"?"bg-white/10 text-white":"text-white/70 hover:text-white hover:bg-white/5"}`,children:"All"}),a.jsx("button",{onClick:()=>{Ii("images"),It(!1)},className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${Fn==="images"?"bg-white/10 text-white":"text-white/70 hover:text-white hover:bg-white/5"}`,children:"Images"}),a.jsx("button",{onClick:()=>{Ii("videos"),It(!1)},className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${Fn==="videos"?"bg-white/10 text-white":"text-white/70 hover:text-white hover:bg-white/5"}`,children:"Videos"})]})]}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white/90 hover:text-white transition-colors border border-white/20",children:a.jsx(rP,{userId:((ep=F.getCurrentUser())==null?void 0:ep.id)||""})})}),a.jsxs("div",{className:"relative","data-user-menu":!0,children:[a.jsxs("button",{onClick:()=>{Lt(b=>!b)},className:"relative w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center transition-colors border border-white/20","aria-haspopup":"menu","aria-expanded":xs,"data-nav-button":!0,"data-nav-type":"user",children:[ga&&a.jsx("span",{className:"absolute -inset-1 rounded-full border-2 border-white/50 animate-spin",style:{borderTopColor:"transparent"}}),(()=>{const b=F.getCurrentUser();if(Ot.avatar&&typeof Ot.avatar=="string")return a.jsx("img",{src:Ot.avatar,alt:"avatar",className:"w-6 h-6 rounded-full object-cover"});if(Ot.name||b!=null&&b.name||b!=null&&b.email){const N=(Ot.name||(b==null?void 0:b.name)||(b==null?void 0:b.email)||"U").charAt(0).toUpperCase();return a.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20 text-white text-xs font-medium flex items-center justify-center",children:N})}else return a.jsx(Zd,{size:16,className:"text-white"})})()]}),xs&&a.jsxs("div",{className:"absolute right-0 mt-2 bg-[#333333] border border-white/20 rounded-2xl shadow-2xl p-2 w-40 z-50",children:[a.jsx("button",{onClick:()=>{Lt(!1),s("/profile")},className:"w-full text-left px-3 py-2 text-white/90 hover:bg-white/5 rounded-lg transition-colors",children:"Profile"}),a.jsx("button",{onClick:()=>{Lt(!1),F.logout(),s("/")},className:"w-full text-left px-3 py-2 text-white/90 hover:bg-white/5 rounded-lg transition-colors",children:"Sign out"})]})]})]}),!ce&&a.jsx("div",{className:"fixed top-4 right-4 z-50",children:a.jsx("button",{onClick:()=>s("/auth"),className:"px-6 py-2.5 rounded-full bg-white text-black text-sm font-medium hover:bg-white/90 transition-colors shadow-lg",children:"Login"})}),a.jsx("div",{className:"hidden md:flex w-[15%] sticky top-0 h-screen items-center justify-center",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 w-16 h-16",children:a.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-spin",style:{animationDuration:"3s",transformOrigin:"8px 8px",left:"50%",top:"0",marginLeft:"-2px",marginTop:"-2px"}})}),a.jsx("button",{onClick:ba,className:"w-16 h-16 rounded-full bg-black border-2 border-white/30 text-white shadow-2xl hover:bg-white/10 hover:border-white/50 btn-optimized relative z-10 flex items-center justify-center","aria-label":"Upload",children:a.jsx(Nm,{size:24})})]})}),a.jsx("div",{className:"w-[85%] min-h-screen",children:a.jsx("div",{className:"px-6 pt-24 pb-8",children:Pc?a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-3 gap-6",children:[...Array(12)].map((b,N)=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-white/5 to-white/10 rounded-xl animate-pulse"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-white/5 rounded-full w-3/4 animate-pulse"}),a.jsx("div",{className:"h-3 bg-white/5 rounded-full w-1/2 animate-pulse"})]})]},N))})}):Ai.length>0?a.jsx(ml,{media:Ai,columns:3,onMediaClick:le,onLike:fe,onShare:Bn,onRemix:_t,onFilterCreator:b=>Cr(b),showActions:!0,className:"pb-24",hideUserAvatars:!1,hideShareButton:!0,hideLikeButton:!1}):a.jsx("div",{className:"text-center py-12"})})}),$n&&a.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-40 bg-white/10 text-white text-xs px-3 py-1 rounded-full border border-white/20 backdrop-blur-sm",children:["Filtering by creator  ",a.jsx("button",{className:"underline",onClick:()=>Cr(null),children:"clear"})]}),a.jsxs("div",{className:"md:hidden fixed bottom-6 right-6 relative navbar-stable",children:[a.jsx("div",{className:"absolute inset-0 w-16 h-16",children:a.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-spin",style:{animationDuration:"3s",transformOrigin:"8px 8px",left:"50%",top:"0",marginLeft:"-2px",marginTop:"-2px"}})}),a.jsx("button",{onClick:ba,className:"w-16 h-16 rounded-full bg-black border-2 border-white/30 text-white shadow-2xl hover:bg-white/10 hover:border-white/50 btn-optimized relative z-10 flex items-center justify-center","aria-label":"Upload",children:a.jsx(Nm,{size:24})})]}),a.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:Ac,className:"hidden"}),a.jsx(Ox,{isOpen:Nc,media:Ec,startIndex:Di,onClose:()=>Li(!1),onLike:fe,onRemix:_t,onShowAuth:()=>s("/auth")}),f&&a.jsxs("div",{className:"fixed inset-0 z-50 bg-black/85 backdrop-blur-sm navbar-stable",children:[a.jsx("button",{type:"button",onClick:A,className:"absolute top-4 right-4 z-50 pointer-events-auto text-white/80 hover:text-white transition-colors","aria-label":"Close",children:a.jsx(tn,{size:20})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pb-32",children:a.jsx("div",{className:"relative w-full max-w-2xl px-6",children:a.jsx("div",{ref:o,className:"w-full flex items-center justify-center",children:m?a.jsx("video",{ref:b=>l.current=b,src:v||"",className:"max-w-full max-h-[60vh] object-contain",controls:!0,onLoadedMetadata:Ar,onLoadedData:Ar}):a.jsx("img",{ref:b=>l.current=b,src:v||"",alt:"Preview",className:"max-w-full max-h-[60vh] object-contain",onLoad:Ar})})})}),a.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-[70%] min-w-[500px] max-w-[800px]",children:a.jsxs("div",{className:"bg-[#0f0f0f] border border-white/20 rounded-2xl px-4 pt-2 pb-2 shadow-2xl",children:[a.jsx("div",{className:"mb-8",children:a.jsx("input",{value:C,onChange:b=>P(b.target.value),placeholder:"Describe the style you want...",className:"w-full bg-transparent text-white placeholder-white/40 text-xs focus:outline-none py-2"})}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{type:"button",onClick:()=>ya(!1),className:`w-6 h-6 rounded text-xs font-medium transition-colors relative group ${Oi?"bg-white/10 text-white hover:bg-white/20":"bg-white text-black"}`,title:"1 variation",children:["1",a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-black/80 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:"1 variation"})]}),a.jsxs("button",{type:"button",onClick:()=>ya(!0),className:`w-6 h-6 rounded text-xs font-medium transition-colors relative group ${Oi?"bg-white text-black":"bg-white/10 text-white hover:bg-white/20"}`,title:"2 variations",children:["2",a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-black/80 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:"2 variations"})]})]})}),a.jsxs("div",{className:"relative","data-presets-dropdown":!0,children:[a.jsx("button",{onClick:()=>{if(!ce){s("/auth");return}an(b=>!b)},className:`px-3 py-1.5 rounded-2xl text-xs border transition-colors ${ce?"bg-white/10 text-white border-white/20 hover:bg-white/15":"bg-white/5 text-white/50 border-white/10 cursor-not-allowed"}`,"data-nav-button":!0,"data-nav-type":"presets",title:ce?"Choose AI style presets":"Sign up to use AI presets",disabled:!ce,children:j?Qi(j,se):"Presets"}),ws&&a.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-[#333333] border border-white/20 rounded-xl shadow-2xl p-3 w-80 z-50",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>{ys("user clicked clear"),an(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors text-sm ${j?"text-white/80 hover:text-white hover:bg-white/10":"bg-white/20 text-white"}`,children:[a.jsx("span",{children:"None"}),!j&&a.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-white/30"})]}),vs.map(b=>a.jsxs("button",{onClick:()=>{W(b),an(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors text-sm ${j===b?"bg-white/20 text-white":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[a.jsx("span",{children:Qi(b,se)}),j===b?a.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-white/30"}):a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30"})]},b))]})})]}),a.jsxs("div",{className:"relative","data-story-dropdown":!0,children:[a.jsx("button",{onClick:()=>{if(!ce){s("/auth");return}$(!R)},className:`px-3 py-1.5 rounded-2xl text-xs border transition-colors ${ce?"bg-white/10 text-white border-white/20 hover:bg-white/15":"bg-white/5 text-white/50 border-white/10 cursor-not-allowed"}`,"aria-expanded":R,"aria-haspopup":"menu",disabled:!ce,children:"Story Mode"}),R&&a.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-[#333333] border border-white/20 rounded-xl shadow-2xl p-3 w-80 z-50",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ya,{title:"Four Seasons",themes:["four_seasons_spring","four_seasons_summer","four_seasons_autumn","four_seasons_winter"],selectedTheme:M,onThemeSelect:b=>{L("story",b),$(!1)},isExpanded:Le==="Four Seasons",onToggle:()=>ln(Le==="Four Seasons"?null:"Four Seasons")}),a.jsx(Ya,{title:"Time of Day",themes:["time_sunrise","time_day","time_sunset","time_night"],selectedTheme:M,onThemeSelect:b=>{L("story",b),$(!1)},isExpanded:Le==="Time of Day",onToggle:()=>ln(Le==="Time of Day"?null:"Time of Day")}),a.jsx(Ya,{title:"Mood Shift",themes:["mood_calm","mood_vibrant","mood_dramatic","mood_dreamy"],selectedTheme:M,onThemeSelect:b=>{L("story",b),$(!1)},isExpanded:Le==="Mood Shift",onToggle:()=>ln(Le==="Mood Shift"?null:"Mood Shift")}),a.jsx(Ya,{title:"Art Style",themes:["style_photorealistic","style_vintage","style_pastels","style_neon"],selectedTheme:M,onThemeSelect:b=>{L("story",b),$(!1)},isExpanded:Le==="Art Style",onToggle:()=>ln(Le==="Art Style"?null:"Art Style")})]})})]}),a.jsxs("div",{className:"relative","data-timemachine-dropdown":!0,children:[a.jsx("button",{onClick:()=>{if(!ce){s("/auth");return}ae(!z)},className:`px-3 py-1.5 rounded-2xl text-xs border transition-colors ${ce?"bg-white/10 text-white border-white/20 hover:bg-white/15":"bg-white/5 text-white/50 border-white/10 cursor-not-allowed"}`,"aria-expanded":z,"aria-haspopup":"menu",disabled:!ce,children:"Time Machine"}),z&&a.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-[#333333] border border-white/20 rounded-xl shadow-2xl p-3 w-80 z-50",children:a.jsx("div",{className:"space-y-1",children:Object.entries($P).map(([b,N])=>a.jsxs("button",{onClick:()=>{L("time_machine",b),ae(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors text-sm ${Z===b?"bg-white/20 text-white":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[a.jsx("span",{children:N}),Z===b?a.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-white/30"}):a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30"})]},b))})})]}),a.jsxs("div",{className:"relative","data-restore-dropdown":!0,children:[a.jsx("button",{onClick:()=>{if(!ce){s("/auth");return}St(!he)},className:`px-3 py-1.5 rounded-2xl text-xs border transition-colors ${ce?"bg-white/10 text-white border-white/20 hover:bg-white/15":"bg-white/5 text-white/50 border-white/10 cursor-not-allowed"}`,"aria-expanded":he,"aria-haspopup":"menu",disabled:!ce,children:"Restore"}),he&&a.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-[#333333] border border-white/20 rounded-xl shadow-2xl p-3 w-80 z-50",children:a.jsx("div",{className:"space-y-1",children:Object.entries(FP).map(([b,N])=>a.jsxs("button",{onClick:()=>{L("restore",b),St(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors text-sm ${dt===b?"bg-white/20 text-white":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[a.jsx("span",{children:N}),dt===b?a.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-white/30"}):a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30"})]},b))})})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>{if(!ce){s("/auth");return}ib()},title:ce?"Save to draft":"Sign up to save drafts",className:`w-9 h-9 rounded-full btn-optimized flex items-center justify-center border relative group ${ce?"bg-white/10 text-white border-white/20 hover:bg-white/15":"bg-white/5 text-white/50 border-white/10 cursor-not-allowed"}`,"aria-label":"Save to draft",disabled:!ce,children:[a.jsx(ro,{size:14}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-black/80 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:"Save to draft"})]}),a.jsx("button",{onClick:()=>{ge(!0),setTimeout(()=>{j?O("preset",{presetId:j,presetData:se[j],promptOverride:C}):O("custom",{promptOverride:C})},100)},disabled:!v||!C.trim()&&!j,className:`w-10 h-10 rounded-full btn-optimized flex items-center justify-center shadow-lg hover:shadow-xl ${!v||!C.trim()&&!j?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-white text-black hover:bg-white/90"}`,"aria-label":"Generate",title:`${ce?v?!C.trim()&&!j?"Enter a prompt or select a preset first":j?`Generate with ${Qi(j,se)} preset`:"Generate AI content":"Upload media first":"Sign up to generate AI content"}`,children:ga?a.jsx("div",{className:"w-4 h-4 border-2 border-black/20 border-t-black rounded-full animate-spin"}):a.jsx(MS,{size:18})})]})]})})]})})]}),kr&&a.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md bg-[#222222] border border-white/20 rounded-2xl p-6 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-white font-medium text-lg",children:"Generate Caption"}),a.jsx("button",{onClick:()=>Sr(!1),className:"text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:20})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Platform"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["instagram","x","tiktok"].map(b=>a.jsx("button",{onClick:()=>fa(b),className:`px-3 py-2 rounded-lg text-sm border transition-colors ${Pi===b?"border-white/40 text-white bg-white/10":"border-white/20 text-white/80 hover:text-white hover:bg-white/5"}`,children:b},b))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Style"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["trendy","casual","professional","artistic"].map(b=>a.jsx("button",{onClick:()=>Ei(b),className:`px-2 py-2 rounded-lg text-xs border transition-colors ${Ni===b?"border-white/40 text-white bg-white/10":"border-white/20 text-white/80 hover:text-white hover:bg-white/5"}`,children:b},b))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:V,className:"px-4 py-2 rounded-lg bg-white text-black text-sm font-medium disabled:opacity-50 transition-colors",disabled:!C.trim()||Un,children:Un?"Generating":"Generate"}),a.jsx("button",{onClick:te,className:"px-4 py-2 rounded-lg border border-white/20 text-white text-sm disabled:opacity-50 hover:bg-white/5 transition-colors",disabled:!_r,children:"Copy"})]}),a.jsxs("div",{children:[a.jsx("textarea",{value:_r,onChange:b=>jr(b.target.value),placeholder:"Your caption will appear here",className:"w-full h-28 p-3 rounded-xl bg-white/5 border border-white/20 text-white placeholder-white/40 resize-none text-sm focus:outline-none focus:border-white/40 focus:bg-white/10 transition-colors"}),a.jsx("div",{className:"text-white/50 text-xs mt-2",children:"Includes #AiAsABrush automatically"})]})]})]})}),a.jsx(EP,{isOpen:Mi,onClose:()=>wa(!1),mediaUrl:Vn==null?void 0:Vn.url,caption:Vn==null?void 0:Vn.prompt,title:"Share Your Creation"})]})},QP=()=>{const t=ms();return a.jsxs("div",{className:"min-h-screen bg-black text-white",children:[a.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black/95 backdrop-blur-md border-b border-white/10 z-40",children:a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsxs("button",{onClick:()=>t(-1),className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[a.jsx(ia,{size:20}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-lg font-semibold",children:"Privacy Policy"}),a.jsx("div",{className:"w-20"})," "]})}),a.jsx("div",{className:"pt-20 px-6 pb-20 max-w-4xl mx-auto",children:a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Privacy Policy"}),a.jsxs("div",{className:"space-y-6 text-white/90",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interpretation and Definitions"}),a.jsx("p",{className:"mb-4",children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Definitions"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-sm",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Account"})," means a unique account created for You to access our Service or parts of our Service."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Affiliate"}),' means an entity that controls, is controlled by or is under common control with a party, where "control" means ownership of 50% or more of the shares, equity interest or other securities entitled to vote for election of directors or other managing authority.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Platform"}),' (referred to as either "the Platform", "We", "Us" or "Our" in this Agreement) refers to Stefna.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Cookies"})," are small files that are placed on Your computer, mobile device or any other device by a website, containing the details of Your browsing history on that website among its many uses."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Device"})," means any device that can access the Service such as a computer, a cellphone or a digital tablet."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Personal Data"})," is any information that relates to an identified or identifiable individual."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Service"})," refers to the Website, Stefna, an AI-powered photo and video editing platform."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Service Provider"})," means any natural or legal person who processes the data on behalf of the Platform."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Usage Data"})," refers to data collected automatically, either generated by the use of the Service or from the Service infrastructure itself."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Website"})," refers to Stefna, accessible from stefna.xyz"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"You"})," means the individual accessing or using the Service, or the Platform, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Collecting and Using Your Personal Data"}),a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Types of Data Collected"}),a.jsx("h4",{className:"text-md font-medium mb-2",children:"Personal Data"}),a.jsx("p",{className:"mb-4",children:"While using Our Service, We may ask You to provide Us with certain personally identifiable information that can be used to contact or identify You. Personally identifiable information may include, but is not limited to:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[a.jsx("li",{children:"Email address"}),a.jsx("li",{children:"First name and last name"}),a.jsx("li",{children:"Uploaded Content: Photos and videos uploaded by users, as well as all AI-generated images/videos"}),a.jsx("li",{children:"Usage Data"})]}),a.jsx("h4",{className:"text-md font-medium mb-2 mt-6",children:"Usage Data"}),a.jsx("p",{className:"mb-4",children:"Usage Data is collected automatically when using the Service. Usage Data may include information such as Your Device's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that You visit, the time and date of Your visit, the time spent on those pages, unique device identifiers and other diagnostic data."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Tracking Technologies and Cookies"}),a.jsx("p",{className:"mb-4",children:"We use Cookies and similar tracking technologies to track the activity on Our Service and store certain information. The technologies We use may include:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Cookies or Browser Cookies:"})," A cookie is a small file placed on Your Device. You can instruct Your browser to refuse all Cookies or to indicate when a Cookie is being sent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Web Beacons:"})," Certain sections of our Service and our emails may contain small electronic files known as web beacons that permit the Platform to count users who have visited those pages or opened an email."]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Use of Your Personal Data"}),a.jsx("p",{className:"mb-4",children:"The Platform may use Personal Data for the following purposes:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[a.jsx("li",{children:"To provide and maintain our Service, including to monitor the usage of our Service. This includes storing uploaded content (photos, videos, and AI-generated images/videos) to provide access for the user and enable features like editing and remixing."}),a.jsx("li",{children:"To manage Your Account: to manage Your registration as a user of the Service."}),a.jsx("li",{children:"To contact You: To contact You by email, telephone calls, SMS, or other equivalent forms of electronic communication regarding updates or informative communications related to the functionalities, products or contracted services."}),a.jsx("li",{children:"To provide You with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless You have opted not to receive such information."}),a.jsx("li",{children:"To manage Your requests: To attend and manage Your requests to Us."}),a.jsx("li",{children:"For business transfers: We may use Your information to evaluate or conduct a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Our assets."}),a.jsx("li",{children:"For other purposes: We may use Your information for other purposes, such as data analysis, identifying usage trends, determining the effectiveness of our promotional campaigns and to evaluate and improve our Service, products, services, marketing and your experience."})]}),a.jsx("p",{className:"mt-4",children:"All data is used solely for providing, securing, and improving Stefna's services. We do not sell user data to third parties."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Retention of Your Personal Data"}),a.jsx("p",{children:"The Platform will retain Your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use Your Personal Data to the extent necessary to comply with our legal obligations, resolve disputes, and enforce our legal agreements and policies."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Transfer of Your Personal Data"}),a.jsx("p",{children:"Your information, including Personal Data, is processed at the Platform's operating offices and in any other places where the parties involved in the processing are located. It means that this information may be transferred to  and maintained on  computers located outside of Your state, province, country or other governmental jurisdiction where the data protection laws may differ than those from Your jurisdiction."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Delete Your Personal Data"}),a.jsx("p",{className:"mb-4",children:"You have the right to delete or request that We assist in deleting the Personal Data that We have collected about You. Our Service may give You the ability to delete certain information about You from within the Service."}),a.jsx("p",{children:"You may update, amend, or delete Your information at any time by signing in to Your Account, if you have one, and visiting the account settings section that allows you to manage Your personal information. You may also contact Us to request access to, correct, or delete any personal information that You have provided to Us."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Security of Your Personal Data"}),a.jsx("p",{children:"The security of Your Personal Data is important to Us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While We strive to use commercially acceptable means to protect Your Personal Data, We cannot guarantee its absolute security. All user content and personal information are stored securely using Supabase's managed infrastructure."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Children's Privacy"}),a.jsx("p",{children:"You must be at least 13 years old to create an account and use Stefna. If you are under the age required by the laws of your country to consent to data processing (e.g., 16 in some jurisdictions), you may only use Stefna with parental consent. If We become aware that We have collected Personal Data from anyone under the age required by the laws of their country to consent to data processing without verification of parental consent, We take steps to remove that information from Our servers."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy, You can contact us:"}),a.jsx("ul",{className:"list-disc pl-6 mt-2",children:a.jsxs("li",{children:["By email: ",a.jsx("a",{href:"mailto:hello@stefna.xyz",className:"text-blue-400 hover:text-blue-300",children:"hello@stefna.xyz"})]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-white/20",children:a.jsx("p",{className:"text-sm text-white/60",children:"Last updated: August 4, 2025"})})]})]})})]})},XP=()=>{const t=ms();return a.jsxs("div",{className:"min-h-screen bg-black text-white",children:[a.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black/95 backdrop-blur-md border-b border-white/10 z-40",children:a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsxs("button",{onClick:()=>t(-1),className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[a.jsx(ia,{size:20}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-lg font-semibold",children:"Terms of Service"}),a.jsx("div",{className:"w-20"})," "]})}),a.jsx("div",{className:"pt-20 px-6 pb-20 max-w-4xl mx-auto",children:a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Terms of Service"}),a.jsxs("div",{className:"space-y-6 text-white/90",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interpretation and Definitions"}),a.jsx("p",{className:"mb-4",children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Definitions"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-sm",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Affiliate"}),' means an entity that controls, is controlled by or is under common control with a party, where "control" means ownership of 50% or more of the shares, equity interest or other securities entitled to vote for election of directors or other managing authority.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Platform"}),' (referred to as either "the Platform", "We", "Us" or "Our" in this Agreement) refers to Stefna, an AI-powered photo and video editing platform.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Device"})," means any device that can access the Service such as a computer, a cellphone or a digital tablet."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Service"})," refers to the Website, Stefna, which provides AI-powered photo and video editing tools through an easy-to-use web interface, with mobile applications launching soon."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Terms and Conditions"}),' (also referred as "Terms") mean these Terms and Conditions that form the entire agreement between You and the Platform regarding the use of the Service.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Third-party Social Media Service"})," means any services or content provided by a third-party that may be displayed, included or made available by the Service."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Website"})," refers to Stefna, accessible from stefna.xyz"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"You"})," means the individual accessing or using the Service, or the Platform, or other legal entity on behalf of which such individual is accessing or using the Service, as applicable."]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Acknowledgment"}),a.jsx("p",{className:"mb-4",children:"These are the Terms and Conditions governing the use of this Service and the agreement that operates between You and the Platform. These Terms and Conditions set out the rights and obligations of all users regarding the use of the Service."}),a.jsx("p",{className:"mb-4",children:"Your access to and use of the Service is conditioned on Your acceptance of and compliance with these Terms and Conditions. These Terms and Conditions apply to all visitors, users and others who access or use the Service."}),a.jsx("p",{className:"mb-4",children:"By accessing or using the Service You agree to be bound by these Terms and Conditions. If You disagree with any part of these Terms and Conditions then You may not access the Service."}),a.jsx("p",{className:"mb-4",children:"You must be at least 13 years old to create an account and use Stefna. If you are under the age required by the laws of your country to consent to data processing (e.g., 16 in some jurisdictions), you may only use Stefna with parental consent."}),a.jsx("p",{children:"Your access to and use of the Service is also conditioned on Your acceptance of and compliance with the Privacy Policy of the Platform. Our Privacy Policy describes Our policies and procedures on the collection, use and disclosure of Your personal information when You use the Application or the Website and tells You about Your privacy rights and how the law protects You. Please read Our Privacy Policy carefully before using Our Service."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User Content"}),a.jsx("p",{children:"By uploading, submitting, or generating content (including photos, videos, and AI-generated images/videos) on Stefna, you grant Stefna a non-exclusive, worldwide, royalty-free license to use, reproduce, modify, adapt, publish, translate, create derivative works from, distribute, and display such content solely for the purpose of providing, securing, and improving Stefna's services, including enabling features like editing and remixing. You represent and warrant that you own or have the necessary licenses, rights, consents, and permissions to use and authorize Stefna to use all intellectual property rights in and to any User Content you upload or generate."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Links to Other Websites"}),a.jsx("p",{className:"mb-4",children:"Our Service may contain links to third-party web sites or services that are not owned or controlled by the Platform. The Platform has no control over, and assumes no responsibility for, the content, privacy policies, or practices of any third party web sites or services."}),a.jsx("p",{children:"You further acknowledge and agree that the Platform shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of or reliance on any such content, goods or services available on or through any such web sites or services. We strongly advise You to read the terms and conditions and privacy policies of any third-party web sites or services that You visit."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Termination"}),a.jsx("p",{children:"We may terminate or suspend Your access immediately, without prior notice or liability, for any reason whatsoever, including without limitation if You breach these Terms and Conditions. Upon termination, Your right to use the Service will cease immediately."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Limitation of Liability"}),a.jsx("p",{className:"mb-4",children:"Notwithstanding any damages that You might incur, the entire liability of the Platform and any of its suppliers under any provision of this Terms and Your exclusive remedy for all of the foregoing shall be limited to the amount actually paid by You through the Service or 100 USD if You haven't purchased anything through the Service."}),a.jsx("p",{children:"To the maximum extent permitted by applicable law, in no event shall the Platform or its suppliers be liable for any special, incidental, indirect, or consequential damages whatsoever (including, but not limited to, damages for loss of profits, loss of data or other information, for business interruption, for personal injury, loss of privacy arising out of or in any way related to the use of or inability to use the Service, third-party software and/or third-party hardware used with the Service, or otherwise in connection with any provision of this Terms), even if the Platform or any supplier has been advised of the possibility of such damages and even if the remedy fails of its essential purpose."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:'"AS IS" and "AS AVAILABLE" Disclaimer'}),a.jsx("p",{children:'The Service is provided to You "AS IS" and "AS AVAILABLE" and with all faults and defects without warranty of any kind. To the maximum extent permitted under applicable law, the Platform, on its own behalf and on behalf of its Affiliates and its and their respective licensors and service providers, expressly disclaims all warranties, whether express, implied, statutory or otherwise, with respect to the Service, including all implied warranties of merchantability, fitness for a particular purpose, title and non-infringement, and warranties that may arise out of course of dealing, course of performance, usage or trade practice.'})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Governing Law"}),a.jsx("p",{children:"The laws of the Country, excluding its conflicts of law rules, shall govern this Terms and Your use of the Service. Your use of the Application may also be subject to other local, state, national, or international laws."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Disputes Resolution"}),a.jsx("p",{children:"If You have any concern or dispute about the Service, You agree to first try to resolve the dispute informally by contacting the Platform."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"For European Union (EU) Users"}),a.jsx("p",{children:"If You are a European Union consumer, you will benefit from any mandatory provisions of the law of the country in which You are resident."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"United States Legal Compliance"}),a.jsx("p",{children:'You represent and warrant that (i) You are not located in a country that is subject to the United States government embargo, or that has been designated by the United States government as a "terrorist supporting" country, and (ii) You are not listed on any United States government list of prohibited or restricted parties.'})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Severability and Waiver"}),a.jsx("p",{className:"mb-4",children:"If any provision of these Terms is held to be unenforceable or invalid, such provision will be changed and interpreted to accomplish the objectives of such provision to the greatest extent possible under applicable law and the remaining provisions will continue in full force and effect."}),a.jsx("p",{children:"Except as provided herein, the failure to exercise a right or to require performance of an obligation under these Terms shall not affect a party's ability to exercise such right or require such performance at any time thereafter nor shall the waiver of a breach constitute a waiver of any subsequent breach."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Translation Interpretation"}),a.jsx("p",{children:"These Terms and Conditions may have been translated if We have made them available to You on our Service. You agree that the original English text shall prevail in the case of a dispute."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Changes to These Terms and Conditions"}),a.jsx("p",{className:"mb-4",children:"We reserve the right, at Our sole discretion, to modify or replace these Terms at any time. If a revision is material We will make reasonable efforts to provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at Our sole discretion."}),a.jsx("p",{children:"By continuing to access or use Our Service after those revisions become effective, You agree to be bound by the revised terms. If You do not agree to the new terms, in whole or in part, please stop using the website and the Service."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about these Terms and Conditions, You can contact us:"}),a.jsx("ul",{className:"list-disc pl-6 mt-2",children:a.jsxs("li",{children:["By email: ",a.jsx("a",{href:"mailto:hello@stefna.xyz",className:"text-blue-400 hover:text-blue-300",children:"hello@stefna.xyz"})]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-white/20",children:a.jsx("p",{className:"text-sm text-white/60",children:"Last updated: August 4, 2025"})})]})]})})]})},ZP=()=>{const t=ms();return a.jsxs("div",{className:"min-h-screen bg-black text-white",children:[a.jsx("div",{className:"fixed top-0 left-0 right-0 bg-black/95 backdrop-blur-md border-b border-white/10 z-40",children:a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsxs("button",{onClick:()=>t(-1),className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[a.jsx(ia,{size:20}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"text-lg font-semibold",children:"Cookies Policy"}),a.jsx("div",{className:"w-20"})," "]})}),a.jsx("div",{className:"pt-20 px-6 pb-20 max-w-4xl mx-auto",children:a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Cookies Policy"}),a.jsxs("div",{className:"space-y-6 text-white/90",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interpretation and Definitions"}),a.jsx("p",{className:"mb-4",children:"The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural."}),a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Definitions"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-sm",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Platform"}),' (referred to as either "the Platform", "We", "Us" or "Our" in this Cookies Policy) refers to Stefna.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Cookies"})," means small files that are placed on Your computer, mobile device or any other device by a website, containing details of your browsing history on that website among its many uses."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Website"})," refers to Stefna, accessible from stefna.xyz"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"You"})," means the individual accessing or using the Website, or a Platform, or any legal entity on behalf of which such individual is accessing or using the Website, as applicable."]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"The use of the Cookies"}),a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Type of Cookies We Use"}),a.jsx("p",{className:"mb-4",children:'Cookies can be "Persistent" or "Session" Cookies. Persistent Cookies remain on your personal computer or mobile device when You go offline, while Session Cookies are deleted as soon as You close your web browser. We use both session and persistent Cookies for the purposes set out below:'}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium mb-2",children:"Necessary / Essential Cookies"}),a.jsxs("p",{className:"mb-2 text-sm",children:[a.jsx("strong",{children:"Type:"})," Session Cookies",a.jsx("br",{}),a.jsx("strong",{children:"Administered by:"})," Us",a.jsx("br",{}),a.jsx("strong",{children:"Purpose:"})," These Cookies are essential to provide You with services available through the Website and to enable You to use some of its features. They help to authenticate users and prevent fraudulent use of user accounts. Without these Cookies, the services that You have asked for cannot be provided, and We only use these Cookies to provide You with those services."]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium mb-2",children:"Functionality Cookies"}),a.jsxs("p",{className:"mb-2 text-sm",children:[a.jsx("strong",{children:"Type:"})," Persistent Cookies",a.jsx("br",{}),a.jsx("strong",{children:"Administered by:"})," Us",a.jsx("br",{}),a.jsx("strong",{children:"Purpose:"})," These Cookies allow us to remember choices You make when You use the Website, such as remembering your login details or language preference. The purpose of these Cookies is to provide You with a more personal experience and to avoid You having to re-enter your preferences every time You use the Website."]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium mb-2",children:"Analytics Cookies"}),a.jsxs("p",{className:"mb-2 text-sm",children:[a.jsx("strong",{children:"Type:"})," Persistent Cookies",a.jsx("br",{}),a.jsx("strong",{children:"Administered by:"})," Google Analytics",a.jsx("br",{}),a.jsx("strong",{children:"Purpose:"})," These Cookies are used to collect information about how You use the Service, such as which pages You visit, the time spent on those pages, and user engagement. This data helps Us understand website traffic and improve the Service."]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium mb-2",children:"Advertising Cookies"}),a.jsxs("p",{className:"mb-2 text-sm",children:[a.jsx("strong",{children:"Type:"})," Persistent Cookies",a.jsx("br",{}),a.jsx("strong",{children:"Administered by:"})," Social Media Platforms",a.jsx("br",{}),a.jsx("strong",{children:"Purpose:"})," These Cookies are used by social media pixels/trackers to promote Stefna via various social media platforms for outreach and growth, and to measure the effectiveness of Our advertising campaigns."]})]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Choices Regarding Cookies"}),a.jsx("p",{className:"mb-4",children:"If You prefer to avoid the use of Cookies on the Website, first You must disable the use of Cookies in your browser and then delete the Cookies saved in your browser associated with this website. You may use this option for preventing the use of Cookies at any time."}),a.jsx("p",{className:"mb-4",children:"If You do not accept Our Cookies, You may experience some inconvenience in your use of the Website and some features may not function properly."}),a.jsx("p",{className:"mb-4",children:"If You'd like to delete Cookies or instruct your web browser to delete or refuse Cookies, please visit the help pages of your web browser:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[a.jsxs("li",{children:["For the Chrome web browser, please visit this page from Google: ",a.jsx("a",{href:"https://support.google.com/accounts/answer/32050",className:"text-blue-400 hover:text-blue-300",target:"_blank",rel:"noopener noreferrer",children:"https://support.google.com/accounts/answer/32050"})]}),a.jsxs("li",{children:["For the Internet Explorer web browser, please visit this page from Microsoft: ",a.jsx("a",{href:"http://support.microsoft.com/kb/278835",className:"text-blue-400 hover:text-blue-300",target:"_blank",rel:"noopener noreferrer",children:"http://support.microsoft.com/kb/278835"})]}),a.jsxs("li",{children:["For the Firefox web browser, please visit this page from Mozilla: ",a.jsx("a",{href:"https://support.mozilla.org/en-US/kb/delete-cookies-remove-info-websites-stored",className:"text-blue-400 hover:text-blue-300",target:"_blank",rel:"noopener noreferrer",children:"https://support.mozilla.org/en-US/kb/delete-cookies-remove-info-websites-stored"})]}),a.jsxs("li",{children:["For the Safari web browser, please visit this page from Apple: ",a.jsx("a",{href:"https://support.apple.com/guide/safari/manage-cookies-and-website-data-sfri11471/mac",className:"text-blue-400 hover:text-blue-300",target:"_blank",rel:"noopener noreferrer",children:"https://support.apple.com/guide/safari/manage-cookies-and-website-data-sfri11471/mac"})]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Cookies Policy, You can contact us:"}),a.jsx("ul",{className:"list-disc pl-6 mt-2",children:a.jsxs("li",{children:["By email: ",a.jsx("a",{href:"mailto:hello@stefna.xyz",className:"text-blue-400 hover:text-blue-300",children:"hello@stefna.xyz"})]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-white/20",children:a.jsx("p",{className:"text-sm text-white/60",children:"Last updated: August 4, 2025"})})]})]})})]})},eN=({size:t=16,className:e=""})=>a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),a.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),a.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),tN=({size:t=16,className:e=""})=>a.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:a.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),nN=({size:t=16,className:e=""})=>a.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:a.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),rN=({size:t=16,className:e=""})=>a.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:a.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})}),sN=({size:t=16,className:e=""})=>a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"}),a.jsx("path",{d:"M12 6a6 6 0 1 0 6 6 6 6 0 0 0-6-6zm0 10a4 4 0 1 1 4-4 4 4 0 0 1-4 4z"})]}),iN=({size:t=16,className:e=""})=>a.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),a.jsx("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})]}),oN=({media:t,columns:e=3,onMediaClick:n,onEdit:r,onDelete:s,onShare:i,showActions:o=!0,className:l=""})=>{const[c,u]=w.useState(null),d=w.useRef(null),h=(f,p)=>{p.stopPropagation(),f()};return t.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(Pm,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No drafts found"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Your draft media will appear here"})]}):a.jsx("div",{className:`${l}`,ref:d,children:a.jsx("div",{className:"columns-3 gap-1 mx-auto",style:{maxWidth:"1200px"},children:t.map(f=>a.jsx("div",{className:"break-inside-avoid mb-1 relative group cursor-pointer bg-white/5 rounded-lg overflow-hidden",onMouseEnter:()=>u(f.id),onMouseLeave:()=>u(null),onClick:()=>n==null?void 0:n(f),children:a.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",style:{aspectRatio:f.aspectRatio||1},children:[f.type==="video"?a.jsx("video",{src:f.url,className:"w-full h-full object-cover",muted:!0,loop:!0,onMouseEnter:p=>p.currentTarget.play(),onMouseLeave:p=>p.currentTarget.pause()}):a.jsx("img",{src:f.url,alt:f.prompt,className:"w-full h-full object-cover",loading:"lazy"}),a.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-sm rounded px-2 py-1",children:a.jsx("span",{className:"text-white text-xs font-medium",children:"Draft"})}),a.jsx("div",{className:`absolute inset-0 bg-black/20 transition-opacity duration-300 ${c===f.id?"opacity-100":"opacity-0"}`}),o&&c===f.id&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"flex space-x-2",children:[i&&a.jsx("button",{onClick:p=>h(()=>i(f),p),className:"w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 btn-optimized",title:"Share",children:a.jsx(pc,{size:16})}),a.jsx("button",{onClick:p=>h(()=>r==null?void 0:r(f),p),className:"w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 btn-optimized",title:"Edit",children:a.jsx(Pm,{size:16})}),a.jsx("button",{onClick:p=>h(()=>s==null?void 0:s(f),p),className:"w-10 h-10 bg-black/60 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 btn-optimized",title:"Delete",children:a.jsx(q0,{size:16})})]})})]})},f.id))})})},aN=(t,e,n,r="edit")=>{const s={};e&&(r==="remix"?(s.remixUrl=e,n&&(s.remixPrompt=n)):(s.editUrl=e,n&&(s.editPrompt=n))),t("/",{state:s})},lN=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmText:i="Confirm",cancelText:o="Cancel",confirmButtonClass:l="bg-red-500 hover:bg-red-600",cancelButtonClass:c="bg-white/10 hover:bg-white/20"})=>{if(!t)return null;const u=()=>{n(),e()};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-[#111111] rounded-2xl p-6 w-full max-w-md mx-4 border border-white/20",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-white text-lg font-semibold",children:r}),a.jsx("button",{onClick:e,className:"text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:20})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-white/80 text-sm",children:s}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{onClick:e,className:`px-4 py-2 text-white rounded-lg transition-colors ${c}`,children:o}),a.jsx("button",{onClick:u,className:`px-4 py-2 text-white rounded-lg transition-colors ${l}`,children:i})]})]})]})]})};var un=(t=>(t.REGISTERED="registered",t.VERIFIED="verified",t.CONTRIBUTOR="contributor",t))(un||{});const Kr=class Kr{constructor(){ve(this,"totalTokens",25e7);ve(this,"usedTokens",0);ve(this,"rateLimitWindow",30);ve(this,"dailyResetHour",0);ve(this,"tokenLimits",{registered:30,verified:60,contributor:120});ve(this,"tokenCosts",{photo:{standard:2,high:2},video:{standard:5,high:5}});ve(this,"rateLimitCache",new Map);ve(this,"deviceCache",new Map);this.loadTokenUsage(),this.startDailyReset()}static getInstance(){return Kr.instance||(Kr.instance=new Kr),Kr.instance}async canGenerate(e,n,r,s="high"){const i=await this.getUserUsage(e),o=this.getTokenCost(r,s);return this.isRateLimited(e)?{canGenerate:!1,reason:"Rate limited. Please wait 30 seconds between generations."}:i.dailyUsage+o>i.dailyLimit?{canGenerate:!1,reason:`Daily limit reached. You have ${i.dailyLimit-i.dailyUsage} tokens remaining.`,remainingTokens:i.dailyLimit-i.dailyUsage}:this.usedTokens+o>this.totalTokens?{canGenerate:!1,reason:"Service temporarily unavailable due to high demand."}:{canGenerate:!0,remainingTokens:i.dailyLimit-i.dailyUsage-o}}async generateContent(e,n,r,s="high",i,o,l){if(!(await this.canGenerate(e,n,r,s)).canGenerate)return{success:!1,tokensUsed:0};const u=this.getTokenCost(r,s),d=this.generateId(),h={id:d,userId:e,type:r,quality:s,tokensUsed:u,timestamp:new Date().toISOString(),prompt:i,ipAddress:o,deviceId:l},f=await this.getUserUsage(e);return f.dailyUsage+=u,f.totalUsage+=u,await this.saveUserUsage(e,f),this.usedTokens+=u,this.setRateLimit(e),this.trackDeviceUsage(l,e),await this.saveGeneration(h),{success:!0,tokensUsed:u,generationId:d}}async getUserUsage(e){const n=localStorage.getItem(`token_usage_${e}`);if(n){const s=JSON.parse(n);return this.shouldResetDaily(s.lastReset)&&(s.dailyUsage=0,s.lastReset=new Date().toISOString(),await this.saveUserUsage(e,s)),s}const r={userId:e,dailyUsage:0,dailyLimit:this.tokenLimits.registered,lastReset:new Date().toISOString(),totalUsage:0,userTier:"registered",isRateLimited:!1,lastGeneration:""};return await this.saveUserUsage(e,r),r}async updateUserTier(e,n){localStorage.removeItem(`token_usage_${e}`);const r={userId:e,dailyUsage:0,dailyLimit:this.tokenLimits[n],lastReset:new Date().toISOString(),totalUsage:0,userTier:n,isRateLimited:!1,lastGeneration:""};await this.saveUserUsage(e,r)}async addBonusTokens(e,n){const r=await this.getUserUsage(e);r.dailyLimit+=n,await this.saveUserUsage(e,r)}async generateReferralCode(e){const n=`STEFNA-${e.slice(-6).toUpperCase()}-${Math.random().toString(36).substr(2,4).toUpperCase()}`,r=JSON.parse(localStorage.getItem("referral_codes")||"{}");return r[n]={userId:e,createdAt:new Date().toISOString(),invites:0,tokensEarned:0},localStorage.setItem("referral_codes",JSON.stringify(r)),n}async processInvite(e,n){const r=JSON.parse(localStorage.getItem("referral_codes")||"{}"),s=r[e];if(!s)return{success:!1,tokensAwarded:0};const i=50;await this.addBonusTokens(s.userId,i);const o=25;return await this.addBonusTokens(n,o),s.invites+=1,s.tokensEarned+=i,r[e]=s,localStorage.setItem("referral_codes",JSON.stringify(r)),{success:!0,tokensAwarded:i+o}}async getReferralStats(e){const n=JSON.parse(localStorage.getItem("referral_codes")||"{}");for(const[s,i]of Object.entries(n))if(i.userId===e)return{invites:i.invites||0,tokensEarned:i.tokensEarned||0,referralCode:s};return{invites:0,tokensEarned:0,referralCode:await this.generateReferralCode(e)}}async checkForAbuse(e,n){return(this.deviceCache.get(e)||[]).length>3?{isAbuse:!0,reason:"Too many accounts from same device"}:Array.from(this.deviceCache.values()).flat().filter(o=>o.includes(n)).length>5?{isAbuse:!0,reason:"Too many accounts from same IP"}:{isAbuse:!1}}getTokenCost(e,n){return this.tokenCosts[e][n]}isRateLimited(e){const n=this.rateLimitCache.get(e);return n?Date.now()-n<this.rateLimitWindow*1e3:!1}setRateLimit(e){this.rateLimitCache.set(e,Date.now())}trackDeviceUsage(e,n){const r=this.deviceCache.get(e)||[];r.includes(n)||(r.push(n),this.deviceCache.set(e,r))}shouldResetDaily(e){const n=new Date(e),r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate(),this.dailyResetHour);return n<s}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}async saveUserUsage(e,n){localStorage.setItem(`token_usage_${e}`,JSON.stringify(n))}async saveGeneration(e){const n=JSON.parse(localStorage.getItem("token_generations")||"[]");n.push(e),localStorage.setItem("token_generations",JSON.stringify(n))}loadTokenUsage(){const e=localStorage.getItem("total_used_tokens");e&&(this.usedTokens=parseInt(e))}startDailyReset(){setInterval(()=>{const e=new Date;e.getUTCHours()===this.dailyResetHour&&e.getUTCMinutes()===0&&this.resetAllDailyUsage()},6e4)}resetAllDailyUsage(){console.log("Daily token reset completed")}getServiceStats(){const e=this.totalTokens-this.usedTokens,n=this.usedTokens/this.totalTokens*100;return{totalTokens:this.totalTokens,usedTokens:this.usedTokens,remainingTokens:e,usagePercentage:n}}emergencyDisable(){this.totalTokens=0,console.warn("Token service emergency disabled")}emergencyRestore(e){this.totalTokens=e,console.log(`Token service restored with ${e} tokens`)}};ve(Kr,"instance");let th=Kr;const qa=th.getInstance(),cN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(()=>Promise.resolve().then(()=>Ci),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class qf extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class uN extends qf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zg extends qf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ey extends qf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var nh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(nh||(nh={}));var dN=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class hN{constructor(e,{headers:n={},customFetch:r,region:s=nh.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=cN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return dN(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new uN(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Zg(h);if(!h.ok)throw new ey(h);let p=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof ey||s instanceof Zg?s.context:void 0}}})}}var gt={},Kf={},xc={},ua={},bc={},kc={},fN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vi=fN();const pN=vi.fetch,Lx=vi.fetch.bind(vi),Dx=vi.Headers,mN=vi.Request,gN=vi.Response,Ci=Object.freeze(Object.defineProperty({__proto__:null,Headers:Dx,Request:mN,Response:gN,default:Lx,fetch:pN},Symbol.toStringTag,{value:"Module"})),yN=hb(Ci);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});let vN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Sc.default=vN;var Mx=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kc,"__esModule",{value:!0});const wN=Mx(yN),xN=Mx(Sc);let bN=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,p="OK")}catch{i.status===404&&x===""?(f=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new xN.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};kc.default=bN;var kN=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});const SN=kN(kc);let _N=class extends SN.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bc.default=_N;var jN=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ua,"__esModule",{value:!0});const CN=jN(bc);let TN=class extends CN.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ua.default=TN;var PN=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xc,"__esModule",{value:!0});const Xi=PN(ua);let NN=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Xi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Xi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Xi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};xc.default=NN;var _c={},jc={};Object.defineProperty(jc,"__esModule",{value:!0});jc.version=void 0;jc.version="0.0.0-automated";Object.defineProperty(_c,"__esModule",{value:!0});_c.DEFAULT_HEADERS=void 0;const EN=jc;_c.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${EN.version}`};var Ux=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kf,"__esModule",{value:!0});const AN=Ux(xc),RN=Ux(ua),IN=_c;let ON=class $x{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},IN.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new AN.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $x(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new RN.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Kf.default=ON;var Ti=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gt,"__esModule",{value:!0});gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const Fx=Ti(Kf);gt.PostgrestClient=Fx.default;const zx=Ti(xc);gt.PostgrestQueryBuilder=zx.default;const Vx=Ti(ua);gt.PostgrestFilterBuilder=Vx.default;const Bx=Ti(bc);gt.PostgrestTransformBuilder=Bx.default;const Wx=Ti(kc);gt.PostgrestBuilder=Wx.default;const Hx=Ti(Sc);gt.PostgrestError=Hx.default;var LN=gt.default={PostgrestClient:Fx.default,PostgrestQueryBuilder:zx.default,PostgrestFilterBuilder:Vx.default,PostgrestTransformBuilder:Bx.default,PostgrestBuilder:Wx.default,PostgrestError:Hx.default};const{PostgrestClient:DN,PostgrestQueryBuilder:FA,PostgrestFilterBuilder:zA,PostgrestTransformBuilder:VA,PostgrestBuilder:BA,PostgrestError:WA}=LN;class MN{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);if(r>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const s=this.dynamicRequire("undici");if(s&&s.WebSocket)return{type:"native",constructor:s.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const s=this.dynamicRequire("ws");if(s)return{type:"ws",constructor:(n=s.WebSocket)!==null&&n!==void 0?n:s};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const UN="2.15.0",$N=`realtime-js/${UN}`,FN="1.0.0",rh=1e4,zN=1e3,VN=100;var So;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(So||(So={}));var ze;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ze||(ze={}));var Zt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zt||(Zt={}));var sh;(function(t){t.websocket="websocket"})(sh||(sh={}));var Gr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Gr||(Gr={}));class BN{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Gx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const ty=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=WN(o,t,e,s),i),{})},WN=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Yx(i,o):ih(o)},Yx=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return qN(e,n)}switch(t){case pe.bool:return HN(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return GN(e);case pe.json:case pe.jsonb:return YN(e);case pe.timestamp:return KN(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return ih(e);default:return ih(e)}},ih=t=>t,HN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},GN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},YN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qN=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Yx(e,l))}return t},KN=t=>typeof t=="string"?t.replace(" ","T"):t,qx=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Tu{constructor(e,n,r={},s=rh){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ny;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ny||(ny={}));class _o{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_o.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=_o.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_o.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(k=>k.presence_ref),p=h.map(k=>k.presence_ref),v=d.filter(k=>p.indexOf(k.presence_ref)<0),x=h.filter(k=>f.indexOf(k.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ry;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ry||(ry={}));var jo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(jo||(jo={}));var _n;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_n||(_n={}));class Jf{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Tu(this,Zt.join,this.params,this.timeout),this.rejoinTimer=new Gx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _o(this),this.broadcastEndpointURL=qx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[jo.PRESENCE]&&this.bindings[jo.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(_n.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(_n.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e==null||e(_n.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,k=[];for(let g=0;g<x;g++){const m=v[g],{filter:{event:y,schema:S,table:T,filter:C}}=m,P=f&&f[g];if(P&&P.event===y&&P.schema===S&&P.table===T&&P.filter===C)k.push(Object.assign(Object.assign({},m),{id:P.id}));else{this.unsubscribe(),this.state=ze.errored,e==null||e(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(_n.SUBSCRIBED);return}}).receive("error",f=>{this.state=ze.errored,e==null||e(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ze.joined&&e===jo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Tu(this,Zt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Tu(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Zt;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,x,k;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(x=p.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,x,k,g,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,T=(v=p.filter)===null||v===void 0?void 0:v.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const S=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:x,table:k,commit_timestamp:g,type:m,errors:y}=v;f=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:g,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Jf.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zt.close,{},e)}_onError(e){this._on(Zt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ty(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ty(e.columns,e.old_record)),n}}const sy=()=>{},Ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},JN=[1e3,2e3,5e3,1e4],QN=1e4,XN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZN{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rh,this.transport=null,this.heartbeatIntervalMs=Ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sy,this.ref=0,this.reconnectTimer=null,this.logger=sy,this.conn=null,this.sendBuffer=[],this.serializer=new BN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>xr(()=>Promise.resolve().then(()=>Ci),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${sh.websocket}`,this.httpEndpoint=qx(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MN.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:FN}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case So.connecting:return Gr.Connecting;case So.open:return Gr.Open;case So.closing:return Gr.Closing;default:return Gr.Closed}}isConnected(){return this.connectionState()===Gr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Jf(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([XN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:$N};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Zt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Gx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:rh,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ka.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>JN[d-1]||QN,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Qf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function He(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class eE extends Qf{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oh extends Qf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var tE=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Kx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(()=>Promise.resolve().then(()=>Ci),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},nE=()=>tE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xr(()=>Promise.resolve().then(()=>Ci),void 0)).Response:Response}),ah=t=>{if(Array.isArray(t))return t.map(n=>ah(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ah(r)}),e},rE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var gs=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Pu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sE=(t,e,n)=>gs(void 0,void 0,void 0,function*(){const r=yield nE();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new eE(Pu(s),i,o))}).catch(s=>{e(new oh(Pu(s),s))}):e(new oh(Pu(t),t))}),iE=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(rE(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n))};function da(t,e,n,r,s,i){return gs(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,iE(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>sE(c,l,r))})})}function ql(t,e,n,r){return gs(this,void 0,void 0,function*(){return da(t,"GET",e,n,r)})}function jn(t,e,n,r,s){return gs(this,void 0,void 0,function*(){return da(t,"POST",e,r,s,n)})}function lh(t,e,n,r,s){return gs(this,void 0,void 0,function*(){return da(t,"PUT",e,r,s,n)})}function oE(t,e,n,r){return gs(this,void 0,void 0,function*(){return da(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Jx(t,e,n,r,s){return gs(this,void 0,void 0,function*(){return da(t,"DELETE",e,r,s,n)})}var pt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const aE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lE{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Kx(s)}uploadOrUpdate(e,n,r,s){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},iy),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?lh:jn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(He(i))return{data:null,error:i};throw i}})}upload(e,n,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:iy.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield lh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(He(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield jn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Qf("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}update(e,n,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return pt(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}copy(e,n,r){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return pt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield jn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return pt(this,void 0,void 0,function*(){try{const s=yield jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}download(e,n){return pt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ql(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(He(l))return{data:null,error:l};throw l}})}info(e){return pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ql(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ah(r),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}exists(e){return pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield oE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(He(r)&&r instanceof oh){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield Jx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}list(e,n,r){return pt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aE),n),{prefix:e||""});return{data:yield jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(He(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const cE="2.10.4",uE={"X-Client-Info":`storage-js/${cE}`};var Cs=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class dE{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},uE),n),this.fetch=Kx(r)}listBuckets(){return Cs(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(He(e))return{data:null,error:e};throw e}})}getBucket(e){return Cs(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Cs(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Cs(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(He(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Cs(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Cs(this,void 0,void 0,function*(){try{return{data:yield Jx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(He(n))return{data:null,error:n};throw n}})}}class hE extends dE{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new lE(this.url,this.headers,e,this.fetch)}}const fE="2.54.0";let io="";typeof Deno<"u"?io="deno":typeof document<"u"?io="web":typeof navigator<"u"&&navigator.product==="ReactNative"?io="react-native":io="node";const pE={"X-Client-Info":`supabase-js-${io}/${fE}`},mE={headers:pE},gE={schema:"public"},yE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vE={};var wE=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const xE=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lx:e=fetch,(...n)=>e(...n)},bE=()=>typeof Headers>"u"?Dx:Headers,kE=(t,e,n)=>{const r=xE(n),s=bE();return(i,o)=>wE(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var SE=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function _E(t){return t.endsWith("/")?t:t+"/"}function jE(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>SE(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Qx="2.71.1",Rs=30*1e3,ch=3,Nu=ch*Rs,CE="http://localhost:9999",TE="supabase.auth.token",PE={"X-Client-Info":`gotrue-js/${Qx}`},uh="X-Supabase-Api-Version",Xx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},NE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,EE=10*60*1e3;class Xf extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AE extends Xf{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function RE(t){return q(t)&&t.name==="AuthApiError"}class Zx extends Xf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class br extends Xf{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Kn extends br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IE(t){return q(t)&&t.name==="AuthSessionMissingError"}class Ja extends br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qa extends br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xa extends br{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function OE(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class oy extends br{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dh extends br{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Eu(t){return q(t)&&t.name==="AuthRetryableFetchError"}class ay extends br{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class hh extends br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ly=` 	
\r=`.split(""),LE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ly.length;e+=1)t[ly[e].charCodeAt(0)]=-2;for(let e=0;e<Kl.length;e+=1)t[Kl[e].charCodeAt(0)]=e;return t})();function cy(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kl[r]),e.queuedBits-=6}}function eb(t,e,n){const r=LE[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uy(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{UE(o,r,n)};for(let o=0;o<t.length;o+=1)eb(t.charCodeAt(o),s,i);return e.join("")}function DE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ME(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}DE(r,e)}}function UE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function $E(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)eb(t.charCodeAt(s),n,r);return new Uint8Array(e)}function FE(t){const e=[];return ME(t,n=>e.push(n)),new Uint8Array(e)}function zE(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>cy(s,n,r)),cy(null,n,r),e.join("")}function VE(t){return Math.round(Date.now()/1e3)+t}function BE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Kt=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},tb=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function WE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const nb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xr(()=>Promise.resolve().then(()=>Ci),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},HE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Is=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yn=async(t,e)=>{await t.removeItem(e)};class Cc{constructor(){this.promise=new Cc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Cc.promiseConstructor=Promise;function Au(t){const e=t.split(".");if(e.length!==3)throw new hh("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!NE.test(e[r]))throw new hh("JWT not in base64url format");return{header:JSON.parse(uy(e[0])),payload:JSON.parse(uy(e[1])),signature:$E(e[2]),raw:{header:e[0],payload:e[1]}}}async function GE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function YE(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function qE(t){return("0"+t.toString(16)).substr(-2)}function KE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,qE).join("")}async function JE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function QE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await JE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ts(t,e,n=!1){const r=KE();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Is(t,`${e}-code-verifier`,s);const i=await QE(r);return[i,r===i?"plain":"s256"]}const XE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZE(t){const e=t.headers.get(uh);if(!e||!e.match(XE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eA(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function tA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ps(t){if(!nA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ru(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dy(t){return JSON.parse(JSON.stringify(t))}var rA=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Hr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sA=[502,503,504];async function hy(t){var e;if(!HE(t))throw new dh(Hr(t),0);if(sA.includes(t.status))throw new dh(Hr(t),t.status);let n;try{n=await t.json()}catch(i){throw new Zx(Hr(i),i)}let r;const s=ZE(t);if(s&&s.getTime()>=Xx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ay(Hr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Kn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ay(Hr(n),t.status,n.weak_password.reasons);throw new AE(Hr(n),t.status||500,r)}const iA=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ne(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[uh]||(i[uh]=Xx["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await oA(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function oA(t,e,n,r,s,i){const o=iA(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new dh(Hr(c),0)}if(l.ok||await hy(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await hy(c)}}function kn(t){var e;let n=null;uA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=VE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function fy(t){const e=kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function er(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function aA(t){return{data:t,error:null}}function lA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=rA(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function cA(t){return t}function uA(t){return t.access_token&&t.refresh_token&&t.expires_in}const Iu=["global","local","others"];var dA=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class hA{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=nb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Iu[0]){if(Iu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Iu.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:er})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=dA(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:lA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:er})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cA});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ps(e);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:er})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ps(e);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:er})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ps(e);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:er})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ps(e.userId);try{const{data:n,error:r}=await ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ps(e.userId),Ps(e.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}function py(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function fA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ns={debug:!!(globalThis&&tb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pA extends rb{}async function mA(t,e,n){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new pA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ns.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}fA();const gA={url:CE,storageKey:TE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function my(t,e,n){return await n()}const Es={};class Qo{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qo.nextInstanceID,Qo.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},gA),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nb(s.fetch),this.lock=s.lock||my,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Kt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=mA:this.lock=my,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:tb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=py(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=py(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Es[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Es[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Es[this.storageKey]=Object.assign(Object.assign({},Es[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=WE(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Kt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),OE(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return q(n)?{error:n}:{error:new Zx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:kn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Ts(this.storage,this.storageKey)),i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:kn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kn})}else throw new Qa("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fy})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fy})}else throw new Qa("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ja}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,l,c,u,d,h,f,p;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:k,wallet:g,statement:m,options:y}=e;let S;if(Kt())if(typeof g=="object")S=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),m?{statement:m}:null));let P;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")P=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)P=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=C}}try{const{data:k,error:g}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:zE(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:kn});if(g)throw g;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ja}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:g})}catch(k){if(q(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await Fr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:kn});if(await Yn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ja}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:kn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ja}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ts(this.storage,this.storageKey));const{error:h}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Qa("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:kn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ts(this.storage,this.storageKey)),await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:aA})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Kn;const{error:s}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ne(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await ne(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Qa("You must provide either an email or phone number and a type")}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Nu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Fr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ru()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:er}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kn}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:er})})}catch(n){if(q(n))return IE(n)&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Kn;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ts(this.storage,this.storageKey));const{data:u,error:d}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:er});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Au(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Kn;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Kt())throw new Xa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new oy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oy("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Xa("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:x,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(RE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=BE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ts(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Kt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await YE(async s=>(s>0&&await GE(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Eu(i)&&Date.now()+o-r<Rs})}catch(r){if(this._debug(n,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Kt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Fr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Is(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ru()}else if(s&&!s.user&&!s.user){const o=await Fr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Yn(this.storage,this.storageKey+"-user"),await Is(this.storage,this.storageKey,s)):s.user=Ru()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Nu;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Nu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Eu(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cc;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Kn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),q(i)){const o={session:null,error:i};return Eu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Is(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=dy(s);await Is(this.storage,this.storageKey,i)}else{const s=dy(n);await Is(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Yn(this.storage,this.storageKey),await Yn(this.storage,this.storageKey+"-code-verifier"),await Yn(this.storage,this.storageKey+"-user"),this.userStorage&&await Yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rs}ms, refresh threshold is ${ch} ticks`),s<=ch&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ts(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Au(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+EE>s)return r;const{data:i,error:o}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Au(r);n!=null&&n.allowExpired||eA(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=tA(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,FE(`${l}.${c}`)))throw new hh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}Qo.nextInstanceID=0;const yA=Qo;class vA extends yA{constructor(e){super(e)}}var wA=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class xA{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=_E(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:gE,realtime:vE,auth:Object.assign(Object.assign({},yE),{storageKey:u}),global:mE},h=jE(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=kE(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new DN(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new hE(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new hN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return wA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vA({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ZN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bA=(t,e,n)=>new xA(t,e,n);function kA(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}kA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var xy;const SA=((xy={}.VITE_SUPABASE_URL)==null?void 0:xy.trim())||"https://placeholder.supabase.co";var by;const _A=((by={}.VITE_SUPABASE_ANON_KEY)==null?void 0:by.trim())||"placeholder_anon_key";bA(SA,_A,{auth:{persistSession:!0}});async function sb(t){const e=F.getToken();if(!e)throw new Error("Not signed in");const n=F.getCurrentUser();if(!(n!=null&&n.id))throw new Error("No user ID available");console.log(" Updating profile:",t);const r=await Wf("/.netlify/functions/update-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to update profile")}const s=await r.json();return console.log(" Profile updated successfully:",s.profile),s.profile}async function jA(){const t=F.getToken();if(!t)return null;try{const e=await Wf("/.netlify/functions/get-user-profile",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return e.ok?await e.json():(console.warn("Failed to get profile from server"),null)}catch(e){return console.error("Error getting current profile:",e),null}}async function CA(){const t=await jA();return!(t!=null&&t.onboarding_completed)}const gy=t=>{if(!t||/^https?:\/\//i.test(t)||/^(data:|blob:)/i.test(t))return t;const e={}.VITE_CLOUDINARY_CLOUD_NAME;return e?`https://res.cloudinary.com/${e}/image/upload/${t.replace(/^\/+/,"")}`:t},TA=()=>{const t=ms(),{notifyReady:e,notifyError:n}=Px(),[r,s]=w.useState("all-media"),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[h,f]=w.useState(!1);w.useState(!1);const[p,v]=w.useState(!1),{profileData:x,updateProfile:k,refreshProfile:g}=wc(),[m,y]=w.useState({name:x.name,avatar:x.avatar,shareToFeed:x.shareToFeed,allowRemix:x.allowRemix});w.useEffect(()=>{y({name:x.name,avatar:x.avatar,shareToFeed:x.shareToFeed,allowRemix:x.allowRemix})},[x]),w.useEffect(()=>{var A;const _=(A=t.location)==null?void 0:A.state;_!=null&&_.activeTab&&s(_.activeTab)},[t]),w.useEffect(()=>{const _=()=>{kr(!0)};return window.addEventListener("openInviteModal",_),()=>{window.removeEventListener("openInviteModal",_)}},[]);const S=async()=>{try{const _=F.getToken();if(!_)return;console.log(" Loading profile from database...");const A=await fetch("/.netlify/functions/get-user-profile",{method:"GET",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(A.ok){const O=await A.json();console.log(" Profile loaded from database:",O);const W={name:O.name||O.username||"",bio:O.bio||"AI artist exploring the boundaries of creativity ",avatar:O.avatar||O.avatar_url||""};k(W),O.avatar&&C(O.avatar),localStorage.setItem("userProfile",JSON.stringify(W))}else{console.warn(" Failed to load profile from database, falling back to localStorage");const O=localStorage.getItem("userProfile");if(O)try{const W=JSON.parse(O);k(W),W.avatar&&typeof W.avatar=="string"&&C(W.avatar)}catch(W){console.error("Failed to load profile data from localStorage:",W)}}}catch(_){console.error(" Failed to load profile from database:",_);const A=localStorage.getItem("userProfile");if(A)try{const O=JSON.parse(A);setProfileData(W=>({...W,...O})),O.avatar&&typeof O.avatar=="string"&&C(O.avatar)}catch(O){console.error("Failed to load profile data from localStorage:",O)}}},[T,C]=w.useState(null),[P,j]=w.useState([]),[D,I]=w.useState([]),[G,M]=w.useState([]),[Oe,Z]=w.useState([]),[kt,dt]=w.useState(""),[J,R]=w.useState(!0),[$,z]=w.useState(!1),[ae,he]=w.useState([]),[St,Ze]=w.useState(0),[Gt,it]=w.useState({open:!1}),[on,ha]=w.useState(un.REGISTERED),[$e,ys]=w.useState(!1),[Tc,kr]=w.useState(!1),[Sr,Pi]=w.useState("");w.useState(""),w.useState(!1);const[fa,Ni]=w.useState(""),[Ei,_r]=w.useState(!1),[jr,Un]=w.useState("");w.useEffect(()=>{if($e)S(),(async()=>{try{const _=F.getToken();if(!_)return;const A=await fetch("/.netlify/functions/user-settings",{method:"GET",headers:{Authorization:`Bearer ${_}`}});if(A.ok){const O=await A.json();k({shareToFeed:!!O.shareToFeed,allowRemix:!!O.allowRemix})}}catch{}})();else{const _=localStorage.getItem("userProfile");if(_)try{const A=JSON.parse(_);setProfileData(O=>({...O,...A}))}catch(A){console.error("Failed to load profile data from localStorage:",A)}}},[$e]);const[Rt,vs]=w.useState(null),[Zf,Yt]=w.useState(0);w.useState(!1),w.useState(!1),w.useState([]);const[Ai,Ri]=w.useState(!1),[Pc,pa]=w.useState("instagram"),[ce,ma]=w.useState("trendy"),[$n,Cr]=w.useState(""),[Tr,It]=w.useState(!1),[ws,an]=w.useState(null),[Le,ln]=w.useState(new Set),[Ot,Fn]=w.useState(!1),Ii=_=>{ln(A=>{const O=new Set(A);return O.has(_)?O.delete(_):O.add(_),O})},ga=()=>{const _=new Set(P.map(A=>A.id));ln(_)},ge=()=>{ln(new Set)},Oi=()=>{Fn(_=>!_),Ot&&ln(new Set)},ya=async()=>{if(Le.size!==0)try{if(!F.getToken()){ue("Delete Failed","Authentication required","error");return}f(!0);return}catch(_){console.error(" Bulk delete error:",_),ue("Delete Failed","Network or server error","error")}},xs=async()=>{if(Le.size!==0)try{const _=F.getToken();if(!_){ue("Delete Failed","Authentication required","error");return}const A=Array.from(Le).map(async V=>{try{if(!(await fetch("/.netlify/functions/delete-media",{method:"DELETE",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({mediaId:V})})).ok)throw new Error(`Failed to delete media ${V}`);return{success:!0,mediaId:V}}catch(te){return console.error(`Failed to delete media ${V}:`,te),{success:!1,mediaId:V,error:te}}}),O=await Promise.allSettled(A),W=O.filter(V=>V.status==="fulfilled"&&V.value.success).length,L=O.length-W;W>0?(ue("Bulk Delete Complete",`Successfully deleted ${W} media items${L>0?`, ${L} failed`:""}`,"success"),ln(new Set),Fn(!1),await Lt()):ue("Delete Failed","No media items were deleted","error")}catch(_){console.error(" Bulk delete error:",_),ue("Delete Failed","Network or server error","error")}finally{f(!1)}},Lt=async()=>{try{const _=F.getCurrentUser(),A=(_==null?void 0:_.id)||"guest-user";if(dt(A),_){ys(!0);const V={registered:un.REGISTERED,pro:un.VERIFIED,verified:un.VERIFIED,contributor:un.CONTRIBUTOR}[_.tier]||un.REGISTERED;ha(V);try{try{const te=await ai("/.netlify/functions/get-referral-stats",{method:"GET"});if(te.ok){const fe=await te.json();vs({invites:fe.totalInvites,tokensEarned:fe.tokensEarned,referralCode:""})}else{const fe=await qa.getReferralStats(A);vs(fe)}}catch{const te=await qa.getReferralStats(A);vs(te)}try{const te=await ai("/.netlify/functions/getQuota",{method:"GET"});if(te.ok){const fe=await te.json();Yt((fe.daily_limit||0)-(fe.daily_used||0))}else{const fe=await qa.getUserUsage(A);Yt(fe.dailyLimit-fe.dailyUsage)}}catch{const te=await qa.getUserUsage(A);Yt(te.dailyLimit-te.dailyUsage)}}catch(te){console.error("Failed to load referral stats or token count:",te);const fe=V===un.CONTRIBUTOR?120:V===un.VERIFIED?60:30;Yt(fe)}}else ys(!1),ha(un.REGISTERED);try{const L=F.getToken()||localStorage.getItem("auth_token");if(L){const V=await fetch("/.netlify/functions/getUserMedia",{method:"GET",headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"}});if(V.status===401){console.log("JWT invalid: falling back to local media");const te=await Wr.getAllUserMedia(A);j(te)}else if(V.ok){const Bn=((await V.json()).items||[]).map(le=>(console.log(` Database item ${le.id}:`,{prompt:le.prompt,mode:le.mode,meta:le.meta}),{id:le.id,userId:le.user_id,type:le.resource_type==="video"?"video":"photo",url:gy(le.result_url)||gy(le.url)||le.result_url||le.url,prompt:le.prompt||"AI Generated Content",aspectRatio:4/3,width:800,height:600,timestamp:le.created_at,tokensUsed:2,likes:0,remixCount:0,isPublic:le.visibility==="public",allowRemix:le.allow_remix||!1,tags:[],metadata:{quality:"high",generationTime:0,modelVersion:"1.0"}}));console.log(" Setting userMedia with",Bn.length,"items"),j(Bn);const _t=Bn.filter(le=>le.type==="remix").map(le=>({...le,userAvatar:typeof x.avatar=="string"?x.avatar:void 0,userTier:on}));console.log(" Setting remixedMedia with",_t.length,"items (from transformed)"),I(_t)}else{console.error("Failed to load user media from database:",V.statusText);const te=await Wr.getAllUserMedia(A);console.log(" Fallback: Setting userMedia with",te.length,"items from local service"),j(te)}}else{console.log("Guest user: skipping getUserMedia server call");const V=await Wr.getAllUserMedia(A);j(V)}}catch(L){console.error("Failed to load user media from database:",L);const V=await Wr.getAllUserMedia(A);j(V)}const W=P.filter(L=>L.type==="remix").map(L=>({...L,userAvatar:typeof x.avatar=="string"?x.avatar:void 0,userTier:on}));console.log(" Bootstrapping remixedMedia with",W.length,"items"),I(W),console.log(" Current userMedia for filtering (state):",P.length,"items"),M([]),Z([]);try{const L=F.getCurrentUser();if(L!=null&&L.id){const V=`user_drafts_${L.id}`,te=localStorage.getItem(V);if(te){const fe=JSON.parse(te);console.log(" Loaded drafts from localStorage:",fe.length),Z(fe)}}}catch(L){console.error("Failed to load drafts from localStorage:",L)}console.log(" Final media state:",{userMedia:P.length,remixedMedia:D.length,totalItems:P.length+D.length}),R(!1)}catch(_){console.error("Failed to load user media:",_),R(!1)}};w.useEffect(()=>{Lt();const _=A=>{var te,fe,Bn;console.log(" ProfileScreen received userMediaUpdated event, refreshing...");const O=(te=A==null?void 0:A.detail)==null?void 0:te.optimistic;O&&j(_t=>[O,..._t]);const W=(fe=A==null?void 0:A.detail)==null?void 0:fe.markFailedId;W&&j(_t=>_t.map(le=>le.id===W?{...le,status:"failed"}:le));const L=(Bn=A==null?void 0:A.detail)==null?void 0:Bn.removeId;L&&j(_t=>_t.filter(le=>le.id!==L)),Lt();const V=F.getCurrentUser();if(V!=null&&V.id){const _t=`user_drafts_${V.id}`,le=localStorage.getItem(_t);if(le){const Fi=JSON.parse(le);console.log(" Refreshing drafts from localStorage:",Fi.length),Z(Fi)}}};return window.addEventListener("userMediaUpdated",_),()=>{window.removeEventListener("userMediaUpdated",_)}},[]),w.useEffect(()=>{console.log(" Active tab changed to:",r),console.log(" Current media state:",{userMedia:P.length,remixedMedia:D.length,isLoading:J})},[r,P.length,D.length,J]);const Nc=_=>{var O;const A=(O=_.target.files)==null?void 0:O[0];if(A){y(L=>({...L,avatar:A}));const W=new FileReader;W.onload=L=>{var V;C((V=L.target)==null?void 0:V.result)},W.readAsDataURL(A)}},Li=async()=>{try{v(!0);const _={...m};let A;m.avatar instanceof File?(A=(await Ex(m.avatar,"users")).secure_url,_.avatar=A):typeof m.avatar=="string"&&(A=m.avatar),await sb({username:_.name,avatar_url:A,share_to_feed:_.shareToFeed,allow_remix:_.allowRemix}),k(_),A&&C(A),e({title:"Profile Updated",message:"Your profile has been saved successfully"}),c(!1)}catch(_){console.error("Save profile failed:",_),n({title:"Update failed",message:_.message||"Could not update profile"})}finally{v(!1)}},Ec=()=>{localStorage.removeItem("userProfile"),localStorage.removeItem("token_usage"),localStorage.removeItem("token_generations"),localStorage.removeItem("referral_codes"),F.logout(),ue("Account Deleted","Your account has been permanently deleted","info"),d(!1),setTimeout(()=>{t("/")},1e3)},Pr=_=>{if(r==="draft")return;const A=r==="liked"?G:r==="remixed"?D:r==="draft"?Oe:P,O=A.findIndex(W=>W.id===_.id);he(A),Ze(Math.max(0,O)),z(!0)},Di=async _=>{try{const O=await(await fetch(_.url,{mode:"cors"})).blob(),W=URL.createObjectURL(O),L=document.createElement("a");L.href=W;const V=_.type==="video"?"mp4":"jpg";L.download=`stefna-${_.id}.${V}`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(W)}catch{ue("Download failed","Unable to download file","error")}},Nr=async _=>{try{if(!F.getToken()){ue("Login Required","Please sign in to change visibility","warning"),t("/auth");return}const A=await fetch("/.netlify/functions/recordShare",{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"},body:JSON.stringify({asset_id:_.id,shareToFeed:!0,allowRemix:_.allowRemix})});if(A.ok){const O=await A.json();console.log(" Share successful:",O),j(W=>W.map(L=>L.id===_.id?{...L,visibility:O.asset.visibility,allowRemix:O.asset.allow_remix,env:O.asset.env}:L)),ue("Media Shared","Your media is now public!","success")}else{const O=await A.json();ue("Share Failed",O.error||"Failed to share media","error")}}catch(A){console.error("Failed to share media:",A),ue("Share Failed","Failed to share media. Please try again.","error")}},va=async _=>{try{if(!F.getToken()){ue("Login Required","Please sign in to change visibility","warning"),t("/auth");return}const A=await fetch("/.netlify/functions/recordShare",{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"},body:JSON.stringify({asset_id:_.id,shareToFeed:!1,allowRemix:!1})});if(A.ok){const O=await A.json();console.log(" Unshare successful:",O),j(W=>W.map(L=>L.id===_.id?{...L,visibility:O.asset.visibility,allowRemix:O.asset.allow_remix,env:O.asset.env}:L)),ue("Media Unshared","Your media is now private!","success")}else{const O=await A.json();ue("Unshare Failed",O.error||"Failed to unshare media","error")}}catch(A){console.error("Failed to unshare media:",A),ue("Unshare Failed","Failed to unshare media. Please try again.","error")}},ue=(_,A,O="info",W,L,V)=>{console.log(`[NOTIFICATION DISABLED] ${O.toUpperCase()}: ${_} - ${A}`)},Er=async _=>{if(!F.isAuthenticated()){ue("Login Required","Please sign in to like media","warning"),t("/auth");return}const A=F.getCurrentUser(),O=(A==null?void 0:A.id)||localStorage.getItem("stefna_guest_id")||"guest-anon",{liked:W,likes:L}=await Wr.toggleLike(_.id,O);M(V=>{const te=V.some(fe=>fe.id===_.id);return W&&!te?[_,...V]:!W&&te?V.filter(fe=>fe.id!==_.id):V}),j(V=>V.map(te=>te.id===_.id?{...te,likes:L}:te))},zn=_=>{if(!F.isAuthenticated()){ue("Login Required","Please sign in to remix media","warning"),t("/auth");return}z(!1),t("/",{state:{remixUrl:_.url,remixPrompt:_.prompt||"",source:"profile"}})},Mi=_=>{it({open:!0,media:_})},wa=_=>{aN(t,_.url,_.prompt)},Vn=_=>{it({open:!0,media:_})},Ui=_=>{an(_),Ri(!0),Cr("")},xa=async()=>{if(ws){It(!0);try{const _=`Amazing AI-generated ${ws.type} created with Stefna!  #AIArt #Stefna #${ce}`;Cr(_)}catch(_){console.error("Error generating caption:",_),Cr("Failed to generate caption")}finally{It(!1)}}},ba=async()=>{if($n)try{await navigator.clipboard.writeText($n),ue("Copied","Caption copied to clipboard","success")}catch{ue("Copy failed","Unable to copy caption","error")}},Ac=async _=>{var O;if(_.preventDefault(),!Sr.trim()){Un("Please enter an email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Sr)){Un("Please enter a valid email address");return}_r(!0),Un(""),Ni("");try{const L=await(await xr(()=>import("./emailService-23431b5c.js"),[])).default.sendReferralEmail({referrerEmail:((O=F.getCurrentUser())==null?void 0:O.email)||"",referrerName:x.name,friendEmail:Sr.trim(),referralCode:Rt==null?void 0:Rt.referralCode});if(L.success){if(Ni("Invitation sent successfully!"),Pi(""),Rt){const V={...Rt,invites:Rt.invites+1};vs(V)}ue("Invitation Sent","Your friend will receive an email invitation shortly","success")}else Un(L.error||"Failed to send invitation"),ue("Invitation Failed",L.error||"Failed to send invitation","error")}catch(W){console.error("Failed to send invite:",W),Un("Failed to send invitation. Please try again."),ue("Invitation Failed","Failed to send invitation. Please try again.","error")}finally{_r(!1)}},Ar=[{id:"all-media",label:"All Media",icon:ii},{id:"liked",label:"Liked",icon:si},{id:"remixed",label:"Remixed",icon:ts},{id:"draft",label:"Draft",icon:ro},{id:"notification",label:"Notification",icon:Nd},{id:"settings",label:"Settings",icon:r_}],$i=async(_,A)=>{const O=F.getToken();if(O)try{const W=await fetch("/.netlify/functions/user-settings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({shareToFeed:_,allowRemix:A})});if(W.ok){const L=await W.json();k({shareToFeed:!!L.shareToFeed,allowRemix:!!L.allowRemix})}}catch{}};return a.jsxs("div",{className:"min-h-screen bg-black flex",children:[a.jsxs("div",{className:"w-[20%] bg-black p-4 pt-20 relative sticky top-0 h-screen overflow-y-auto flex flex-col",children:[a.jsx("button",{onClick:()=>t("/"),className:"absolute top-4 left-4 text-white/60 hover:text-white transition-colors duration-300",title:"Go back",children:a.jsx(ia,{size:20})}),a.jsx("button",{onClick:()=>{F.logout(),t("/")},className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors duration-300",title:"Logout",children:a.jsx(XS,{size:20})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 rounded-lg text-left transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(WS,{size:16,className:"text-white/60"}),a.jsx("span",{className:"text-xs font-medium text-white/60",children:"Tokens"})]}),a.jsx("span",{className:"text-xs font-medium text-white",children:Zf})]}),a.jsxs("button",{onClick:()=>kr(!0),className:"w-full py-1.5 px-3 rounded-lg text-left transition-all duration-300 flex items-center justify-start space-x-2 text-white/60 hover:text-white hover:bg-white/10",children:[a.jsx(o_,{size:16,className:"text-white/60"}),a.jsx("span",{className:"text-xs font-medium",children:"Invite Friends"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 rounded-lg text-left transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(KS,{size:16,className:"text-white/60"}),a.jsx("span",{className:"text-xs font-medium text-white/60",children:"Share to Feed"})]}),a.jsx("button",{onClick:()=>{const _=!x.shareToFeed,A=_?x.allowRemix:!1;k({shareToFeed:_,allowRemix:A}),$i(_,A)},className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${x.shareToFeed?"bg-white":"bg-white/20"}`,children:a.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-black transition-transform duration-200 ${x.shareToFeed?"translate-x-5":"translate-x-1"}`})})]}),a.jsxs("div",{className:`flex items-center justify-between py-1.5 px-3 rounded-lg text-left transition-all duration-300 ${x.shareToFeed?"":"opacity-50"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ts,{size:16,className:`${x.shareToFeed?"text-white/60":"text-white/30"}`}),a.jsx("span",{className:`text-xs font-medium ${x.shareToFeed?"text-white/60":"text-white/30"}`,children:"Allow Remix"})]}),a.jsx("button",{onClick:()=>{if(x.shareToFeed){const _=!x.allowRemix;k({allowRemix:_}),$i(!0,_)}},disabled:!x.shareToFeed,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${x.allowRemix&&x.shareToFeed?"bg-white":"bg-white/20"} ${x.shareToFeed?"cursor-pointer":"cursor-not-allowed"}`,children:a.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-black transition-transform duration-200 ${x.allowRemix&&x.shareToFeed?"translate-x-5":"translate-x-1"}`})})]})]}),Ar.map(_=>{const A=_.icon;return a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>{_.id==="settings"?o(!i):(s(_.id),o(!1))},className:`w-full py-1.5 px-3 rounded-lg text-left transition-all duration-300 flex items-center justify-start space-x-3 ${r===_.id?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"}`,children:[a.jsx("div",{className:"flex items-center justify-center w-5 h-5 flex-shrink-0",children:a.jsx(A,{size:16,className:"text-current"})}),a.jsx("span",{className:"text-xs font-medium",children:_.label})]}),_.id==="settings"&&i&&a.jsxs("div",{className:"mt-1 space-y-1",children:[a.jsx("button",{onClick:()=>c(!0),className:"w-full py-1.5 px-3 rounded-lg text-left btn-optimized flex items-center justify-start space-x-3 text-white/60 hover:text-white hover:bg-white/10 active:bg-white/20",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Em,{size:16,className:"text-current"}),a.jsx("span",{className:"text-xs font-medium",children:"Edit Profile"})]})}),a.jsxs("button",{onClick:()=>d(!0),className:"w-full py-1.5 px-3 rounded-lg text-left btn-optimized flex items-center justify-start space-x-3 text-red-400/60 hover:text-red-400 hover:bg-red-500/20 active:bg-red-500/30",children:[a.jsx("div",{className:"flex items-center justify-center w-5 h-5 flex-shrink-0",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-current",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("span",{className:"text-xs font-medium",children:"Delete Account"})]})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>f(!1)}),a.jsxs("div",{className:"relative bg-[#222222] border border-white/20 rounded-2xl max-w-lg w-full p-8 shadow-2xl",children:[a.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:24})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-white text-xl font-bold mb-3",children:"Delete Selected Media"}),a.jsxs("p",{className:"text-white/60 text-sm",children:["Are you sure you want to delete ",Le.size," media item",Le.size!==1?"s":"","? This action cannot be undone."]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:xs,className:"w-full bg-red-500 text-white font-semibold py-3 rounded-xl hover:bg-red-600 btn-optimized",children:["Delete ",Le.size," Item",Le.size!==1?"s":""]}),a.jsx("button",{onClick:()=>f(!1),className:"w-full bg-white/5 text-white font-semibold py-3 rounded-xl hover:bg-white/10 btn-optimized border border-white/20",children:"Cancel"})]})]})]})]},_.id)})]})}),a.jsx("div",{className:"mt-auto",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"py-2 px-3",children:a.jsx("img",{src:"/logo.png",alt:"Stefna Logo",className:"h-8 w-auto"})}),a.jsx("div",{className:"py-2 px-3",children:a.jsx("span",{className:"text-xs font-medium text-white/60",children:"Legal"})}),a.jsxs("div",{className:"flex items-center space-x-2 px-3",children:[a.jsx("button",{onClick:()=>t("/privacy"),className:"w-6 h-6 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all duration-300",title:"Privacy Policy",children:a.jsx(s_,{size:16,className:"text-white"})}),a.jsx("button",{onClick:()=>t("/terms"),className:"w-6 h-6 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all duration-300",title:"Terms of Service",children:a.jsx(ro,{size:16,className:"text-white"})}),a.jsx("button",{onClick:()=>t("/cookies"),className:"w-6 h-6 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all duration-300",title:"Cookies Policy",children:a.jsx(HS,{size:16,className:"text-white"})})]}),a.jsx("div",{className:"py-2 px-3",children:a.jsx("span",{className:"text-xs font-medium text-white/60",children:"Social Media"})}),a.jsxs("div",{className:"flex items-center space-x-2 px-3",children:[a.jsx("a",{href:"https://www.instagram.com/stefnaxyz/",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"Instagram",children:a.jsx(eN,{size:18,className:"text-white"})}),a.jsx("a",{href:"https://x.com/StefnaXYZ",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"X",children:a.jsx(tN,{size:18,className:"text-white"})}),a.jsx("a",{href:"https://www.facebook.com/Stefnaxyz",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"Facebook",children:a.jsx(nN,{size:18,className:"text-white"})}),a.jsx("a",{href:"https://www.tiktok.com/@stefnaxyz",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"TikTok",children:a.jsx(rN,{size:18,className:"text-white"})}),a.jsx("a",{href:"https://www.threads.net/@stefnaxyz",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"Threads",children:a.jsx(sN,{size:18,className:"text-white"})}),a.jsx("a",{href:"https://www.youtube.com/channel/UCNBAWuWc8luYN8F0dIXX0RA",target:"_blank",rel:"noopener noreferrer",className:"w-6 h-6 rounded-full flex items-center justify-center hover:opacity-90",title:"YouTube",children:a.jsx(iN,{size:18,className:"text-white"})})]})]})})]}),a.jsxs("div",{className:"w-[80%] bg-black h-screen overflow-y-auto flex flex-col relative",children:[r==="all-media"&&a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!J&&P.length>0&&a.jsxs("div",{className:"mb-6 flex items-center justify-between bg-white/5 rounded-lg p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:Oi,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Ot?"bg-white text-black hover:bg-white/90":"bg-white/10 text-white hover:bg-white/20"}`,children:Ot?"Exit Selection":"Select Media"}),Ot&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:ga,className:"px-3 py-2 rounded-lg text-sm font-medium bg-white/10 text-white hover:bg-white/20 transition-colors",children:"Select All"}),a.jsx("button",{onClick:ge,className:"px-3 py-2 rounded-lg text-sm font-medium bg-white/10 text-white hover:bg-white/20 transition-colors",children:"Deselect All"}),a.jsxs("span",{className:"text-white/60 text-sm",children:[Le.size," of ",P.length," selected"]})]})]}),Ot&&Le.size>0&&a.jsxs("button",{onClick:ya,className:"px-4 py-2 rounded-lg text-sm font-medium bg-red-500/80 text-white hover:bg-red-500 transition-colors",children:["Delete Selected (",Le.size,")"]})]}),J?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 animate-pulse",children:a.jsx(ii,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"Loading your media..."})]}):(()=>(console.log(" Rendering all-media tab:",{userMediaLength:P.length,userMedia:P,isLoading:J}),!J&&P.length===0))()?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(ii,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No media yet"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Your created media will appear here"})]}):a.jsx(ml,{media:P.map(_=>({..._,aspectRatio:_.width&&_.height?_.width/Math.max(1,_.height):_.aspectRatio||4/3,width:_.width||800,height:_.height||Math.round((_.width||800)/(_.aspectRatio||4/3))})),columns:3,onMediaClick:Pr,onDownload:Di,onShare:Nr,onUnshare:va,onRemix:zn,onDelete:Mi,onGenerateCaption:Ui,showActions:!0,className:"pb-20",hideRemixCount:!0,hideUserAvatars:!0,isSelectionMode:Ot,selectedMediaIds:Le,onToggleSelection:Ii})]}),r==="liked"&&a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:J?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 animate-pulse",children:a.jsx(si,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"Loading your liked media..."})]}):(()=>(console.log(" Rendering liked tab:",{likedMediaLength:G.length,likedMedia:G,isLoading:J}),!J&&G.length===0))()?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(si,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No liked media yet"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Like media to see it here"})]}):a.jsx(ml,{media:G.map(_=>({..._,aspectRatio:_.width&&_.height?_.width/Math.max(1,_.height):_.aspectRatio||4/3,width:_.width||800,height:_.height||Math.round((_.width||800)/(_.aspectRatio||4/3))})),columns:3,onMediaClick:Pr,onDownload:Di,onShare:Nr,onUnshare:va,onRemix:zn,onDelete:Mi,onGenerateCaption:Ui,showActions:!0,className:"pb-20",hideRemixCount:!0,hideUserAvatars:!0})}),r==="remixed"&&a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:J?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 animate-pulse",children:a.jsx(ts,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"Loading your remixes..."})]}):(()=>(console.log(" Rendering remixed tab:",{remixedMediaLength:D.length,remixedMedia:D,isLoading:J}),!J&&D.length===0))()?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(ts,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No remixes yet"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Your remixed media will appear here"})]}):a.jsx(ml,{media:D.map(_=>({..._,aspectRatio:_.width&&_.height?_.width/Math.max(1,_.height):_.aspectRatio||4/3,width:_.width||800,height:_.height||Math.round((_.width||800)/(_.aspectRatio||4/3))})),columns:3,onMediaClick:Pr,onDownload:Di,onShare:Nr,onUnshare:va,onRemix:zn,onDelete:Mi,onGenerateCaption:Ui,showActions:!0,className:"pb-20",hideRemixCount:!0,hideUserAvatars:!0})}),r==="draft"&&a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:J?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 animate-pulse",children:a.jsx(ro,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"Loading your drafts..."})]}):(()=>(console.log(" Rendering draft tab:",{draftMediaLength:Oe.length,draftMedia:Oe,isLoading:J}),!J&&Oe.length===0))()?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(ro,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"No drafts yet"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Your draft media will appear here"})]}):a.jsx(oN,{media:Oe,columns:3,onMediaClick:Pr,onEdit:wa,onDelete:Vn,onShare:Nr,showActions:!0,className:"pb-20"})}),r==="notification"&&a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(Nd,{size:48,className:"text-white/40"})}),a.jsx("p",{className:"text-white/60 text-lg text-center",children:"Notifications disabled"}),a.jsx("p",{className:"text-white/40 text-sm text-center mt-2",children:"Notifications only appear on the home page"})]})}),a.jsx(Ox,{isOpen:$,media:ae,startIndex:St,onClose:()=>z(!1),onLike:_=>Er(_),onRemix:_=>zn(_),onShowAuth:()=>t("/auth")})]}),a.jsx(lN,{isOpen:Gt.open,title:"Delete media?",message:"This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onClose:()=>it({open:!1}),onConfirm:async()=>{if(Gt.media){const _=Gt.media;console.log(" Deleting media:",_.id);try{const A=F.getToken();let O=!1;if(A)try{const L=await fetch("/.netlify/functions/delete-media",{method:"POST",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({id:_.id})});L.ok?(O=!0,console.log(" Server delete successful")):console.warn(" Server delete failed:",L.status,L.statusText)}catch(L){console.error(" Server delete error:",L)}if(Oe.some(L=>L.id===_.id))Z(L=>L.filter(V=>V.id!==_.id));else{j(L=>L.filter(V=>V.id!==_.id)),I(L=>L.filter(V=>V.id!==_.id));try{await Wr.deleteMedia(kt,_.id)}catch(L){console.warn(" Local storage delete failed:",L)}}console.log(" Local state updated, media removed from UI")}catch(A){console.error(" Delete operation failed:",A)}}it({open:!1})}}),l&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>c(!1)}),a.jsxs("div",{className:"relative bg-[#222222] border border-white/20 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:24})}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-white/10 flex items-center justify-center",children:T?a.jsx("img",{src:T,alt:"Profile preview",className:"w-full h-full object-cover"}):a.jsx(Em,{size:32,className:"text-white/40"})}),a.jsxs("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full flex items-center justify-center cursor-pointer hover:bg-white/90 transition-colors",children:[a.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),a.jsx("input",{type:"file",accept:"image/*",onChange:Nc,className:"hidden"})]})]})})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Name"}),a.jsx("input",{type:"text",value:m.name,onChange:_=>y(A=>({...A,name:_.target.value})),className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-white/40",placeholder:"Enter your name"})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between space-x-6",children:[a.jsxs("div",{className:"flex items-center justify-between flex-1",children:[a.jsx("label",{className:"text-sm font-medium text-white",children:"Share to Feed"}),a.jsx("button",{onClick:()=>y(_=>({..._,shareToFeed:!_.shareToFeed})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${m.shareToFeed?"bg-white":"bg-white/20"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-black transition-transform ${m.shareToFeed?"translate-x-6":"translate-x-1"}`})})]}),m.shareToFeed&&a.jsxs("div",{className:"flex items-center justify-between flex-1",children:[a.jsx("label",{className:"text-sm font-medium text-white",children:"Allow Remix"}),a.jsx("button",{onClick:()=>y(_=>({..._,allowRemix:!_.allowRemix})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${m.allowRemix?"bg-white":"bg-white/20"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-black transition-transform ${m.allowRemix?"translate-x-6":"translate-x-1"}`})})]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:Li,disabled:p,className:"w-full bg-white text-black font-semibold py-3 rounded-xl hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Changes"}),a.jsx("button",{onClick:()=>c(!1),className:"w-full bg-white/5 text-white font-semibold py-3 rounded-xl hover:bg-white/10 transition-colors border border-white/20",children:"Cancel"})]})]})]}),u&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>d(!1)}),a.jsxs("div",{className:"relative bg-[#222222] border border-white/20 rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[a.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:24})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),a.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Delete Account"}),a.jsx("p",{className:"text-white/60",children:"This action cannot be undone"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:Ec,className:"w-full bg-red-500 text-white font-semibold py-3 rounded-xl hover:bg-red-600 transition-colors",children:"Delete Account Permanently"}),a.jsx("button",{onClick:()=>d(!1),className:"w-full bg-white/5 text-white font-semibold py-3 rounded-xl hover:bg-white/10 transition-colors border border-white/20",children:"Cancel"})]})]})]}),Tc&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>kr(!1)}),a.jsxs("div",{className:"relative bg-[#222222] border border-white/20 rounded-2xl max-w-lg w-full p-8 shadow-2xl",children:[a.jsx("button",{onClick:()=>kr(!1),className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:24})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-white text-xl font-bold mb-3",children:"Invite Friends"}),a.jsx("p",{className:"text-white/60 text-sm",children:"Share Stefna with your friends via email"})]}),$e&&Rt?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-semibold mb-2 text-sm",children:"You get"}),a.jsx("p",{className:"text-white/60 text-sm",children:"+10 bonus tokens after your friend's first generation"})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[a.jsx("h3",{className:"text-white font-semibold mb-2 text-sm",children:"Your friends get"}),a.jsx("p",{className:"text-white/60 text-sm",children:"+10 bonus tokens on signup with your invite"})]}),a.jsxs("form",{onSubmit:Ac,className:"space-y-4",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[a.jsx("label",{className:"text-white/60 text-sm mb-3 block",children:"Friend's Email"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"email",value:Sr,onChange:_=>Pi(_.target.value),className:"flex-1 bg-transparent text-white placeholder-white/40 focus:outline-none border-b border-white/20 focus:border-white/40 pb-2",placeholder:"Enter friend's email address",disabled:Ei,required:!0}),a.jsx("button",{type:"submit",disabled:Ei||!Sr.trim(),className:"bg-white text-black font-semibold py-2 px-5 rounded-lg hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Ei?"Sending...":"Send"})]})]}),jr&&a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:a.jsx("p",{className:"text-red-400 text-sm",children:jr})}),fa&&a.jsx("div",{className:"bg-white/10 border border-white/20 rounded-lg p-3 text-center",children:a.jsx("p",{className:"text-white text-sm",children:fa})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-xl font-bold text-white",children:Rt.invites}),a.jsx("div",{className:"text-white/60 text-xs mt-1",children:"Friends Invited"})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-xl font-bold text-white",children:Rt.tokensEarned}),a.jsx("div",{className:"text-white/60 text-xs mt-1",children:"Tokens Earned"})]})]})]}):a.jsxs("div",{className:"text-center py-6",children:[a.jsx("p",{className:"text-white/60 mb-4",children:"Sign up to unlock the invite system!"}),a.jsx("button",{onClick:()=>{kr(!1),t("/auth")},className:"bg-white text-black font-semibold py-2 px-6 rounded-xl hover:bg-white/90 transition-all duration-300",children:"Sign Up Now"})]})]})]}),Ai&&a.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md bg-[#222222] border border-white/20 rounded-2xl p-6 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-white font-medium text-lg",children:"Generate Caption"}),a.jsx("button",{onClick:()=>Ri(!1),className:"text-white/60 hover:text-white transition-colors",children:a.jsx(tn,{size:20})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Platform"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["instagram","x","tiktok"].map(_=>a.jsx("button",{onClick:()=>pa(_),className:`px-3 py-2 rounded-lg text-sm border transition-colors ${Pc===_?"border-white/40 text-white bg-white/10":"border-white/20 text-white/80 hover:text-white hover:bg-white/5"}`,children:_},_))})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Style"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["trendy","casual","professional","artistic"].map(_=>a.jsx("button",{onClick:()=>ma(_),className:`px-2 py-2 rounded-lg text-xs border transition-colors ${ce===_?"border-white/40 text-white bg-white/10":"border-white/20 text-white/80 hover:text-white hover:bg-white/5"}`,children:_},_))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:xa,className:"px-4 py-2 rounded-lg bg-white text-black text-sm font-medium disabled:opacity-50 transition-colors",disabled:Tr,children:Tr?"Generating":"Generate"}),a.jsx("button",{onClick:ba,className:"px-4 py-2 rounded-lg border border-white/20 text-white text-sm disabled:opacity-50 hover:bg-white/5 transition-colors",disabled:!$n,children:"Copy"})]}),a.jsxs("div",{children:[a.jsx("textarea",{value:$n,onChange:_=>Cr(_.target.value),placeholder:"Your caption will appear here",className:"w-full h-28 p-3 rounded-xl bg-white/5 border border-white/20 text-white placeholder-white/40 resize-none text-sm focus:outline-none focus:border-white/40 focus:bg-white/10 transition-colors"}),a.jsx("div",{className:"text-white/50 text-xs mt-2",children:"Includes #AiAsABrush automatically"})]})]})]})})]})},PA=()=>{const t=ms(),[e,n]=w.useState(""),[r,s]=w.useState(""),[i,o]=w.useState("email"),[l,c]=w.useState(!1),[u,d]=w.useState(""),[h,f]=w.useState(""),[p]=w.useState(()=>new URLSearchParams(window.location.search).get("referrer")||""),v=async g=>{g.preventDefault(),c(!0),d("");try{const m=await fetch("/.netlify/functions/request-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),y=await m.json();m.ok?(f("Login code sent to your email!"),o("otp")):d(y.error||"Failed to send code")}catch{d("Network error. Please try again.")}finally{c(!1)}},x=async g=>{g.preventDefault(),c(!0),d("");try{const m=await fetch("/.netlify/functions/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,otp:r,referrerEmail:p||void 0})}),y=await m.json();if(m.ok){const S=y.token||"temp-token",T=y.user;F.setAuthState(S,T),f("Login successful!"),t("/")}else d(y.error||"Invalid code")}catch{d("Network error. Please try again.")}finally{c(!1)}},k=()=>{o("email"),s(""),d(""),f("")};return a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/logo.png",alt:"Stefna",className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:i==="email"?"Sign in to Stefna":"Enter Login Code"}),a.jsx("p",{className:"text-white/60",children:i==="email"?"Enter your email to receive a login code":`We sent a 6-digit code to ${e}`})]}),p&&a.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-500/20 to-blue-500/20 border border-green-500/30 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Tm,{size:16,className:"text-green-400"}),a.jsxs("span",{className:"text-sm font-medium text-white",children:[" You're invited by ",p,"! Get 5 bonus credits when you sign up"]})]})}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/20 rounded-2xl p-8",children:[i==="email"?a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(ZS,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/40"}),a.jsx("input",{type:"email",value:e,onChange:g=>n(g.target.value),placeholder:"Enter your email",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-white/40 focus:bg-white/10",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:l||!e,className:`w-full py-3 rounded-lg font-medium text-sm transition-all duration-300 flex items-center justify-center space-x-2 ${e&&!l?"bg-white text-black hover:bg-white/90":"bg-white/10 text-white/40 cursor-not-allowed"}`,children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-black/20 border-t-black rounded-full animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Get Login Code"}),a.jsx(Cm,{size:16})]})})]}):a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Login Code"}),a.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:border-white/40 focus:bg-white/10 text-center text-lg tracking-widest",maxLength:6,required:!0})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{type:"submit",disabled:l||r.length!==6,className:`w-full py-3 rounded-lg font-medium text-sm transition-all duration-300 flex items-center justify-center space-x-2 ${r.length===6&&!l?"bg-white text-black hover:bg-white/90":"bg-white/10 text-white/40 cursor-not-allowed"}`,children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-black/20 border-t-black rounded-full animate-spin"}),a.jsx("span",{children:"Verifying..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Sign In"}),a.jsx(Cm,{size:16})]})}),a.jsxs("button",{type:"button",onClick:k,disabled:l,className:"w-full py-3 rounded-lg font-medium text-sm transition-all duration-300 flex items-center justify-center space-x-2 bg-white/5 text-white hover:bg-white/10",children:[a.jsx(ia,{size:16}),a.jsx("span",{children:"Back to Email"})]})]})]}),u&&a.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center space-x-2",children:[a.jsx(a_,{size:16,className:"text-red-400"}),a.jsx("span",{className:"text-red-400 text-sm",children:u})]}),h&&a.jsxs("div",{className:"mt-4 p-3 bg-white/10 border border-white/20 rounded-lg flex items-center justify-center space-x-2",children:[a.jsx(Tm,{size:16,className:"text-white"}),a.jsx("span",{className:"text-white text-sm",children:h})]})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsx("button",{onClick:()=>t("/"),className:"text-white/60 hover:text-white text-sm",children:" Back to Home"})})]})})};let yy=!1;function NA(){yy||(console.log(" Initializing auth bootstrap..."),F.onAuthStateChange(async t=>{if(t.isAuthenticated&&t.user){console.log(" User signed in, checking profile setup...");try{const e=await CA();console.log(e?" User needs onboarding - modal will be shown by HomeNew component":" User profile is complete"),await sb({})}catch(e){console.error(" Error during auth bootstrap:",e)}}else console.log(" User signed out")}),yy=!0,console.log(" Auth bootstrap initialized"))}const vy=()=>a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md p-8",children:[a.jsx("div",{className:"w-32 h-32 mx-auto bg-transparent rounded-xl flex items-center justify-center",style:{animation:"wave-shadow 3s ease-in-out infinite",background:"transparent",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-24 h-24 object-contain"})}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
            @keyframes wave-shadow {
              0% { 
                transform: scale(1);
                opacity: 0.4;
                box-shadow: 
                  0 0 0 0 rgba(168, 85, 247, 0.8),
                  0 0 0 0 rgba(236, 72, 153, 0.6),
                  0 0 0 0 rgba(239, 68, 68, 0.4);
              }
              25% { 
                transform: scale(1.05);
                opacity: 0.6;
                box-shadow: 
                  0 0 0 8px rgba(168, 85, 247, 0.4),
                  0 0 0 4px rgba(236, 72, 153, 0.6),
                  0 0 0 0 rgba(239, 68, 68, 0.8);
              }
              50% { 
                transform: scale(1.1);
                opacity: 0.8;
                box-shadow: 
                  0 0 0 16px rgba(168, 85, 247, 0.2),
                  0 0 0 8px rgba(236, 72, 153, 0.4),
                  0 0 0 4px rgba(239, 68, 68, 0.6);
              }
              75% { 
                transform: scale(1.05);
                opacity: 0.6;
                box-shadow: 
                  0 0 0 8px rgba(168, 85, 247, 0.4),
                  0 0 0 16px rgba(236, 72, 153, 0.2),
                  0 0 0 8px rgba(239, 68, 68, 0.4);
              }
              100% { 
                transform: scale(1);
                opacity: 0.4;
                box-shadow: 
                  0 0 0 0 rgba(168, 85, 247, 0.8),
                  0 0 0 0 rgba(236, 72, 153, 0.6),
                  0 0 0 0 rgba(239, 68, 68, 0.4);
              }
            }
          `}})]})}),EA=()=>window.location.hostname==="stefna.xyz"||window.location.hostname==="stefna.netlify.app"?a.jsx(vy,{}):a.jsxs("div",{className:"min-h-screen bg-black pb-16",children:[a.jsx("div",{children:a.jsxs(NS,{children:[a.jsx(bn,{path:"/",element:a.jsx(JP,{})}),a.jsx(bn,{path:"/auth",element:a.jsx(PA,{})}),a.jsx(bn,{path:"/profile",element:a.jsx(TA,{})}),a.jsx(bn,{path:"/gallery",element:a.jsx(TS,{to:"/",replace:!0})}),a.jsx(bn,{path:"/privacy",element:a.jsx(QP,{})}),a.jsx(bn,{path:"/terms",element:a.jsx(XP,{})}),a.jsx(bn,{path:"/cookies",element:a.jsx(ZP,{})}),a.jsx(bn,{path:"/coming-soon",element:a.jsx(vy,{})})]})}),a.jsx(qT,{isOpen:!1,onClose:()=>{},feature:""})]}),AA=()=>(w.useEffect(()=>{NA()},[]),a.jsx(RS,{children:a.jsx(VT,{children:a.jsx(YT,{children:a.jsx(EA,{})})})}));window.addEventListener("error",t=>console.error("[window.onerror]",t.error||t.message));window.addEventListener("unhandledrejection",t=>console.error("[unhandledrejection]",t.reason));(()=>{const t=window.fetch;window.fetch=async(e,n)=>{var s;const r=((s=crypto.randomUUID)==null?void 0:s.call(crypto))??String(Date.now());console.info("[fetch>]",r,typeof e=="string"?e:e.toString(),(n==null?void 0:n.method)||"GET");try{const i=await t(e,n);return console.info("[fetch<]",r,i.status,i.url),i}catch(i){throw console.error("[fetch!]",r,i),i}}})();Ou.createRoot(document.getElementById("root")).render(a.jsx(Os.StrictMode,{children:a.jsx(AA,{})}));
