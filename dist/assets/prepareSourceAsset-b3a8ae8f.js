async function m(o){if(typeof o=="string"&&!o.startsWith("blob:")){const f=/\.(mp4|mov|webm)$/i.test(o)?"video":"image";return{url:o,resource_type:f}}const e=await fetch("/.netlify/functions/cloudinary-sign",{method:"POST"});if(!e.ok)throw new Error(`Cloudinary sign failed: ${e.status}`);const r=await e.json(),{timestamp:p,signature:i,api_key:u,cloud_name:d,folder:n}=r,t=new FormData;t.append("file",o),t.append("timestamp",p.toString()),t.append("signature",i),t.append("api_key",u),n&&t.append("folder",n);const s=await fetch(`https://api.cloudinary.com/v1_1/${d}/auto/upload`,{method:"POST",body:t});if(!s.ok)throw new Error("Cloudinary upload failed");const a=await s.json(),c=a.resource_type;return{url:a.secure_url,resource_type:c}}export{m as prepareSourceAsset};
