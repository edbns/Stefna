#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 [Pre-Push Hook] Running Code Quality Check..."
echo "📋 Validating code quality before push..."

# Run TypeScript check
echo "📋 Checking TypeScript compilation..."
npx tsc --noEmit

if [ $? -eq 0 ]; then
    echo "✅ [Pre-Push Hook] TypeScript check PASSED!"
else
    echo "❌ [Pre-Push Hook] TypeScript check FAILED!"
    echo "🚨 Cannot push - TypeScript compilation errors detected!"
    exit 1
fi

# Run ESLint
echo "📋 Running ESLint..."
npx eslint . --ext .ts,.tsx --max-warnings 0

if [ $? -eq 0 ]; then
    echo "✅ [Pre-Push Hook] ESLint check PASSED!"
    echo "🚀 Safe to push - all code quality checks passed!"
    exit 0
else
    echo "❌ [Pre-Push Hook] ESLint check FAILED!"
    echo "🚨 Cannot push - linting errors detected!"
    exit 1
fi
