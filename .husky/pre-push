#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” [Pre-Push Hook] Running Code Quality Check..."
echo "ğŸ“‹ Validating code quality before push..."

# Run TypeScript check
echo "ğŸ“‹ Checking TypeScript compilation..."
npx tsc --noEmit

if [ $? -eq 0 ]; then
    echo "âœ… [Pre-Push Hook] TypeScript check PASSED!"
else
    echo "âŒ [Pre-Push Hook] TypeScript check FAILED!"
    echo "ğŸš¨ Cannot push - TypeScript compilation errors detected!"
    exit 1
fi

# Run ESLint
echo "ğŸ“‹ Running ESLint..."
npx eslint . --ext .ts,.tsx --max-warnings 0

if [ $? -eq 0 ]; then
    echo "âœ… [Pre-Push Hook] ESLint check PASSED!"
    echo "ğŸš€ Safe to push - all code quality checks passed!"
    exit 0
else
    echo "âŒ [Pre-Push Hook] ESLint check FAILED!"
    echo "ğŸš¨ Cannot push - linting errors detected!"
    exit 1
fi
