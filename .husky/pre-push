#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” [Pre-Push Hook] Running Prisma Safety Check..."
echo "ğŸ“‹ Validating all field names before push..."

# Run the safety check script
node scripts/checkFields.js

if [ $? -eq 0 ]; then
    echo "âœ… [Pre-Push Hook] Prisma Safety Check PASSED!"
    echo "ğŸš€ Safe to push - all fields validated successfully!"
    exit 0
else
    echo "âŒ [Pre-Push Hook] Prisma Safety Check FAILED!"
    echo "ğŸš¨ Cannot push - schema issues detected!"
    echo ""
    echo "ğŸ”§ To fix this:"
    echo "   1. Check the error message above"
    echo "   2. Update schema.prisma if needed"
    echo "   3. Run: npx prisma generate"
    echo "   4. Run: npx prisma db push"
    echo "   5. Test: node scripts/checkFields.js"
    echo "   6. Try pushing again"
    echo ""
    exit 1
fi
